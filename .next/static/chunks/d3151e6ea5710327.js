(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88653,e=>{"use strict";e.i(47167);var t=e.i(43476),n=e.i(71645),i=e.i(31178),s=e.i(47414),r=e.i(21476),a=n,o=e.i(37806);class l extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,n=e instanceof HTMLElement&&e.offsetWidth||0,i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft,i.right=n-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function c(e){let{children:n,isPresent:i,anchorX:s}=e,r=(0,a.useId)(),c=(0,a.useRef)(null),d=(0,a.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=(0,a.useContext)(o.MotionConfigContext);return(0,a.useInsertionEffect)(()=>{let{width:e,height:t,top:n,left:a,right:o}=d.current;if(i||!c.current||!e||!t)return;c.current.dataset.motionPopId=r;let l=document.createElement("style");return u&&(l.nonce=u),document.head.appendChild(l),l.sheet&&l.sheet.insertRule('\n          [data-motion-pop-id="'.concat(r,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===s?"left: ".concat(a):"right: ".concat(o),"px !important;\n            top: ").concat(n,"px !important;\n          }\n        ")),()=>{document.head.removeChild(l)}},[i]),(0,t.jsx)(l,{isPresent:i,childRef:c,sizeRef:d,children:a.cloneElement(n,{ref:c})})}let d=e=>{let{children:i,initial:a,isPresent:o,onExitComplete:l,custom:d,presenceAffectsLayout:h,mode:p,anchorX:f}=e,m=(0,s.useConstant)(u),x=(0,n.useId)(),y=(0,n.useCallback)(e=>{for(let t of(m.set(e,!0),m.values()))if(!t)return;l&&l()},[m,l]),g=(0,n.useMemo)(()=>({id:x,initial:a,isPresent:o,custom:d,onExitComplete:y,register:e=>(m.set(e,!1),()=>m.delete(e))}),h?[Math.random(),y]:[o,y]);return(0,n.useMemo)(()=>{m.forEach((e,t)=>m.set(t,!1))},[o]),n.useEffect(()=>{o||m.size||!l||l()},[o]),"popLayout"===p&&(i=(0,t.jsx)(c,{isPresent:o,anchorX:f,children:i})),(0,t.jsx)(r.PresenceContext.Provider,{value:g,children:i})};function u(){return new Map}var h=e.i(64978);let p=e=>e.key||"";function f(e){let t=[];return n.Children.forEach(e,e=>{(0,n.isValidElement)(e)&&t.push(e)}),t}var m=e.i(74008);let x=e=>{let{children:r,custom:a,initial:o=!0,onExitComplete:l,presenceAffectsLayout:c=!0,mode:u="sync",propagate:x=!1,anchorX:y="left"}=e,[g,v]=(0,h.usePresence)(x),b=(0,n.useMemo)(()=>f(r),[r]),w=x&&!g?[]:b.map(p),j=(0,n.useRef)(!0),k=(0,n.useRef)(b),z=(0,s.useConstant)(()=>new Map),[C,N]=(0,n.useState)(b),[S,M]=(0,n.useState)(b);(0,m.useIsomorphicLayoutEffect)(()=>{j.current=!1,k.current=b;for(let e=0;e<S.length;e++){let t=p(S[e]);w.includes(t)?z.delete(t):!0!==z.get(t)&&z.set(t,!1)}},[S,w.length,w.join("-")]);let P=[];if(b!==C){let e=[...b];for(let t=0;t<S.length;t++){let n=S[t],i=p(n);w.includes(i)||(e.splice(t,0,n),P.push(n))}return"wait"===u&&P.length&&(e=P),M(f(e)),N(b),null}let{forceRender:R}=(0,n.useContext)(i.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:S.map(e=>{let n=p(e),i=(!x||!!g)&&(b===S||w.includes(n));return(0,t.jsx)(d,{isPresent:i,initial:(!j.current||!!o)&&void 0,custom:a,presenceAffectsLayout:c,mode:u,onExitComplete:i?void 0:()=>{if(!z.has(n))return;z.set(n,!0);let e=!0;z.forEach(t=>{t||(e=!1)}),e&&(null==R||R(),M(k.current),x&&(null==v||v()),l&&l())},anchorX:y,children:e},n)})})};e.s(["AnimatePresence",()=>x],88653)},67791,e=>{"use strict";var t=e.i(43476),n=e.i(71645),i=e.i(46932),s=e.i(88653),r=e.i(75254);let a=(0,r.default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),o=(0,r.default)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),l=(0,r.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),c=(0,r.default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),d={role:"assistant",content:"Hi — I'm your AI Revenue Advisor. Ask me about pipeline health, sales audits, or how we can help. What's on your mind?"};function u(){let[e,r]=(0,n.useState)([d]),[u,h]=(0,n.useState)(""),[p,f]=(0,n.useState)(!1),[m,x]=(0,n.useState)(null),[y,g]=(0,n.useState)(""),v=(0,n.useRef)(null);async function b(t){t.preventDefault();let n=u.trim();if(!n||p)return;let i={role:"user",content:n};r(e=>[...e,i]),h(""),f(!0),g("");try{var s;let t=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[...e,i].map(e=>({role:e.role,content:e.content})),inquiryId:null!=m?m:void 0})});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.error||"Request failed: ".concat(t.status))}let n=null==(s=t.body)?void 0:s.getReader(),a=new TextDecoder,o="",l="",c="\0DATA:";if(n){for(;;){let{done:e,value:t}=await n.read();if(e)break;let i=(o+=a.decode(t,{stream:!0})).indexOf(c);if(-1!==i){l+=o.slice(0,i);let e=o.slice(i+c.length).trim();try{let t=JSON.parse(e);t.inquiryId&&x(t.inquiryId)}catch(e){}o="";break}l+=o,o="",g(l)}if(o){let e=o.indexOf(c);if(-1!==e){l+=o.slice(0,e);try{let t=JSON.parse(o.slice(e+c.length).trim());t.inquiryId&&x(t.inquiryId)}catch(e){}}else l+=o;g(l)}}let d=l.trim();d&&r(e=>[...e,{role:"assistant",content:d}]),g("")}catch(e){r(t=>[...t,{role:"assistant",content:"Sorry, something went wrong. ".concat(e instanceof Error?e.message:"Please try again.")}])}finally{f(!1)}}(0,n.useEffect)(()=>{var e;null==(e=v.current)||e.scrollTo({top:v.current.scrollHeight,behavior:"smooth"})},[e,y]);let w=y?[...e,{role:"assistant",content:y}]:e;return(0,t.jsxs)("div",{className:"min-h-screen bg-white overflow-x-hidden",children:[(0,t.jsx)("section",{className:"pt-28 pb-6 px-4 md:px-6 border-b border-zinc-100",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,t.jsx)(i.motion.p,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"text-[10px] font-semibold uppercase tracking-widest text-red-700 mb-2",children:"Live chat"}),(0,t.jsx)(i.motion.h1,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{delay:.05},className:"text-3xl md:text-4xl font-black tracking-tight text-zinc-900",children:"AI Revenue Advisor"}),(0,t.jsx)(i.motion.p,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-sm text-zinc-500 mt-1",children:"Chat with our AI agent. Your conversation is saved so we can follow up."})]})}),(0,t.jsxs)("section",{className:"max-w-2xl mx-auto px-4 md:px-6 py-6",children:[(0,t.jsx)("div",{ref:v,className:"min-h-[320px] max-h-[55vh] overflow-y-auto space-y-4 pb-4",children:(0,t.jsx)(s.AnimatePresence,{initial:!1,children:w.map((e,n)=>(0,t.jsxs)(i.motion.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"flex gap-3 ".concat("user"===e.role?"flex-row-reverse":""),children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ".concat("user"===e.role?"bg-zinc-800 text-white":"bg-red-700 text-white"),children:"user"===e.role?(0,t.jsx)(l,{size:16}):(0,t.jsx)(o,{size:16})}),(0,t.jsxs)("div",{className:"max-w-[85%] rounded-lg px-4 py-3 text-sm ".concat("user"===e.role?"bg-zinc-900 text-white":"bg-zinc-100 text-zinc-900 border border-zinc-200"),children:[(0,t.jsx)("p",{className:"whitespace-pre-wrap break-words",children:e.content}),"assistant"===e.role&&n===w.length-1&&p&&(0,t.jsx)("span",{className:"inline-block w-2 h-4 ml-0.5 bg-red-600 animate-pulse"})]})]},n))})}),(0,t.jsxs)("form",{onSubmit:b,className:"flex gap-2 mt-4",children:[(0,t.jsx)("input",{type:"text",value:u,onChange:e=>h(e.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-3 border border-zinc-300 rounded-lg text-zinc-900 placeholder-zinc-400 focus:outline-none focus:ring-2 focus:ring-red-600 focus:border-transparent",disabled:p}),(0,t.jsxs)("button",{type:"submit",disabled:p||!u.trim(),className:"px-4 py-3 bg-red-700 text-white rounded-lg font-semibold hover:bg-red-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[p?(0,t.jsx)(c,{size:18,className:"animate-spin"}):(0,t.jsx)(a,{size:18}),"Send"]})]}),m&&(0,t.jsx)("p",{className:"text-[10px] uppercase tracking-widest text-zinc-400 mt-3",children:"Conversation saved. We’ll follow up if you shared your details."})]})]})}e.s(["default",()=>u],67791)}]);