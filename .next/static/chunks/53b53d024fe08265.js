(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63209,e=>{"use strict";let t=(0,e.i(75254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},44876,e=>{"use strict";var t=e.i(43476);e.i(71645);let r={pending:{bg:"bg-orange-100",text:"text-orange-700",border:"border-orange-300",label:"Pending"},scheduled:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-300",label:"Scheduled"},in_progress:{bg:"bg-red-100",text:"text-red-700",border:"border-red-300",label:"In Progress"},completed:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300",label:"Completed"},cancelled:{bg:"bg-red-100",text:"text-red-700",border:"border-red-300",label:"Cancelled"},assigned:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-300",label:"Assigned"},accepted:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300",label:"Accepted"},started:{bg:"bg-red-100",text:"text-red-700",border:"border-red-300",label:"Started"},draft:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-300",label:"Draft"},sent:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-300",label:"Sent"},paid:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300",label:"Paid"},overdue:{bg:"bg-red-100",text:"text-red-700",border:"border-red-300",label:"Overdue"},compliant:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300",label:"Compliant"},non_compliant:{bg:"bg-orange-100",text:"text-orange-700",border:"border-orange-300",label:"Non-Compliant"},verified:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300",label:"Verified"}};function a(e){let{status:a,size:l="default"}=e,s=r[null==a?void 0:a.toLowerCase()]||r.pending,n={small:"px-2 py-1 text-[10px]",default:"px-3 py-1.5 text-xs",large:"px-4 py-2 text-sm"};return(0,t.jsx)("span",{className:"inline-flex items-center justify-center rounded-full border font-black uppercase tracking-wider ".concat(s.bg," ").concat(s.text," ").concat(s.border," ").concat(n[l]||n.default),children:s.label||(null==a?void 0:a.replace("_"," "))||"Unknown"})}e.s(["default",()=>a])},55436,e=>{"use strict";let t=(0,e.i(75254).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>t],55436)},40160,e=>{"use strict";let t=(0,e.i(75254).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>t],40160)},16072,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(18566),l=e.i(81291),s=e.i(44876),n=e.i(81418),i=e.i(55436),d=e.i(63209),o=e.i(40160);function c(){let e=(0,a.useRouter)(),{getToken:c}=(0,l.useAuth)(),[g,x]=(0,r.useState)([]),[b,p]=(0,r.useState)([]),[m,h]=(0,r.useState)("all"),[u,f]=(0,r.useState)(""),[y,j]=(0,r.useState)(!0);(0,r.useEffect)(()=>{v()},[]),(0,r.useEffect)(()=>{k()},[g,m,u]);let v=async()=>{try{let e=c(),t={};e&&(t.Authorization="Bearer ".concat(e));let r=await fetch("/api/compliance",{headers:t});if(r.ok){let e=await r.json();x(e.compliance_logs||[])}}catch(e){console.error("Fetch compliance logs error:",e)}finally{j(!1)}},k=()=>{let e=g;"signed_off"===m?e=e.filter(e=>e.sign_off):"pending"===m&&(e=e.filter(e=>!e.sign_off)),u&&(e=e.filter(e=>{var t,r;return(null==(t=e.business_name)?void 0:t.toLowerCase().includes(u.toLowerCase()))||(null==(r=e.booking_id)?void 0:r.toLowerCase().includes(u.toLowerCase()))})),p(e)};return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(n.ShieldCheck,{size:32,className:"text-green-600"}),(0,t.jsx)("h1",{className:"text-4xl md:text-5xl font-black uppercase tracking-tighter italic text-black",children:"Compliance Reports"})]}),(0,t.jsxs)("button",{className:"px-6 py-3 bg-green-600 text-white font-black rounded-xl hover:bg-green-700 transition-all uppercase tracking-wider text-sm flex items-center gap-2 shadow-lg",children:[(0,t.jsx)(o.Download,{size:20}),"Export Report"]})]}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsx)(i.Search,{size:20,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),(0,t.jsx)("input",{type:"text",value:u,onChange:e=>f(e.target.value),placeholder:"Search compliance logs...",className:"w-full pl-12 pr-4 py-3 rounded-xl bg-white border border-gray-200 text-black placeholder-gray-400 focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all shadow-sm"})]}),(0,t.jsx)("div",{className:"flex gap-2",children:["all","signed_off","pending"].map(e=>(0,t.jsx)("button",{onClick:()=>h(e),className:"px-4 py-2 rounded-xl border font-bold uppercase tracking-wider text-xs whitespace-nowrap transition-all shadow-sm ".concat(m===e?"bg-green-100 border-green-300 text-green-700":"bg-white border-gray-200 text-gray-600 hover:bg-gray-50 hover:border-green-300"),children:"all"===e?"All":e.replace("_"," ")},e))})]}),y?(0,t.jsx)("div",{className:"text-center py-12 text-gray-600",children:"Loading..."}):b.length>0?(0,t.jsx)("div",{className:"space-y-4",children:b.map(r=>{var a,l,i,o,c;return(0,t.jsx)("div",{className:"p-6 rounded-2xl bg-white border border-gray-200 hover:bg-gray-50 hover:border-green-300 transition-all cursor-pointer shadow-sm",onClick:()=>e.push("/admin/jobs/".concat(r.booking_id)),children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(n.ShieldCheck,{size:24,className:r.sign_off?"text-green-600":"text-orange-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-black text-black",children:r.business_name||"Business"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Booking ID: ",null==(a=r.booking_id)?void 0:a.substring(0,8),"..."]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Checked By"}),(0,t.jsxs)("p",{className:"text-black font-medium",children:[r.checked_by_first_name," ",r.checked_by_last_name]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Verified At"}),(0,t.jsx)("p",{className:"text-gray-700",children:(c=r.verified_at||r.created_at)?new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Photos"}),(0,t.jsxs)("p",{className:"text-black font-medium",children:[(null==(l=r.photos)?void 0:l.length)||0," photos"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Checklist Items"}),(0,t.jsxs)("p",{className:"text-black font-medium",children:[(null==(i=r.checklist_items)?void 0:i.filter(e=>(null==e?void 0:e.completed)||"object"==typeof e&&e.completed).length)||0," / ",(null==(o=r.checklist_items)?void 0:o.length)||0]})]})]}),r.non_compliance_notes&&(0,t.jsxs)("div",{className:"p-3 rounded-xl bg-orange-100 border border-orange-300",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)(d.AlertCircle,{size:16,className:"text-orange-600"}),(0,t.jsx)("p",{className:"text-xs font-bold uppercase tracking-wider text-orange-700",children:"Non-Compliance Notes"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-700",children:r.non_compliance_notes})]})]}),(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)(s.default,{status:r.sign_off?"completed":"pending",size:"default"})})]})},r.id)})}):(0,t.jsxs)("div",{className:"text-center py-12 space-y-4",children:[(0,t.jsx)(n.ShieldCheck,{size:48,className:"mx-auto text-gray-400 opacity-50"}),(0,t.jsx)("p",{className:"text-gray-600",children:"No compliance logs found."})]})]})}e.s(["default",()=>c])}]);