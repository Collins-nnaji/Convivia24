(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,46897,e=>{"use strict";let t=(0,e.i(75254).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],46897)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},12426,e=>{"use strict";let t=(0,e.i(75254).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],12426)},3116,e=>{"use strict";let t=(0,e.i(75254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],3116)},87316,e=>{"use strict";let t=(0,e.i(75254).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},69638,e=>{"use strict";let t=(0,e.i(75254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},72520,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],72520)},70756,e=>{"use strict";let t=(0,e.i(75254).default)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],70756)},83086,70273,e=>{"use strict";var t=e.i(75254);let r=(0,t.default)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);e.s(["Sparkles",()=>r],83086);let a=(0,t.default)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);e.s(["Star",()=>a],70273)},38266,e=>{"use strict";var t=e.i(20786),r=e.i(92808),a=e.i(43476),s=e.i(71645),l=e.i(46932),i=e.i(18566),c=e.i(81291),d=e.i(72520),n=e.i(87316),o=e.i(46897),u=e.i(63209),g=e.i(3116),x=e.i(12426),p=e.i(69638),y=e.i(83086),h=e.i(70756),m=e.i(70273);function b(){let e=(0,i.useRouter)(),{user:b,getToken:f}=(0,c.useAuth)(),[v,k]=(0,s.useState)([]),[j,N]=(0,s.useState)(!0),[_,w]=(0,s.useState)(!1),[C,S]=(0,s.useState)("all"),[A,M]=(0,s.useState)({service_id:"",urgency:"routine",scheduled_start:"",scheduled_end:"",location_address:"",special_instructions:""}),[z,T]=(0,s.useState)(null),[B,L]=(0,s.useState)(null),[q,E]=(0,s.useState)("");(0,s.useEffect)(()=>{P()},[]),(0,s.useEffect)(()=>{if(A.service_id){let e=v.find(e=>e.id===A.service_id);e&&(T(e),R(e,A.urgency))}},[A.service_id,A.urgency,v]);let P=async()=>{try{let e=await fetch("/api/services");if(e.ok){let t=await e.json();k(t.services||[])}}catch(e){console.error("Fetch services error:",e)}finally{N(!1)}},R=(e,t)=>{if(!e)return;let r=e.base_price||0;"urgent"===t?r*=1.5:"emergency"===t&&(r*=2),L({base_price:e.base_price,urgency_multiplier:"urgent"===t?1.5:"emergency"===t?2:1,total_cost:r,duration:e.duration_hours})},D=async a=>{a.preventDefault(),E(""),w(!0);try{let a=f(),s={"Content-Type":"application/json"};a&&(s.Authorization="Bearer ".concat(a));let l=await fetch("/api/bookings",{method:"POST",headers:s,body:JSON.stringify((0,r._)((0,t._)({},A),{total_cost:(null==B?void 0:B.total_cost)||(null==z?void 0:z.base_price)||0}))}),i=await l.json();l.ok?e.push("/client/jobs/".concat(i.booking.id)):E(i.error||"Failed to create booking")}catch(e){console.error("Create booking error:",e),E("Network error. Please try again.")}finally{w(!1)}},O=v.filter(e=>("all"===C||e.category===C)&&("emergency"!==A.urgency&&"urgent"!==A.urgency||"rapid"===e.type||"emergency"===e.type||"security"===e.category)),U=e=>"â‚¦".concat(e.toLocaleString("en-NG",{minimumFractionDigits:2,maximumFractionDigits:2}));return(0,a.jsxs)("div",{className:"max-w-5xl mx-auto space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-black uppercase tracking-tighter italic text-black mb-2",children:"Request Service"}),(0,a.jsx)("p",{className:"text-gray-600 font-medium",children:"Choose cleaning, security, or both. Get instant pricing and confirmed quotes."})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4 p-6 rounded-2xl bg-gray-50 border border-gray-200",children:[(0,a.jsx)("span",{className:"text-sm font-black uppercase tracking-wider text-gray-600",children:"Service Type:"}),[{id:"all",label:"All Services",icon:m.Star,color:"gray"},{id:"cleaning",label:"Cleaning",icon:y.Sparkles,color:"red"},{id:"security",label:"Security",icon:h.Lock,color:"blue"},{id:"bundle",label:"Bundles",icon:m.Star,color:"green"}].map(e=>{let s=e.icon,i=C===e.id;return(0,a.jsxs)(l.motion.button,{type:"button",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{S(e.id),M((0,r._)((0,t._)({},A),{service_id:""}))},className:"flex items-center gap-2 px-4 py-2 rounded-xl border-2 font-black uppercase tracking-wider text-xs transition-all shadow-sm ".concat(i?"cleaning"===e.id?"bg-red-100 border-red-300 text-red-700 shadow-md":"security"===e.id?"bg-blue-100 border-blue-300 text-blue-700 shadow-md":"bundle"===e.id?"bg-green-100 border-green-300 text-green-700 shadow-md":"bg-gray-100 border-gray-300 text-gray-700 shadow-md":"bg-white border-gray-200 text-gray-600 hover:border-red-300"),children:[(0,a.jsx)(s,{size:16}),e.label]},e.id)})]}),(0,a.jsxs)("form",{onSubmit:D,className:"space-y-8",children:[q&&(0,a.jsxs)(l.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 rounded-xl bg-red-50 border border-red-200 flex items-center gap-3",children:[(0,a.jsx)(u.AlertCircle,{size:20,className:"text-red-600 flex-shrink-0"}),(0,a.jsx)("p",{className:"text-sm text-red-700 font-medium",children:q})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("label",{className:"text-sm font-bold uppercase tracking-wider text-gray-600 flex items-center gap-2",children:[(0,a.jsx)(u.AlertCircle,{size:16,className:"text-red-600"}),"Urgency Level"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{value:"routine",label:"Routine",desc:"Normal scheduling",selectedBg:"bg-gray-100",selectedBorder:"border-gray-300",selectedText:"text-gray-800"},{value:"urgent",label:"Urgent",desc:"Same-day response",selectedBg:"bg-orange-100",selectedBorder:"border-orange-300",selectedText:"text-orange-700"},{value:"emergency",label:"Emergency",desc:"Immediate response",selectedBg:"bg-red-100",selectedBorder:"border-red-300",selectedText:"text-red-700"}].map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>M((0,r._)((0,t._)({},A),{urgency:e.value,service_id:"emergency"===e.value||"urgent"===e.value?"":A.service_id})),className:"p-4 rounded-xl border transition-all text-left ".concat(A.urgency===e.value?"".concat(e.selectedBg," ").concat(e.selectedBorder," ").concat(e.selectedText):"bg-white border-gray-200 text-gray-600 hover:bg-gray-50 hover:border-red-300"),children:[(0,a.jsx)("p",{className:"font-black uppercase tracking-tight mb-1",children:e.label}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.desc})]},e.value))})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("label",{className:"text-sm font-bold uppercase tracking-wider text-gray-600 flex items-center gap-2",children:[(0,a.jsx)(p.CheckCircle,{size:16,className:"text-green-600"}),"Service Type"]}),j?(0,a.jsx)("div",{className:"text-center py-8 text-gray-600",children:"Loading services..."}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:O.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>M((0,r._)((0,t._)({},A),{service_id:e.id})),className:"p-6 rounded-xl border transition-all text-left shadow-sm ".concat(A.service_id===e.id?"bg-red-50 border-red-300 text-red-700":"bg-white border-gray-200 text-gray-700 hover:bg-gray-50 hover:border-red-300"),children:[(0,a.jsx)("p",{className:"font-black uppercase tracking-tight mb-2",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mb-3 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs mt-3 pt-3 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 text-red-600 font-black",children:[(0,a.jsx)(x.DollarSign,{size:12}),U(e.base_price||0),"hourly"===e.pricing_model&&"/hr","daily"===e.pricing_model&&"/day","monthly"===e.pricing_model&&"/month"]}),e.duration_hours&&(0,a.jsxs)("span",{className:"flex items-center gap-1 text-gray-600 font-bold",children:[(0,a.jsx)(g.Clock,{size:12}),e.duration_hours>=24?"".concat(Math.round(e.duration_hours/24)," days"):"".concat(e.duration_hours,"hrs")]})]}),e.category&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("span",{className:"text-[8px] font-black uppercase tracking-wider px-2 py-1 rounded ".concat("cleaning"===e.category?"bg-red-100 text-red-700":"security"===e.category?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"),children:"cleaning"===e.category?"CONVIVIA24 CLEAN":"security"===e.category?"CONVIVIA24 SECURE":"BUNDLE"})})]},e.id))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-bold uppercase tracking-wider text-gray-600 flex items-center gap-2",children:[(0,a.jsx)(n.Calendar,{size:16,className:"text-red-600"}),"Preferred Start Time"]}),(0,a.jsx)("input",{type:"datetime-local",value:A.scheduled_start,onChange:e=>M((0,r._)((0,t._)({},A),{scheduled_start:e.target.value})),className:"w-full px-4 py-4 rounded-xl bg-white border border-gray-200 text-black focus:outline-none focus:border-red-500 focus:ring-2 focus:ring-red-200 transition-all"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-bold uppercase tracking-wider text-gray-600 flex items-center gap-2",children:[(0,a.jsx)(g.Clock,{size:16,className:"text-red-600"}),"Preferred End Time"]}),(0,a.jsx)("input",{type:"datetime-local",value:A.scheduled_end,onChange:e=>M((0,r._)((0,t._)({},A),{scheduled_end:e.target.value})),className:"w-full px-4 py-4 rounded-xl bg-white border border-gray-200 text-black focus:outline-none focus:border-red-500 focus:ring-2 focus:ring-red-200 transition-all"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-bold uppercase tracking-wider text-gray-600 flex items-center gap-2",children:[(0,a.jsx)(o.MapPin,{size:16,className:"text-red-600"}),"Service Location Address"]}),(0,a.jsx)("textarea",{value:A.location_address,onChange:e=>M((0,r._)((0,t._)({},A),{location_address:e.target.value})),required:!0,rows:3,className:"w-full px-4 py-4 rounded-xl bg-white border border-gray-200 text-black placeholder-gray-400 focus:outline-none focus:border-red-500 focus:ring-2 focus:ring-red-200 transition-all",placeholder:"Enter full address where service is needed"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-bold uppercase tracking-wider text-gray-600",children:"Special Instructions (Optional)"}),(0,a.jsx)("textarea",{value:A.special_instructions,onChange:e=>M((0,r._)((0,t._)({},A),{special_instructions:e.target.value})),rows:4,className:"w-full px-4 py-4 rounded-xl bg-white border border-gray-200 text-black placeholder-gray-400 focus:outline-none focus:border-red-500 focus:ring-2 focus:ring-red-200 transition-all",placeholder:"Any specific requirements or special instructions..."})]}),B&&z&&(0,a.jsxs)("div",{className:"p-6 rounded-xl bg-green-50 border border-green-300 space-y-3 shadow-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-black uppercase tracking-tight text-green-700",children:"Estimated Quote"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between text-gray-700",children:[(0,a.jsx)("span",{className:"font-bold",children:"Base Price:"}),(0,a.jsx)("span",{className:"font-black",children:U(B.base_price)})]}),B.urgency_multiplier>1&&(0,a.jsxs)("div",{className:"flex justify-between text-orange-700",children:[(0,a.jsxs)("span",{className:"font-bold",children:["Urgency Premium (",Math.round((B.urgency_multiplier-1)*100),"%):"]}),(0,a.jsx)("span",{className:"font-black",children:U(B.total_cost-B.base_price)})]}),(0,a.jsxs)("div",{className:"flex justify-between text-xl font-black text-black pt-3 border-t-2 border-gray-300",children:[(0,a.jsx)("span",{children:"Total Cost:"}),(0,a.jsx)("span",{className:"text-red-600",children:U(B.total_cost)})]}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-600 pt-2",children:[(0,a.jsx)("span",{className:"font-bold",children:"Estimated Duration:"}),(0,a.jsx)("span",{className:"font-black",children:B.duration>=24?"".concat(Math.round(B.duration/24)," days"):"".concat(B.duration," hours")})]})]})]}),(0,a.jsxs)(l.motion.button,{type:"submit",disabled:_||!A.service_id||!A.location_address,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full px-6 py-5 bg-red-600 text-white font-black rounded-xl hover:bg-red-700 transition-all flex items-center justify-center gap-3 uppercase tracking-wider text-sm shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-red-600",children:[_?"Submitting Request...":"Submit Service Request",(0,a.jsx)(d.ArrowRight,{size:20})]})]})]})}e.s(["default",()=>b])}]);