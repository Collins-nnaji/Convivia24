(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,r)=>{t.exports=e.r(76562)},81291,e=>{"use strict";var t=e.i(43476),r=e.i(71645),o=e.i(18566);let n=(0,r.createContext)(null);function u(e){let{children:u}=e,[s,a]=(0,r.useState)(null),[i,l]=(0,r.useState)(!0),[c,h]=(0,r.useState)(!1),d=(0,o.useRouter)();(0,r.useEffect)(()=>{h(!0),g()},[]);let g=async()=>{try{let e=localStorage.getItem("token");if(!e)return void l(!1);let t=await fetch("/api/auth/me",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();a(e.user)}else localStorage.removeItem("token")}catch(e){console.error("Auth check error:",e),localStorage.removeItem("token")}finally{l(!1)}},f=async(e,t)=>{try{let r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),o=await r.json();if(r.ok&&o.token)return localStorage.setItem("token",o.token),a(o.user),{success:!0,user:o.user};return{success:!1,error:o.error||"Login failed"}}catch(e){return console.error("Login error:",e),{success:!1,error:"Network error"}}};return(0,t.jsx)(n.Provider,{value:{user:s,loading:i,login:f,logout:()=>{localStorage.removeItem("token"),a(null),c&&d.push("/auth/login")},checkAuth:g,getToken:()=>localStorage.getItem("token")},children:u})}function s(){let e=(0,r.useContext)(n);if(!e)throw Error("useAuth must be used within AuthProvider");return e}e.s(["AuthProvider",()=>u,"useAuth",()=>s])},38511,e=>{"use strict";var t=e.i(43476);e.i(71645);var r=e.i(81291);function o(e){let{children:o}=e;return(0,t.jsx)(r.AuthProvider,{children:o})}e.s(["ClientProviders",()=>o])}]);