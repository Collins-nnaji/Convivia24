(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,44876,e=>{"use strict";var t=e.i(43476);e.i(71645);let r={pending:{bg:"bg-orange-100",text:"text-orange-700",border:"border-orange-300",label:"Pending"},scheduled:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-300",label:"Scheduled"},in_progress:{bg:"bg-red-100",text:"text-red-700",border:"border-red-300",label:"In Progress"},completed:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300",label:"Completed"},cancelled:{bg:"bg-red-100",text:"text-red-700",border:"border-red-300",label:"Cancelled"},assigned:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-300",label:"Assigned"},accepted:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300",label:"Accepted"},started:{bg:"bg-red-100",text:"text-red-700",border:"border-red-300",label:"Started"},draft:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-300",label:"Draft"},sent:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-300",label:"Sent"},paid:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300",label:"Paid"},overdue:{bg:"bg-red-100",text:"text-red-700",border:"border-red-300",label:"Overdue"},compliant:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300",label:"Compliant"},non_compliant:{bg:"bg-orange-100",text:"text-orange-700",border:"border-orange-300",label:"Non-Compliant"},verified:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300",label:"Verified"}};function a(e){let{status:a,size:s="default"}=e,l=r[null==a?void 0:a.toLowerCase()]||r.pending,d={small:"px-2 py-1 text-[10px]",default:"px-3 py-1.5 text-xs",large:"px-4 py-2 text-sm"};return(0,t.jsx)("span",{className:"inline-flex items-center justify-center rounded-full border font-black uppercase tracking-wider ".concat(l.bg," ").concat(l.text," ").concat(l.border," ").concat(d[s]||d.default),children:l.label||(null==a?void 0:a.replace("_"," "))||"Unknown"})}e.s(["default",()=>a])},71689,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},85747,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(18566),s=e.i(81291),l=e.i(44876),d=e.i(71689);function n(){var e;let n=(0,a.useRouter)(),o=(0,a.useParams)(),{getToken:i}=(0,s.useAuth)(),[c,b]=(0,r.useState)(null),[g,x]=(0,r.useState)([]),[p,h]=(0,r.useState)(""),[u,m]=(0,r.useState)(!0);(0,r.useEffect)(()=>{o.id&&(f(),y())},[o.id]);let f=async()=>{try{let e=i(),t={};e&&(t.Authorization="Bearer ".concat(e));let r=await fetch("/api/bookings/".concat(o.id),{headers:t});if(r.ok){let e=await r.json();b(e.booking)}}catch(e){console.error("Fetch job error:",e)}finally{m(!1)}},y=async()=>{x([])},j=async()=>{if(p)try{let e=i(),t={"Content-Type":"application/json"};e&&(t.Authorization="Bearer ".concat(e)),(await fetch("/api/bookings/".concat(o.id,"/assign"),{method:"POST",headers:t,body:JSON.stringify({staff_id:p})})).ok&&(f(),h(""))}catch(e){console.error("Assign staff error:",e)}},k=async e=>{try{let t=i(),r={"Content-Type":"application/json"};t&&(r.Authorization="Bearer ".concat(t)),(await fetch("/api/bookings/".concat(o.id),{method:"PATCH",headers:r,body:JSON.stringify({status:e})})).ok&&f()}catch(e){console.error("Update status error:",e)}};return u?(0,t.jsx)("div",{className:"text-center py-12 text-gray-600",children:"Loading..."}):c?(0,t.jsxs)("div",{className:"max-w-5xl mx-auto space-y-8",children:[(0,t.jsxs)("button",{onClick:()=>n.back(),className:"flex items-center gap-2 text-gray-600 hover:text-red-600 transition-colors font-bold",children:[(0,t.jsx)(d.ArrowLeft,{size:20}),"Back"]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h1",{className:"text-4xl font-black uppercase tracking-tighter italic text-black",children:"Job Management"}),(0,t.jsx)(l.default,{status:c.status,size:"large"})]}),(0,t.jsxs)("div",{className:"flex gap-4 flex-wrap",children:[(0,t.jsx)("button",{onClick:()=>k("scheduled"),disabled:"pending"!==c.status,className:"px-4 py-2 rounded-xl bg-gray-100 border border-gray-300 text-gray-700 font-bold uppercase tracking-wider text-xs hover:bg-gray-200 hover:border-red-300 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-gray-100",children:"Mark Scheduled"}),(0,t.jsx)("button",{onClick:()=>k("in_progress"),disabled:"scheduled"!==c.status,className:"px-4 py-2 rounded-xl bg-red-100 border border-red-300 text-red-700 font-bold uppercase tracking-wider text-xs hover:bg-red-200 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-red-100",children:"Start Job"}),(0,t.jsx)("button",{onClick:()=>k("completed"),disabled:"in_progress"!==c.status,className:"px-4 py-2 rounded-xl bg-green-100 border border-green-300 text-green-700 font-bold uppercase tracking-wider text-xs hover:bg-green-200 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-green-100",children:"Complete Job"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"p-6 rounded-2xl bg-white border border-gray-200 space-y-4 shadow-sm",children:[(0,t.jsx)("h2",{className:"text-xl font-black uppercase tracking-tight text-black",children:"Service"}),(0,t.jsx)("p",{className:"text-lg font-bold text-black",children:c.service_name}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:c.business_name})]}),(0,t.jsxs)("div",{className:"p-6 rounded-2xl bg-white border border-gray-200 space-y-4 shadow-sm",children:[(0,t.jsx)("h2",{className:"text-xl font-black uppercase tracking-tight text-black",children:"Cost"}),(0,t.jsxs)("p",{className:"text-3xl font-black text-red-600",children:["â‚¦",null==(e=c.total_cost)?void 0:e.toLocaleString()]})]}),(0,t.jsxs)("div",{className:"p-6 rounded-2xl bg-white border border-gray-200 space-y-4 shadow-sm",children:[(0,t.jsx)("h2",{className:"text-xl font-black uppercase tracking-tight text-black",children:"Schedule"}),(0,t.jsxs)("p",{className:"text-sm text-gray-700",children:["Start: ",c.scheduled_start?new Date(c.scheduled_start).toLocaleString():"Not set"]}),(0,t.jsxs)("p",{className:"text-sm text-gray-700",children:["End: ",c.scheduled_end?new Date(c.scheduled_end).toLocaleString():"Not set"]})]}),(0,t.jsxs)("div",{className:"p-6 rounded-2xl bg-white border border-gray-200 space-y-4 shadow-sm",children:[(0,t.jsx)("h2",{className:"text-xl font-black uppercase tracking-tight text-black",children:"Location"}),(0,t.jsx)("p",{className:"text-sm text-gray-700",children:c.location_address})]})]}),(0,t.jsxs)("div",{className:"p-6 rounded-2xl bg-white border border-gray-200 space-y-4 shadow-sm",children:[(0,t.jsx)("h2",{className:"text-xl font-black uppercase tracking-tight text-black",children:"Assign Staff"}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("select",{value:p,onChange:e=>h(e.target.value),className:"flex-1 px-4 py-3 rounded-xl bg-white border border-gray-200 text-black focus:outline-none focus:border-red-500 focus:ring-2 focus:ring-red-200 transition-all",children:[(0,t.jsx)("option",{value:"",children:"Select staff member..."}),g.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name," - ",e.email]},e.id))]}),(0,t.jsx)("button",{onClick:j,disabled:!p,className:"px-6 py-3 bg-red-600 text-white font-black rounded-xl hover:bg-red-700 transition-all uppercase tracking-wider text-sm disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-red-600",children:"Assign"})]}),c.assignments&&c.assignments.length>0&&(0,t.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,t.jsx)("h3",{className:"text-sm font-bold uppercase tracking-wider text-gray-600",children:"Assigned Staff"}),c.assignments.map((e,r)=>(0,t.jsxs)("div",{className:"p-3 rounded-xl bg-gray-50 border border-gray-200 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-bold text-black",children:[e.staff_first_name," ",e.staff_last_name]}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:e.staff_email})]}),(0,t.jsx)(l.default,{status:e.status,size:"small"})]},r))]})]}),c.special_instructions&&(0,t.jsxs)("div",{className:"p-6 rounded-2xl bg-white border border-gray-200 shadow-sm",children:[(0,t.jsx)("h2",{className:"text-xl font-black uppercase tracking-tight mb-4 text-black",children:"Special Instructions"}),(0,t.jsx)("p",{className:"text-gray-700",children:c.special_instructions})]})]}):(0,t.jsx)("div",{className:"text-center py-12 text-gray-600",children:"Job not found"})}e.s(["default",()=>n])}]);