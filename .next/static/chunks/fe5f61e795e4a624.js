(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,43447,99749,92808,e=>{"use strict";function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(r){t(e,r,n[r])})}return e}function n(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}e.s(["_",()=>t],99749),e.s(["_",()=>r],43447),e.s(["_",()=>n],92808)},75254,33027,e=>{"use strict";var t=e.i(43447);function r(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}e.s(["_",()=>r],33027);var n=e.i(71645);let a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var s=e.i(92808),i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,n.forwardRef)((e,o)=>{var{color:l="currentColor",size:c=24,strokeWidth:d=2,absoluteStrokeWidth:u,className:p="",children:x,iconNode:f}=e,h=r(e,["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"]);return(0,n.createElement)("svg",(0,t._)((0,s._)((0,t._)({ref:o},i),{width:c,height:c,stroke:l,strokeWidth:u?24*Number(d)/Number(c):d,className:a("lucide",p)}),h),[...f.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(x)?x:[x]])}),l=(e,s)=>{let i=(0,n.forwardRef)((i,l)=>{var{className:c}=i,d=r(i,["className"]);return(0,n.createElement)(o,(0,t._)({ref:l,iconNode:s,className:a("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),c)},d))});return i.displayName="".concat(e),i};e.s(["default",()=>l],75254)},14764,e=>{"use strict";let t=(0,e.i(75254).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],14764)},89877,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(14764);function a(e){let{clientId:a,initialMessages:s}=e,[i,o]=(0,r.useState)(s),[l,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(!1),p=(0,r.useRef)(null);async function x(e){if(e.preventDefault(),!l.trim())return;u(!0);let t=await fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({body:l,clientId:a})});if(t.ok){let e=await t.json();o(t=>[...t,e]),c("")}u(!1)}return(0,r.useEffect)(()=>{var e;null==(e=p.current)||e.scrollIntoView({behavior:"smooth"})},[i]),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("div",{className:"overflow-auto max-h-56 p-4 space-y-2",children:[0===i.length&&(0,t.jsx)("p",{className:"text-zinc-600 text-sm text-center py-4",children:"No messages"}),i.map(e=>(0,t.jsx)("div",{className:"flex ".concat("admin"===e.sender_role?"justify-end":"justify-start"),children:(0,t.jsxs)("div",{className:"max-w-[80%] px-3 py-2 text-sm ".concat("admin"===e.sender_role?"bg-red-700 text-white":"bg-zinc-800 text-zinc-200"),children:["client"===e.sender_role&&(0,t.jsx)("p",{className:"text-[10px] font-black uppercase tracking-[0.1em] text-zinc-500 mb-0.5",children:e.sender_name||"Client"}),e.body]})},e.id)),(0,t.jsx)("div",{ref:p})]}),(0,t.jsxs)("form",{onSubmit:x,className:"flex gap-2 p-4 border-t border-zinc-800",children:[(0,t.jsx)("input",{value:l,onChange:e=>c(e.target.value),placeholder:"Reply to client…",className:"flex-1 bg-zinc-800 border border-zinc-700 text-white text-sm px-3 py-2 placeholder-zinc-600 focus:outline-none focus:border-red-700 transition-colors"}),(0,t.jsx)("button",{type:"submit",disabled:d||!l.trim(),className:"bg-red-700 hover:bg-red-800 text-white px-4 py-2 transition-colors disabled:opacity-50",children:(0,t.jsx)(n.Send,{size:14})})]})]})}e.s(["default",()=>a])},95128,e=>{"use strict";var t=e.i(43447),r=e.i(92808),n=e.i(43476),a=e.i(71645);let s=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),i=["lead","qualified","proposal","negotiation","closed_won","closed_lost"];function o(e){let{clientId:o,deals:l}=e,[c,d]=(0,a.useState)(l),[u,p]=(0,a.useState)(!1),[x,f]=(0,a.useState)({title:"",stage:"lead",value:"",currency:"GBP",notes:""}),[h,m]=(0,a.useState)(!1);async function b(e){if(e.preventDefault(),!x.title.trim())return;m(!0);let n=await fetch("/api/admin/deals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,r._)((0,t._)({},x),{clientId:o}))});if(n.ok){let e=await n.json();d(t=>[e,...t]),f({title:"",stage:"lead",value:"",currency:"GBP",notes:""}),p(!1)}m(!1)}async function y(e,n){await fetch("/api/admin/deals/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({stage:n})}),d(a=>a.map(a=>a.id===e?(0,r._)((0,t._)({},a),{stage:n}):a))}return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"divide-y divide-zinc-800 max-h-56 overflow-auto",children:[0===c.length&&!u&&(0,n.jsx)("p",{className:"text-zinc-600 text-sm text-center py-6",children:"No deals yet"}),c.map(e=>(0,n.jsxs)("div",{className:"flex items-center justify-between px-6 py-3 gap-3",children:[(0,n.jsxs)("div",{className:"min-w-0",children:[(0,n.jsx)("p",{className:"text-sm text-zinc-200 truncate",children:e.title}),e.value&&(0,n.jsxs)("p",{className:"text-[11px] text-zinc-500",children:[e.currency," ",parseFloat(e.value).toLocaleString()]})]}),(0,n.jsx)("select",{value:e.stage,onChange:t=>y(e.id,t.target.value),className:"bg-zinc-800 border border-zinc-700 text-white text-[11px] font-black uppercase px-2 py-1 focus:outline-none focus:border-red-700 shrink-0",children:i.map(e=>(0,n.jsx)("option",{value:e,children:e.replace("_"," ")},e))})]},e.id))]}),u?(0,n.jsxs)("form",{onSubmit:b,className:"p-4 border-t border-zinc-800 space-y-2",children:[(0,n.jsx)("input",{placeholder:"Deal title*",value:x.title,onChange:e=>f((0,r._)((0,t._)({},x),{title:e.target.value})),className:"w-full bg-zinc-800 border border-zinc-700 text-white text-sm px-3 py-2 placeholder-zinc-600 focus:outline-none focus:border-red-700"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("select",{value:x.stage,onChange:e=>f((0,r._)((0,t._)({},x),{stage:e.target.value})),className:"flex-1 bg-zinc-800 border border-zinc-700 text-white text-sm px-3 py-2 focus:outline-none focus:border-red-700",children:i.map(e=>(0,n.jsx)("option",{value:e,children:e.replace("_"," ")},e))}),(0,n.jsx)("input",{placeholder:"Value",value:x.value,onChange:e=>f((0,r._)((0,t._)({},x),{value:e.target.value})),className:"w-24 bg-zinc-800 border border-zinc-700 text-white text-sm px-3 py-2 placeholder-zinc-600 focus:outline-none focus:border-red-700"}),(0,n.jsx)("select",{value:x.currency,onChange:e=>f((0,r._)((0,t._)({},x),{currency:e.target.value})),className:"bg-zinc-800 border border-zinc-700 text-white text-sm px-2 py-2 focus:outline-none focus:border-red-700",children:["GBP","USD","EUR","NGN"].map(e=>(0,n.jsx)("option",{children:e},e))})]}),(0,n.jsx)("textarea",{placeholder:"Notes (optional)",value:x.notes,onChange:e=>f((0,r._)((0,t._)({},x),{notes:e.target.value})),rows:2,className:"w-full bg-zinc-800 border border-zinc-700 text-white text-sm px-3 py-2 placeholder-zinc-600 focus:outline-none focus:border-red-700 resize-none"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("button",{type:"submit",disabled:h,className:"flex-1 bg-red-700 hover:bg-red-800 text-white text-sm font-black uppercase tracking-[0.1em] py-2 transition-colors disabled:opacity-50",children:h?"Saving…":"Add Deal"}),(0,n.jsx)("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 text-zinc-500 hover:text-white text-sm transition-colors",children:"Cancel"})]})]}):(0,n.jsx)("div",{className:"p-4 border-t border-zinc-800",children:(0,n.jsxs)("button",{onClick:()=>p(!0),className:"flex items-center gap-1.5 text-[11px] text-red-500 hover:text-red-400 font-black uppercase tracking-[0.1em] transition-colors",children:[(0,n.jsx)(s,{size:12})," Add Deal"]})})]})}e.s(["default",()=>o],95128)}]);