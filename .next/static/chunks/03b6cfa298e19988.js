(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19851,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566);function i(e){let{listingId:i,currentStatus:a,agreedPrice:n,agreedCommissionPct:l,currency:o}=e,c=(0,r.useRouter)(),[d,u]=(0,s.useState)(!1),[p,m]=(0,s.useState)(""),[b,x]=(0,s.useState)(null!=n&&""!==n?String(n):""),[h,g]=(0,s.useState)(null!=l&&""!==l?String(l):"");async function f(e){e.preventDefault(),m(""),u(!0);try{let e={status:"price_agreed"};b&&(e.agreed_price=Number(b)),h&&(e.agreed_commission_pct=Number(h));let s=await fetch("/api/listings/".concat(i),{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!s.ok){var t;let e=await s.json().catch(()=>({}));m(null!=(t=null==e?void 0:e.error)?t:"Failed to update"),u(!1);return}c.refresh()}catch(e){m("Network error")}u(!1)}async function v(){m(""),u(!0);try{let t=await fetch("/api/listings/".concat(i),{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({status:"listed"})});if(!t.ok){var e;let s=await t.json().catch(()=>({}));m(null!=(e=null==s?void 0:s.error)?e:"Failed to update"),u(!1);return}c.refresh()}catch(e){m("Network error")}u(!1)}return(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-sm font-black uppercase tracking-[0.15em] text-zinc-400 mb-3",children:"Set agreed terms"}),p&&(0,t.jsx)("p",{className:"text-red-400 text-sm mb-3",children:p}),(0,t.jsxs)("form",{onSubmit:f,className:"flex flex-wrap items-end gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"agreed_price",className:"block text-[11px] text-zinc-500 uppercase font-bold mb-1",children:["Agreed price (",o,")"]}),(0,t.jsx)("input",{id:"agreed_price",type:"number",min:"0",step:"0.01",value:b,onChange:e=>x(e.target.value),className:"bg-zinc-800 border border-zinc-700 text-white text-sm px-3 py-2 rounded w-32 focus:outline-none focus:ring-1 focus:ring-red-600"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"commission_pct",className:"block text-[11px] text-zinc-500 uppercase font-bold mb-1",children:"Commission %"}),(0,t.jsx)("input",{id:"commission_pct",type:"number",min:"0",max:"100",step:"0.5",value:h,onChange:e=>g(e.target.value),className:"bg-zinc-800 border border-zinc-700 text-white text-sm px-3 py-2 rounded w-24 focus:outline-none focus:ring-1 focus:ring-red-600"})]}),(0,t.jsx)("button",{type:"submit",disabled:d,className:"bg-red-700 hover:bg-red-600 text-white text-sm font-bold uppercase px-4 py-2 rounded transition-colors disabled:opacity-60",children:d?"Saving…":"Mark as agreed"}),("price_agreed"===a||"listed"===a)&&(0,t.jsx)("button",{type:"button",onClick:v,disabled:d||"listed"===a,className:"border border-zinc-600 text-zinc-300 text-sm font-semibold px-4 py-2 rounded hover:bg-zinc-800 transition-colors disabled:opacity-50",children:"listed"===a?"Listed":"Mark as listed"})]})]})}e.s(["ListingAgreeForm",()=>i])},94959,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566);function i(e){let{listingId:i,currency:a}=e,n=(0,r.useRouter)(),[l,o]=(0,s.useState)(!1),[c,d]=(0,s.useState)(""),[u,p]=(0,s.useState)("");async function m(e){e.preventDefault(),d("");let t=u?Number(u):void 0;if(null!=t&&(isNaN(t)||t<0))return void d("Enter a valid sale value.");o(!0);try{let e=await fetch("/api/listings/".concat(i),{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({status:"sold",sale_value:null!=t?t:null})});if(!e.ok){var s;let t=await e.json().catch(()=>({}));d(null!=(s=null==t?void 0:t.error)?s:"Failed to update"),o(!1);return}n.refresh()}catch(e){d("Network error")}o(!1)}return(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-sm font-black uppercase tracking-[0.15em] text-zinc-400 mb-3",children:"Mark as sold"}),c&&(0,t.jsx)("p",{className:"text-red-400 text-sm mb-3",children:c}),(0,t.jsxs)("form",{onSubmit:m,className:"flex flex-wrap items-end gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"sale_value",className:"block text-[11px] text-zinc-500 uppercase font-bold mb-1",children:["Sale value (",a,")"]}),(0,t.jsx)("input",{id:"sale_value",type:"number",min:"0",step:"0.01",value:u,onChange:e=>p(e.target.value),placeholder:"Final sale amount",className:"bg-zinc-800 border border-zinc-700 text-white text-sm px-3 py-2 rounded w-40 focus:outline-none focus:ring-1 focus:ring-red-600"})]}),(0,t.jsx)("button",{type:"submit",disabled:l,className:"bg-green-700 hover:bg-green-600 text-white text-sm font-bold uppercase px-4 py-2 rounded transition-colors disabled:opacity-60",children:l?"Saving…":"Mark sold"})]})]})}e.s(["ListingMarkSoldForm",()=>i])}]);