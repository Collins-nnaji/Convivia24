module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70864,a=>{a.n(a.i(33290))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},67971,a=>{a.n(a.i(26435))},92737,a=>{"use strict";let b=(0,a.i(1269).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);a.s(["ArrowRight",()=>b],92737)},86607,a=>{"use strict";var b=a.i(7997),c=a.i(53058),d=a.i(12259),e=a.i(95936),f=a.i(83627),g=a.i(85791),h=a.i(71348),i=a.i(82211),j=a.i(87953),k=a.i(92737);async function l(){await (0,c.requireAdmin)();let[a,l,m,n,o,p,q,r,s]=await Promise.all([d.default`SELECT COUNT(*) as count FROM clients WHERE status = 'active'`,d.default`SELECT COUNT(*) as count FROM pipeline_deals WHERE stage NOT IN ('closed_won','closed_lost')`,d.default`SELECT COUNT(*) as count FROM messages WHERE sender_role = 'client' AND read_at IS NULL`,d.default`SELECT COUNT(*) as count FROM audit_leads WHERE status = 'new'`,d.default`SELECT COUNT(*) as count FROM listings`,d.default`SELECT COUNT(*) as count FROM listings WHERE status IN ('submitted','price_agreed','listed')`,d.default`SELECT d.*, c.name as client_name FROM pipeline_deals d JOIN clients c ON c.id = d.client_id ORDER BY d.updated_at DESC LIMIT 6`,d.default`SELECT * FROM audit_leads WHERE status = 'new' ORDER BY created_at DESC LIMIT 5`,d.default`SELECT l.id, l.title, l.status, l.client_id, c.name as client_name FROM listings l JOIN clients c ON c.id = l.client_id WHERE l.status IN ('submitted','price_agreed','listed') ORDER BY l.updated_at DESC LIMIT 5`]),t=[{label:"Active Clients",value:Number(a[0]?.count??0),icon:f.Users,href:"/admin/clients"},{label:"Open Deals",value:Number(l[0]?.count??0),icon:g.GitBranch,href:"/admin/pipeline"},{label:"Listings",value:Number(o[0]?.count??0),icon:j.Package,href:"/admin/listings",sub:Number(p[0]?.count??0)>0?`${p[0]?.count} in progress`:void 0},{label:"Unread Messages",value:Number(m[0]?.count??0),icon:h.MessageSquare,href:"/admin/messages"},{label:"New Leads",value:Number(n[0]?.count??0),icon:i.ClipboardList,href:"/admin/leads"}],u={lead:"bg-zinc-700",qualified:"bg-blue-700",proposal:"bg-yellow-600",negotiation:"bg-orange-600",closed_won:"bg-green-700",closed_lost:"bg-zinc-600"};return(0,b.jsxs)("div",{className:"p-8 max-w-6xl",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("span",{className:"inline-block bg-red-700 text-white text-[9px] font-black uppercase tracking-[0.2em] px-2 py-1 mb-3",children:"Command Center"}),(0,b.jsx)("h1",{className:"text-3xl font-black tracking-tighter text-white uppercase italic",children:"Admin Overview"}),(0,b.jsx)("p",{className:"text-zinc-500 text-sm mt-1",children:"Everything across all client accounts"})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4 mb-8",children:t.map(({label:a,value:c,sub:d,icon:f,href:g})=>(0,b.jsxs)(e.default,{href:g,className:"group bg-zinc-900 border border-zinc-800 hover:border-red-700 p-5 transition-colors",children:[(0,b.jsx)(f,{size:16,className:"text-red-700 mb-3 group-hover:text-red-500"}),(0,b.jsx)("p",{className:"text-2xl font-black text-white tracking-tighter",children:c}),(0,b.jsx)("p",{className:"text-[11px] text-zinc-500 uppercase tracking-[0.15em] mt-1",children:a}),null!=d&&(0,b.jsx)("p",{className:"text-[10px] text-zinc-600 mt-0.5",children:d})]},a))}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"bg-zinc-900 border border-zinc-800",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-zinc-800",children:[(0,b.jsx)("h2",{className:"text-sm font-black uppercase tracking-[0.15em] text-white",children:"Recent Deals"}),(0,b.jsxs)(e.default,{href:"/admin/pipeline",className:"text-[11px] text-red-500 hover:text-red-400 flex items-center gap-1",children:["All ",(0,b.jsx)(k.ArrowRight,{size:11})]})]}),(0,b.jsx)("div",{className:"divide-y divide-zinc-800",children:q.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,b.jsx)("span",{className:`shrink-0 text-[9px] font-black uppercase text-white px-1.5 py-0.5 ${u[a.stage]||"bg-zinc-700"}`,children:a.stage.replace("_"," ")}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"text-sm text-zinc-200 truncate",children:a.title}),(0,b.jsx)("p",{className:"text-[11px] text-zinc-500 truncate",children:a.client_name})]})]}),a.value&&(0,b.jsxs)("span",{className:"text-sm font-semibold text-white shrink-0 ml-2",children:["GBP"===a.currency?"Â£":(a.currency||"")+" ",parseFloat(a.value).toLocaleString()]})]},a.id))})]}),(0,b.jsxs)("div",{className:"bg-zinc-900 border border-zinc-800",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-zinc-800",children:[(0,b.jsx)("h2",{className:"text-sm font-black uppercase tracking-[0.15em] text-white",children:"New Audit Leads"}),(0,b.jsxs)(e.default,{href:"/admin/leads",className:"text-[11px] text-red-500 hover:text-red-400 flex items-center gap-1",children:["All ",(0,b.jsx)(k.ArrowRight,{size:11})]})]}),(0,b.jsxs)("div",{className:"divide-y divide-zinc-800",children:[0===r.length&&(0,b.jsx)("p",{className:"text-zinc-600 text-sm text-center py-6",children:"No new leads"}),r.map(a=>(0,b.jsxs)("div",{className:"px-6 py-3",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-white",children:a.company||"Unknown Company"}),(0,b.jsx)("p",{className:"text-[11px] text-zinc-500",children:a.email}),(0,b.jsx)("p",{className:"text-[10px] text-zinc-600 mt-0.5",children:new Date(a.created_at).toLocaleDateString("en-GB")})]},a.id))]})]}),(0,b.jsxs)("div",{className:"bg-zinc-900 border border-zinc-800",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-zinc-800",children:[(0,b.jsx)("h2",{className:"text-sm font-black uppercase tracking-[0.15em] text-white",children:"Listings in progress"}),(0,b.jsxs)(e.default,{href:"/admin/listings",className:"text-[11px] text-red-500 hover:text-red-400 flex items-center gap-1",children:["All ",(0,b.jsx)(k.ArrowRight,{size:11})]})]}),(0,b.jsx)("div",{className:"divide-y divide-zinc-800",children:0===s.length?(0,b.jsx)("p",{className:"text-zinc-600 text-sm text-center py-6",children:"No listings in progress"}):s.map(a=>(0,b.jsxs)(e.default,{href:`/admin/listings/${a.id}`,className:"flex items-center justify-between px-6 py-3 hover:bg-zinc-800 transition-colors",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"text-sm text-zinc-200 truncate",children:a.title}),(0,b.jsx)("p",{className:"text-[11px] text-zinc-500 truncate",children:a.client_name})]}),(0,b.jsx)("span",{className:"text-[10px] font-black uppercase px-2 py-0.5 rounded bg-zinc-700 text-zinc-300 shrink-0 ml-2",children:a.status.replace("_"," ")})]},a.id))})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 mt-8",children:[{href:"/admin/clients",label:"Clients"},{href:"/admin/clients/new",label:"New client"},{href:"/admin/listings",label:"Listings"},{href:"/admin/pipeline",label:"Pipeline"},{href:"/admin/messages",label:"Messages"},{href:"/admin/leads",label:"Leads"}].map(({href:a,label:c})=>(0,b.jsxs)(e.default,{href:a,className:"flex items-center justify-between bg-zinc-900 border border-zinc-800 hover:border-red-700 px-4 py-3 transition-colors rounded",children:[(0,b.jsx)("span",{className:"text-sm font-semibold text-zinc-200",children:c}),(0,b.jsx)(k.ArrowRight,{size:12,className:"text-zinc-600"})]},a))})]})}a.s(["default",()=>l])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__6b532dff._.js.map