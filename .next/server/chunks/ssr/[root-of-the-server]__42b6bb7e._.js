module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70864,a=>{a.n(a.i(33290))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},22882,a=>{a.n(a.i(46927))},51664,a=>{"use strict";var b=a.i(7997),c=a.i(53058),d=a.i(12259);let e=[{key:"lead",label:"Lead",color:"border-zinc-600"},{key:"qualified",label:"Qualified",color:"border-blue-600"},{key:"proposal",label:"Proposal",color:"border-yellow-500"},{key:"negotiation",label:"Negotiation",color:"border-orange-500"},{key:"closed_won",label:"Won",color:"border-green-600"},{key:"closed_lost",label:"Lost",color:"border-zinc-700"}],f={lead:"bg-zinc-500",qualified:"bg-blue-500",proposal:"bg-yellow-500",negotiation:"bg-orange-500",closed_won:"bg-green-500",closed_lost:"bg-zinc-600"};async function g(){let a=await (0,c.requireAuth)(),g=await (0,c.getAppUser)({id:a.id,email:a.email,name:a.name,image:a.image}),h=(await d.default`
    SELECT c.* FROM clients c
    JOIN client_users cu ON cu.client_id = c.id
    WHERE cu.user_id = ${g.id}
    LIMIT 1
  `)[0]??null,i=h?await d.default`SELECT * FROM pipeline_deals WHERE client_id = ${h.id} ORDER BY created_at DESC`:[],j=e.reduce((a,b)=>(a[b.key]=i.filter(a=>a.stage===b.key),a),{});return(0,b.jsxs)("div",{className:"p-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("span",{className:"inline-block bg-red-600 text-white text-[9px] font-black uppercase tracking-[0.2em] px-2 py-1 mb-3",children:"Pipeline"}),(0,b.jsx)("h1",{className:"text-3xl font-black tracking-tighter text-zinc-900 uppercase italic",children:"Your Deals"}),(0,b.jsxs)("p",{className:"text-zinc-600 text-sm mt-1",children:[i.length," deal",1!==i.length?"s":""," across ",e.length," stages"]})]}),h?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:e.map(({key:a,label:c,color:d})=>(0,b.jsxs)("div",{className:`bg-white border-t-4 ${d} border-x border-b border-zinc-200 rounded-lg shadow-sm`,children:[(0,b.jsxs)("div",{className:"px-4 py-3 border-b border-zinc-100 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:`w-2 h-2 rounded-full ${f[a]}`}),(0,b.jsx)("span",{className:"text-xs font-black uppercase tracking-[0.15em] text-zinc-600",children:c})]}),(0,b.jsx)("span",{className:"text-xs text-zinc-500",children:j[a].length})]}),(0,b.jsxs)("div",{className:"p-3 space-y-2 min-h-[120px]",children:[0===j[a].length&&(0,b.jsx)("p",{className:"text-[11px] text-zinc-500 text-center pt-4",children:"No deals"}),j[a].map(a=>(0,b.jsxs)("div",{className:"bg-zinc-50 border border-zinc-200 rounded px-3 py-2.5",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-zinc-900 leading-tight",children:a.title}),a.value&&(0,b.jsxs)("p",{className:"text-xs text-zinc-500 mt-1",children:[a.currency," ",parseFloat(a.value).toLocaleString()]}),a.notes&&(0,b.jsx)("p",{className:"text-[11px] text-zinc-600 mt-1 line-clamp-2",children:a.notes}),a.due_date&&(0,b.jsxs)("p",{className:"text-[10px] text-zinc-600 mt-1",children:["Due ",new Date(a.due_date).toLocaleDateString("en-GB",{day:"numeric",month:"short"})]})]},a.id))]})]},a))}):(0,b.jsx)("div",{className:"bg-white border border-zinc-200 rounded-lg p-6 shadow-sm",children:(0,b.jsx)("p",{className:"text-zinc-600 text-sm",children:"No pipeline linked yet. Contact your account manager."})})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__42b6bb7e._.js.map