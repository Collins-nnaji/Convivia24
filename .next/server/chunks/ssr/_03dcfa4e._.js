module.exports=[70106,a=>{"use strict";var b=a.i(72131);let c=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let e=(0,b.forwardRef)(({color:a="currentColor",size:e=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...d,width:e,height:e,stroke:a,strokeWidth:g?24*Number(f)/Number(e):f,className:c("lucide",h),...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),f=(a,d)=>{let f=(0,b.forwardRef)(({className:f,...g},h)=>(0,b.createElement)(e,{ref:h,iconNode:d,className:c(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,f),...g}));return f.displayName=`${a}`,f};a.s(["default",()=>f],70106)},92759,a=>{"use strict";let b=(0,a.i(70106).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);a.s(["Send",()=>b],92759)},82089,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(92759);function e({clientId:a,initialMessages:e}){let[f,g]=(0,c.useState)(e),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(!1),l=(0,c.useRef)(null);async function m(b){if(b.preventDefault(),!h.trim())return;k(!0);let c=await fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({body:h,clientId:a})});if(c.ok){let a=await c.json();g(b=>[...b,a]),i("")}k(!1)}return(0,c.useEffect)(()=>{l.current?.scrollIntoView({behavior:"smooth"})},[f]),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsxs)("div",{className:"overflow-auto max-h-56 p-4 space-y-2",children:[0===f.length&&(0,b.jsx)("p",{className:"text-zinc-600 text-sm text-center py-4",children:"No messages"}),f.map(a=>(0,b.jsx)("div",{className:`flex ${"admin"===a.sender_role?"justify-end":"justify-start"}`,children:(0,b.jsxs)("div",{className:`max-w-[80%] px-3 py-2 text-sm ${"admin"===a.sender_role?"bg-red-700 text-white":"bg-zinc-800 text-zinc-200"}`,children:["client"===a.sender_role&&(0,b.jsx)("p",{className:"text-[10px] font-black uppercase tracking-[0.1em] text-zinc-500 mb-0.5",children:a.sender_name||"Client"}),a.body]})},a.id)),(0,b.jsx)("div",{ref:l})]}),(0,b.jsxs)("form",{onSubmit:m,className:"flex gap-2 p-4 border-t border-zinc-800",children:[(0,b.jsx)("input",{value:h,onChange:a=>i(a.target.value),placeholder:"Reply to client…",className:"flex-1 bg-zinc-800 border border-zinc-700 text-white text-sm px-3 py-2 placeholder-zinc-600 focus:outline-none focus:border-red-700 transition-colors"}),(0,b.jsx)("button",{type:"submit",disabled:j||!h.trim(),className:"bg-red-700 hover:bg-red-800 text-white px-4 py-2 transition-colors disabled:opacity-50",children:(0,b.jsx)(d.Send,{size:14})})]})]})}a.s(["default",()=>e])},87386,a=>{"use strict";var b=a.i(87924),c=a.i(72131);let d=(0,a.i(70106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),e=["lead","qualified","proposal","negotiation","closed_won","closed_lost"];function f({clientId:a,deals:f}){let[g,h]=(0,c.useState)(f),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)({title:"",stage:"lead",value:"",currency:"GBP",notes:""}),[m,n]=(0,c.useState)(!1);async function o(b){if(b.preventDefault(),!k.title.trim())return;n(!0);let c=await fetch("/api/admin/deals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...k,clientId:a})});if(c.ok){let a=await c.json();h(b=>[a,...b]),l({title:"",stage:"lead",value:"",currency:"GBP",notes:""}),j(!1)}n(!1)}async function p(a,b){await fetch(`/api/admin/deals/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({stage:b})}),h(c=>c.map(c=>c.id===a?{...c,stage:b}:c))}return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"divide-y divide-zinc-800 max-h-56 overflow-auto",children:[0===g.length&&!i&&(0,b.jsx)("p",{className:"text-zinc-600 text-sm text-center py-6",children:"No deals yet"}),g.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-3 gap-3",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"text-sm text-zinc-200 truncate",children:a.title}),a.value&&(0,b.jsxs)("p",{className:"text-[11px] text-zinc-500",children:[a.currency," ",parseFloat(a.value).toLocaleString()]})]}),(0,b.jsx)("select",{value:a.stage,onChange:b=>p(a.id,b.target.value),className:"bg-zinc-800 border border-zinc-700 text-white text-[11px] font-black uppercase px-2 py-1 focus:outline-none focus:border-red-700 shrink-0",children:e.map(a=>(0,b.jsx)("option",{value:a,children:a.replace("_"," ")},a))})]},a.id))]}),i?(0,b.jsxs)("form",{onSubmit:o,className:"p-4 border-t border-zinc-800 space-y-2",children:[(0,b.jsx)("input",{placeholder:"Deal title*",value:k.title,onChange:a=>l({...k,title:a.target.value}),className:"w-full bg-zinc-800 border border-zinc-700 text-white text-sm px-3 py-2 placeholder-zinc-600 focus:outline-none focus:border-red-700"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("select",{value:k.stage,onChange:a=>l({...k,stage:a.target.value}),className:"flex-1 bg-zinc-800 border border-zinc-700 text-white text-sm px-3 py-2 focus:outline-none focus:border-red-700",children:e.map(a=>(0,b.jsx)("option",{value:a,children:a.replace("_"," ")},a))}),(0,b.jsx)("input",{placeholder:"Value",value:k.value,onChange:a=>l({...k,value:a.target.value}),className:"w-24 bg-zinc-800 border border-zinc-700 text-white text-sm px-3 py-2 placeholder-zinc-600 focus:outline-none focus:border-red-700"}),(0,b.jsx)("select",{value:k.currency,onChange:a=>l({...k,currency:a.target.value}),className:"bg-zinc-800 border border-zinc-700 text-white text-sm px-2 py-2 focus:outline-none focus:border-red-700",children:["GBP","USD","EUR","NGN"].map(a=>(0,b.jsx)("option",{children:a},a))})]}),(0,b.jsx)("textarea",{placeholder:"Notes (optional)",value:k.notes,onChange:a=>l({...k,notes:a.target.value}),rows:2,className:"w-full bg-zinc-800 border border-zinc-700 text-white text-sm px-3 py-2 placeholder-zinc-600 focus:outline-none focus:border-red-700 resize-none"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{type:"submit",disabled:m,className:"flex-1 bg-red-700 hover:bg-red-800 text-white text-sm font-black uppercase tracking-[0.1em] py-2 transition-colors disabled:opacity-50",children:m?"Saving…":"Add Deal"}),(0,b.jsx)("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-2 text-zinc-500 hover:text-white text-sm transition-colors",children:"Cancel"})]})]}):(0,b.jsx)("div",{className:"p-4 border-t border-zinc-800",children:(0,b.jsxs)("button",{onClick:()=>j(!0),className:"flex items-center gap-1.5 text-[11px] text-red-500 hover:text-red-400 font-black uppercase tracking-[0.1em] transition-colors",children:[(0,b.jsx)(d,{size:12})," Add Deal"]})})]})}a.s(["default",()=>f],87386)}];

//# sourceMappingURL=_03dcfa4e._.js.map