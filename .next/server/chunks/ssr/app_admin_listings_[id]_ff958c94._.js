module.exports=[41425,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);function e({listingId:a,currentStatus:e,agreedPrice:f,agreedCommissionPct:g,currency:h}){let i=(0,d.useRouter)(),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(null!=f&&""!==f?String(f):""),[p,q]=(0,c.useState)(null!=g&&""!==g?String(g):"");async function r(b){b.preventDefault(),m(""),k(!0);try{let b={status:"price_agreed"};n&&(b.agreed_price=Number(n)),p&&(b.agreed_commission_pct=Number(p));let c=await fetch(`/api/listings/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(b)});if(!c.ok){let a=await c.json().catch(()=>({}));m(a?.error??"Failed to update"),k(!1);return}i.refresh()}catch{m("Network error")}k(!1)}async function s(){m(""),k(!0);try{let b=await fetch(`/api/listings/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({status:"listed"})});if(!b.ok){let a=await b.json().catch(()=>({}));m(a?.error??"Failed to update"),k(!1);return}i.refresh()}catch{m("Network error")}k(!1)}return(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-sm font-black uppercase tracking-[0.15em] text-zinc-400 mb-3",children:"Set agreed terms"}),l&&(0,b.jsx)("p",{className:"text-red-400 text-sm mb-3",children:l}),(0,b.jsxs)("form",{onSubmit:r,className:"flex flex-wrap items-end gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{htmlFor:"agreed_price",className:"block text-[11px] text-zinc-500 uppercase font-bold mb-1",children:["Agreed price (",h,")"]}),(0,b.jsx)("input",{id:"agreed_price",type:"number",min:"0",step:"0.01",value:n,onChange:a=>o(a.target.value),className:"bg-zinc-800 border border-zinc-700 text-white text-sm px-3 py-2 rounded w-32 focus:outline-none focus:ring-1 focus:ring-red-600"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"commission_pct",className:"block text-[11px] text-zinc-500 uppercase font-bold mb-1",children:"Commission %"}),(0,b.jsx)("input",{id:"commission_pct",type:"number",min:"0",max:"100",step:"0.5",value:p,onChange:a=>q(a.target.value),className:"bg-zinc-800 border border-zinc-700 text-white text-sm px-3 py-2 rounded w-24 focus:outline-none focus:ring-1 focus:ring-red-600"})]}),(0,b.jsx)("button",{type:"submit",disabled:j,className:"bg-red-700 hover:bg-red-600 text-white text-sm font-bold uppercase px-4 py-2 rounded transition-colors disabled:opacity-60",children:j?"Saving…":"Mark as agreed"}),("price_agreed"===e||"listed"===e)&&(0,b.jsx)("button",{type:"button",onClick:s,disabled:j||"listed"===e,className:"border border-zinc-600 text-zinc-300 text-sm font-semibold px-4 py-2 rounded hover:bg-zinc-800 transition-colors disabled:opacity-50",children:"listed"===e?"Listed":"Mark as listed"})]})]})}a.s(["ListingAgreeForm",()=>e])},44290,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);function e({listingId:a,currency:e}){let f=(0,d.useRouter)(),[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)("");async function m(b){b.preventDefault(),j("");let c=k?Number(k):void 0;if(null!=c&&(isNaN(c)||c<0))return void j("Enter a valid sale value.");h(!0);try{let b=await fetch(`/api/listings/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({status:"sold",sale_value:c??null})});if(!b.ok){let a=await b.json().catch(()=>({}));j(a?.error??"Failed to update"),h(!1);return}f.refresh()}catch{j("Network error")}h(!1)}return(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-sm font-black uppercase tracking-[0.15em] text-zinc-400 mb-3",children:"Mark as sold"}),i&&(0,b.jsx)("p",{className:"text-red-400 text-sm mb-3",children:i}),(0,b.jsxs)("form",{onSubmit:m,className:"flex flex-wrap items-end gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{htmlFor:"sale_value",className:"block text-[11px] text-zinc-500 uppercase font-bold mb-1",children:["Sale value (",e,")"]}),(0,b.jsx)("input",{id:"sale_value",type:"number",min:"0",step:"0.01",value:k,onChange:a=>l(a.target.value),placeholder:"Final sale amount",className:"bg-zinc-800 border border-zinc-700 text-white text-sm px-3 py-2 rounded w-40 focus:outline-none focus:ring-1 focus:ring-red-600"})]}),(0,b.jsx)("button",{type:"submit",disabled:g,className:"bg-green-700 hover:bg-green-600 text-white text-sm font-bold uppercase px-4 py-2 rounded transition-colors disabled:opacity-60",children:g?"Saving…":"Mark sold"})]})]})}a.s(["ListingMarkSoldForm",()=>e])}];

//# sourceMappingURL=app_admin_listings_%5Bid%5D_ff958c94._.js.map