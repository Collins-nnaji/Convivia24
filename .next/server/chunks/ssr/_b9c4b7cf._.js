module.exports=[92e3,a=>{"use strict";let b=(0,a.i(70106).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],92e3)},85157,a=>{"use strict";var b=a.i(87924);a.i(72131);let c={pending:{bg:"bg-orange-100",text:"text-orange-700",border:"border-orange-300",label:"Pending"},scheduled:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-300",label:"Scheduled"},in_progress:{bg:"bg-red-100",text:"text-red-700",border:"border-red-300",label:"In Progress"},completed:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300",label:"Completed"},cancelled:{bg:"bg-red-100",text:"text-red-700",border:"border-red-300",label:"Cancelled"},assigned:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-300",label:"Assigned"},accepted:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300",label:"Accepted"},started:{bg:"bg-red-100",text:"text-red-700",border:"border-red-300",label:"Started"},draft:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-300",label:"Draft"},sent:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-300",label:"Sent"},paid:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300",label:"Paid"},overdue:{bg:"bg-red-100",text:"text-red-700",border:"border-red-300",label:"Overdue"},compliant:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300",label:"Compliant"},non_compliant:{bg:"bg-orange-100",text:"text-orange-700",border:"border-orange-300",label:"Non-Compliant"},verified:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300",label:"Verified"}};function d({status:a,size:d="default"}){let e=c[a?.toLowerCase()]||c.pending,f={small:"px-2 py-1 text-[10px]",default:"px-3 py-1.5 text-xs",large:"px-4 py-2 text-sm"};return(0,b.jsx)("span",{className:`inline-flex items-center justify-center rounded-full border font-black uppercase tracking-wider ${e.bg} ${e.text} ${e.border} ${f[d]||f.default}`,children:e.label||a?.replace("_"," ")||"Unknown"})}a.s(["default",()=>d])},87532,a=>{"use strict";let b=(0,a.i(70106).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);a.s(["Search",()=>b],87532)},84505,a=>{"use strict";let b=(0,a.i(70106).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);a.s(["Download",()=>b],84505)},32534,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(14953),f=a.i(85157),g=a.i(4416),h=a.i(87532),i=a.i(92e3),j=a.i(84505);function k(){let a=(0,d.useRouter)(),{getToken:k}=(0,e.useAuth)(),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)("all"),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(!0);(0,c.useEffect)(()=>{v()},[]),(0,c.useEffect)(()=>{w()},[l,p,r]);let v=async()=>{try{let a=k(),b={};a&&(b.Authorization=`Bearer ${a}`);let c=await fetch("/api/compliance",{headers:b});if(c.ok){let a=await c.json();m(a.compliance_logs||[])}}catch(a){console.error("Fetch compliance logs error:",a)}finally{u(!1)}},w=()=>{let a=l;"signed_off"===p?a=a.filter(a=>a.sign_off):"pending"===p&&(a=a.filter(a=>!a.sign_off)),r&&(a=a.filter(a=>a.business_name?.toLowerCase().includes(r.toLowerCase())||a.booking_id?.toLowerCase().includes(r.toLowerCase()))),o(a)};return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(g.ShieldCheck,{size:32,className:"text-green-600"}),(0,b.jsx)("h1",{className:"text-4xl md:text-5xl font-black uppercase tracking-tighter italic text-black",children:"Compliance Reports"})]}),(0,b.jsxs)("button",{className:"px-6 py-3 bg-green-600 text-white font-black rounded-xl hover:bg-green-700 transition-all uppercase tracking-wider text-sm flex items-center gap-2 shadow-lg",children:[(0,b.jsx)(j.Download,{size:20}),"Export Report"]})]}),(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)(h.Search,{size:20,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),(0,b.jsx)("input",{type:"text",value:r,onChange:a=>s(a.target.value),placeholder:"Search compliance logs...",className:"w-full pl-12 pr-4 py-3 rounded-xl bg-white border border-gray-200 text-black placeholder-gray-400 focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all shadow-sm"})]}),(0,b.jsx)("div",{className:"flex gap-2",children:["all","signed_off","pending"].map(a=>(0,b.jsx)("button",{onClick:()=>q(a),className:`px-4 py-2 rounded-xl border font-bold uppercase tracking-wider text-xs whitespace-nowrap transition-all shadow-sm ${p===a?"bg-green-100 border-green-300 text-green-700":"bg-white border-gray-200 text-gray-600 hover:bg-gray-50 hover:border-green-300"}`,children:"all"===a?"All":a.replace("_"," ")},a))})]}),t?(0,b.jsx)("div",{className:"text-center py-12 text-gray-600",children:"Loading..."}):n.length>0?(0,b.jsx)("div",{className:"space-y-4",children:n.map(c=>{var d;return(0,b.jsx)("div",{className:"p-6 rounded-2xl bg-white border border-gray-200 hover:bg-gray-50 hover:border-green-300 transition-all cursor-pointer shadow-sm",onClick:()=>a.push(`/admin/jobs/${c.booking_id}`),children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(g.ShieldCheck,{size:24,className:c.sign_off?"text-green-600":"text-orange-600"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-black text-black",children:c.business_name||"Business"}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Booking ID: ",c.booking_id?.substring(0,8),"..."]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Checked By"}),(0,b.jsxs)("p",{className:"text-black font-medium",children:[c.checked_by_first_name," ",c.checked_by_last_name]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Verified At"}),(0,b.jsx)("p",{className:"text-gray-700",children:(d=c.verified_at||c.created_at)?new Date(d).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Photos"}),(0,b.jsxs)("p",{className:"text-black font-medium",children:[c.photos?.length||0," photos"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Checklist Items"}),(0,b.jsxs)("p",{className:"text-black font-medium",children:[c.checklist_items?.filter(a=>a?.completed||"object"==typeof a&&a.completed).length||0," / ",c.checklist_items?.length||0]})]})]}),c.non_compliance_notes&&(0,b.jsxs)("div",{className:"p-3 rounded-xl bg-orange-100 border border-orange-300",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)(i.AlertCircle,{size:16,className:"text-orange-600"}),(0,b.jsx)("p",{className:"text-xs font-bold uppercase tracking-wider text-orange-700",children:"Non-Compliance Notes"})]}),(0,b.jsx)("p",{className:"text-sm text-gray-700",children:c.non_compliance_notes})]})]}),(0,b.jsx)("div",{className:"flex items-center",children:(0,b.jsx)(f.default,{status:c.sign_off?"completed":"pending",size:"default"})})]})},c.id)})}):(0,b.jsxs)("div",{className:"text-center py-12 space-y-4",children:[(0,b.jsx)(g.ShieldCheck,{size:48,className:"mx-auto text-gray-400 opacity-50"}),(0,b.jsx)("p",{className:"text-gray-600",children:"No compliance logs found."})]})]})}a.s(["default",()=>k])}];

//# sourceMappingURL=_b9c4b7cf._.js.map