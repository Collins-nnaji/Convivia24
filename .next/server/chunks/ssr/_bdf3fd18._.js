module.exports=[62036,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(86723),e=a.i(74290),f=a.i(14800),g=c,h=a.i(65802);class i extends g.Component{getSnapshotBeforeUpdate(a){let b=this.props.childRef.current;if(b&&a.isPresent&&!this.props.isPresent){let a=b.offsetParent,c=a instanceof HTMLElement&&a.offsetWidth||0,d=this.props.sizeRef.current;d.height=b.offsetHeight||0,d.width=b.offsetWidth||0,d.top=b.offsetTop,d.left=b.offsetLeft,d.right=c-d.width-d.left}return null}componentDidUpdate(){}render(){return this.props.children}}function j({children:a,isPresent:c,anchorX:d}){let e=(0,g.useId)(),f=(0,g.useRef)(null),j=(0,g.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:k}=(0,g.useContext)(h.MotionConfigContext);return(0,g.useInsertionEffect)(()=>{let{width:a,height:b,top:g,left:h,right:i}=j.current;if(c||!f.current||!a||!b)return;let l="left"===d?`left: ${h}`:`right: ${i}`;f.current.dataset.motionPopId=e;let m=document.createElement("style");return k&&(m.nonce=k),document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${e}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${b}px !important;
            ${l}px !important;
            top: ${g}px !important;
          }
        `),()=>{document.head.removeChild(m)}},[c]),(0,b.jsx)(i,{isPresent:c,childRef:f,sizeRef:j,children:g.cloneElement(a,{ref:f})})}let k=({children:a,initial:d,isPresent:g,onExitComplete:h,custom:i,presenceAffectsLayout:k,mode:m,anchorX:n})=>{let o=(0,e.useConstant)(l),p=(0,c.useId)(),q=(0,c.useCallback)(a=>{for(let b of(o.set(a,!0),o.values()))if(!b)return;h&&h()},[o,h]),r=(0,c.useMemo)(()=>({id:p,initial:d,isPresent:g,custom:i,onExitComplete:q,register:a=>(o.set(a,!1),()=>o.delete(a))}),k?[Math.random(),q]:[g,q]);return(0,c.useMemo)(()=>{o.forEach((a,b)=>o.set(b,!1))},[g]),c.useEffect(()=>{g||o.size||!h||h()},[g]),"popLayout"===m&&(a=(0,b.jsx)(j,{isPresent:g,anchorX:n,children:a})),(0,b.jsx)(f.PresenceContext.Provider,{value:r,children:a})};function l(){return new Map}var m=a.i(20410);let n=a=>a.key||"";function o(a){let b=[];return c.Children.forEach(a,a=>{(0,c.isValidElement)(a)&&b.push(a)}),b}var p=a.i(1703);let q=({children:a,custom:f,initial:g=!0,onExitComplete:h,presenceAffectsLayout:i=!0,mode:j="sync",propagate:l=!1,anchorX:q="left"})=>{let[r,s]=(0,m.usePresence)(l),t=(0,c.useMemo)(()=>o(a),[a]),u=l&&!r?[]:t.map(n),v=(0,c.useRef)(!0),w=(0,c.useRef)(t),x=(0,e.useConstant)(()=>new Map),[y,z]=(0,c.useState)(t),[A,B]=(0,c.useState)(t);(0,p.useIsomorphicLayoutEffect)(()=>{v.current=!1,w.current=t;for(let a=0;a<A.length;a++){let b=n(A[a]);u.includes(b)?x.delete(b):!0!==x.get(b)&&x.set(b,!1)}},[A,u.length,u.join("-")]);let C=[];if(t!==y){let a=[...t];for(let b=0;b<A.length;b++){let c=A[b],d=n(c);u.includes(d)||(a.splice(b,0,c),C.push(c))}return"wait"===j&&C.length&&(a=C),B(o(a)),z(t),null}let{forceRender:D}=(0,c.useContext)(d.LayoutGroupContext);return(0,b.jsx)(b.Fragment,{children:A.map(a=>{let c=n(a),d=(!l||!!r)&&(t===A||u.includes(c));return(0,b.jsx)(k,{isPresent:d,initial:(!v.current||!!g)&&void 0,custom:f,presenceAffectsLayout:i,mode:j,onExitComplete:d?void 0:()=>{if(!x.has(c))return;x.set(c,!0);let a=!0;x.forEach(b=>{b||(a=!1)}),a&&(null==D||D(),B(w.current),l&&(null==s||s()),h&&h())},anchorX:q,children:a},c)})})};a.s(["AnimatePresence",()=>q],62036)},9793,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(46271),e=a.i(62036),f=a.i(70106);let g=(0,f.default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),h=(0,f.default)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),i=(0,f.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),j=(0,f.default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),k={role:"assistant",content:"Hi — I'm your AI Revenue Advisor. Ask me about pipeline health, sales audits, or how we can help. What's on your mind?"};function l(){let[a,f]=(0,c.useState)([k]),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(""),t=(0,c.useRef)(null);async function u(b){b.preventDefault();let c=l.trim();if(!c||n)return;let d={role:"user",content:c};f(a=>[...a,d]),m(""),o(!0),s("");try{let b=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[...a,d].map(a=>({role:a.role,content:a.content})),inquiryId:p??void 0})});if(!b.ok){let a=await b.json().catch(()=>({}));throw Error(a.error||`Request failed: ${b.status}`)}let c=b.body?.getReader(),e=new TextDecoder,g="",h="",i="\0DATA:";if(c){for(;;){let{done:a,value:b}=await c.read();if(a)break;let d=(g+=e.decode(b,{stream:!0})).indexOf(i);if(-1!==d){h+=g.slice(0,d);let a=g.slice(d+i.length).trim();try{let b=JSON.parse(a);b.inquiryId&&q(b.inquiryId)}catch{}g="";break}h+=g,g="",s(h)}if(g){let a=g.indexOf(i);if(-1!==a){h+=g.slice(0,a);try{let b=JSON.parse(g.slice(a+i.length).trim());b.inquiryId&&q(b.inquiryId)}catch{}}else h+=g;s(h)}}let j=h.trim();j&&f(a=>[...a,{role:"assistant",content:j}]),s("")}catch(a){f(b=>[...b,{role:"assistant",content:`Sorry, something went wrong. ${a instanceof Error?a.message:"Please try again."}`}])}finally{o(!1)}}(0,c.useEffect)(()=>{t.current?.scrollTo({top:t.current.scrollHeight,behavior:"smooth"})},[a,r]);let v=r?[...a,{role:"assistant",content:r}]:a;return(0,b.jsxs)("div",{className:"min-h-screen bg-white overflow-x-hidden",children:[(0,b.jsx)("section",{className:"pt-28 pb-6 px-4 md:px-6 border-b border-zinc-100",children:(0,b.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,b.jsx)(d.motion.p,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"text-[10px] font-semibold uppercase tracking-widest text-red-700 mb-2",children:"Live chat"}),(0,b.jsx)(d.motion.h1,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{delay:.05},className:"text-3xl md:text-4xl font-black tracking-tight text-zinc-900",children:"AI Revenue Advisor"}),(0,b.jsx)(d.motion.p,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-sm text-zinc-500 mt-1",children:"Chat with our AI agent. Your conversation is saved so we can follow up."})]})}),(0,b.jsxs)("section",{className:"max-w-2xl mx-auto px-4 md:px-6 py-6",children:[(0,b.jsx)("div",{ref:t,className:"min-h-[320px] max-h-[55vh] overflow-y-auto space-y-4 pb-4",children:(0,b.jsx)(e.AnimatePresence,{initial:!1,children:v.map((a,c)=>(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:`flex gap-3 ${"user"===a.role?"flex-row-reverse":""}`,children:[(0,b.jsx)("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${"user"===a.role?"bg-zinc-800 text-white":"bg-red-700 text-white"}`,children:"user"===a.role?(0,b.jsx)(i,{size:16}):(0,b.jsx)(h,{size:16})}),(0,b.jsxs)("div",{className:`max-w-[85%] rounded-lg px-4 py-3 text-sm ${"user"===a.role?"bg-zinc-900 text-white":"bg-zinc-100 text-zinc-900 border border-zinc-200"}`,children:[(0,b.jsx)("p",{className:"whitespace-pre-wrap break-words",children:a.content}),"assistant"===a.role&&c===v.length-1&&n&&(0,b.jsx)("span",{className:"inline-block w-2 h-4 ml-0.5 bg-red-600 animate-pulse"})]})]},c))})}),(0,b.jsxs)("form",{onSubmit:u,className:"flex gap-2 mt-4",children:[(0,b.jsx)("input",{type:"text",value:l,onChange:a=>m(a.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-3 border border-zinc-300 rounded-lg text-zinc-900 placeholder-zinc-400 focus:outline-none focus:ring-2 focus:ring-red-600 focus:border-transparent",disabled:n}),(0,b.jsxs)("button",{type:"submit",disabled:n||!l.trim(),className:"px-4 py-3 bg-red-700 text-white rounded-lg font-semibold hover:bg-red-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[n?(0,b.jsx)(j,{size:18,className:"animate-spin"}):(0,b.jsx)(g,{size:18}),"Send"]})]}),p&&(0,b.jsx)("p",{className:"text-[10px] uppercase tracking-widest text-zinc-400 mt-3",children:"Conversation saved. We’ll follow up if you shared your details."})]})]})}a.s(["default",()=>l],9793)}];

//# sourceMappingURL=_bdf3fd18._.js.map