module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70864,a=>{a.n(a.i(33290))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},67971,a=>{a.n(a.i(26435))},83866,a=>{"use strict";a.s(["ListingAgreeForm",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call ListingAgreeForm() from the server but ListingAgreeForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/app/admin/listings/[id]/ListingAgreeForm.tsx <module evaluation>","ListingAgreeForm")},15915,a=>{"use strict";a.s(["ListingAgreeForm",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call ListingAgreeForm() from the server but ListingAgreeForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/app/admin/listings/[id]/ListingAgreeForm.tsx","ListingAgreeForm")},32188,a=>{"use strict";a.i(83866);var b=a.i(15915);a.n(b)},55979,a=>{"use strict";a.s(["ListingMarkSoldForm",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call ListingMarkSoldForm() from the server but ListingMarkSoldForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/app/admin/listings/[id]/ListingMarkSoldForm.tsx <module evaluation>","ListingMarkSoldForm")},14219,a=>{"use strict";a.s(["ListingMarkSoldForm",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call ListingMarkSoldForm() from the server but ListingMarkSoldForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/app/admin/listings/[id]/ListingMarkSoldForm.tsx","ListingMarkSoldForm")},9713,a=>{"use strict";a.i(55979);var b=a.i(14219);a.n(b)},42443,a=>{"use strict";var b=a.i(7997),c=a.i(53058),d=a.i(12259);a.i(70396);var e=a.i(73727),f=a.i(95936),g=a.i(32188),h=a.i(9713);async function i({params:a}){await (0,c.requireAdmin)();let{id:i}=await a,j=(await d.default`
    SELECT l.*, c.name as client_name
    FROM listings l
    JOIN clients c ON c.id = l.client_id
    WHERE l.id = ${i}
  `)[0];function k(a,b){if(null==a||""===a)return"—";let c="string"==typeof a?parseFloat(a):a;return isNaN(c)?"—":`${"GBP"===b?"£":b+" "}${c.toLocaleString()}`}j||(0,e.notFound)();let l="sold"===j.status&&null!=j.sale_value&&null!=j.agreed_commission_pct?Number(j.sale_value)*(Number(j.agreed_commission_pct)/100):null;return(0,b.jsxs)("div",{className:"p-8 max-w-3xl",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)(f.default,{href:"/admin/listings",className:"text-[11px] text-zinc-500 hover:text-white transition-colors mb-4 block",children:"← All Listings"}),(0,b.jsx)("span",{className:"inline-block bg-red-700 text-white text-[9px] font-black uppercase tracking-[0.2em] px-2 py-1 mb-3",children:"Listing"}),(0,b.jsx)("h1",{className:"text-3xl font-black tracking-tighter text-white uppercase italic",children:j.title}),(0,b.jsxs)("p",{className:"text-zinc-500 text-sm mt-1",children:["Client: ",(0,b.jsx)(f.default,{href:`/admin/clients/${j.client_id}`,className:"text-red-400 hover:text-red-300",children:j.client_name??j.client_id})," · ",(0,b.jsx)("span",{className:"text-[10px] font-black uppercase px-2 py-0.5 rounded bg-zinc-700 text-zinc-300",children:{draft:"Draft",submitted:"Submitted",price_agreed:"Price agreed",listed:"Listed",sold:"Sold",withdrawn:"Withdrawn"}[j.status]??j.status})]})]}),(0,b.jsxs)("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-6 space-y-6",children:[j.description&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xs font-black uppercase text-zinc-500 mb-1",children:"Description"}),(0,b.jsx)("p",{className:"text-zinc-300 text-sm whitespace-pre-wrap",children:j.description})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-zinc-500 text-[11px] uppercase font-bold",children:"Asking price"}),(0,b.jsx)("p",{className:"text-white",children:k(j.asking_price,j.currency)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-zinc-500 text-[11px] uppercase font-bold",children:"Agreed price"}),(0,b.jsx)("p",{className:"text-white",children:k(j.agreed_price,j.currency)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-zinc-500 text-[11px] uppercase font-bold",children:"Commission %"}),(0,b.jsx)("p",{className:"text-white",children:null!=j.agreed_commission_pct&&""!==j.agreed_commission_pct?`${Number(j.agreed_commission_pct)}%`:"—"})]}),"sold"===j.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-zinc-500 text-[11px] uppercase font-bold",children:"Sale value"}),(0,b.jsx)("p",{className:"text-white",children:k(j.sale_value,j.currency)})]}),null!=l&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-zinc-500 text-[11px] uppercase font-bold",children:"Commission earned"}),(0,b.jsx)("p",{className:"text-green-400",children:k(l,j.currency)})]})]})]}),(0,b.jsx)("div",{className:"pt-4 border-t border-zinc-800 flex flex-wrap gap-4",children:(0,b.jsx)(f.default,{href:`/admin/clients/${j.client_id}`,className:"inline-flex items-center gap-2 text-red-400 hover:text-red-300 text-sm font-semibold",children:"Open client (Messages & deals) →"})}),"sold"!==j.status&&"withdrawn"!==j.status&&(0,b.jsxs)("div",{className:"pt-4 border-t border-zinc-800 space-y-6",children:[(0,b.jsx)(g.ListingAgreeForm,{listingId:i,currentStatus:j.status,agreedPrice:j.agreed_price,agreedCommissionPct:j.agreed_commission_pct,currency:j.currency}),("price_agreed"===j.status||"listed"===j.status)&&(0,b.jsx)(h.ListingMarkSoldForm,{listingId:i,currency:j.currency})]})]})]})}a.s(["default",()=>i])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__a7c7e4d9._.js.map