module.exports=[47588,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(46271),e=a.i(50944),f=a.i(14953),g=a.i(55679),h=a.i(85157),i=a.i(15618),j=a.i(41675),k=a.i(90166),l=a.i(24669),m=a.i(41710),n=a.i(92e3),o=a.i(32860),p=a.i(67453),q=a.i(39761),r=a.i(50429),s=a.i(24987),t=a.i(4720);function u(){let a=(0,e.useRouter)(),{user:u,getToken:v}=(0,f.useAuth)(),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)({total:0,pending:0,scheduled:0,in_progress:0,completed:0,cancelled:0,totalCost:0,monthlyCost:0,avgJobCost:0,upcomingJobs:0}),[A,B]=(0,c.useState)([]),[C,D]=(0,c.useState)([]),[E,F]=(0,c.useState)([]),[G,H]=(0,c.useState)(!0);(0,c.useEffect)(()=>{I()},[u]);let I=async()=>{try{let a=v(),b={};a&&(b.Authorization=`Bearer ${a}`);let c=await fetch("/api/bookings",{headers:b});if(c.ok){let a=(await c.json()).bookings||[];x(a);let b=new Date,d=new Date(b.getFullYear(),b.getMonth(),1),e=a.filter(a=>new Date(a.created_at)>=d&&"completed"===a.status),f=a.filter(a=>"completed"===a.status),g=f.length>0?f.reduce((a,b)=>a+(b.total_cost||0),0)/f.length:0,h=a.filter(a=>("scheduled"===a.status||"in_progress"===a.status)&&a.scheduled_start&&new Date(a.scheduled_start)>=b),i={total:a.length,pending:a.filter(a=>"pending"===a.status).length,scheduled:a.filter(a=>"scheduled"===a.status).length,in_progress:a.filter(a=>"in_progress"===a.status).length,completed:f.length,cancelled:a.filter(a=>"cancelled"===a.status).length,totalCost:f.reduce((a,b)=>a+(b.total_cost||0),0),monthlyCost:e.reduce((a,b)=>a+(b.total_cost||0),0),avgJobCost:g,upcomingJobs:h.length,monthlyJobsCount:e.length};z(i);let j=[...a].sort((a,b)=>new Date(b.created_at)-new Date(a.created_at));B(j.slice(0,5)),D(h.sort((a,b)=>new Date(a.scheduled_start)-new Date(b.scheduled_start)).slice(0,3)),F(a.filter(a=>"urgent"===a.urgency||"emergency"===a.urgency).sort((a,b)=>new Date(a.scheduled_start||a.created_at)-new Date(b.scheduled_start||b.created_at)).slice(0,3))}}catch(a){console.error("Fetch bookings error:",a)}finally{H(!1)}},J=a=>`₦${a.toLocaleString("en-NG",{minimumFractionDigits:0,maximumFractionDigits:0})}`,K=[{label:"Total Jobs",value:y.total,icon:j.Calendar,color:"blue",bgColor:"bg-blue-50",borderColor:"border-blue-200",iconColor:"text-blue-600",subtitle:`${y.completed} completed`},{label:"Active Jobs",value:y.in_progress+y.scheduled,icon:l.TrendingUp,color:"red",bgColor:"bg-red-50",borderColor:"border-red-200",iconColor:"text-red-600",subtitle:`${y.pending} pending`},{label:"Total Spent",value:J(y.totalCost),icon:k.DollarSign,color:"green",bgColor:"bg-green-50",borderColor:"border-green-200",iconColor:"text-green-600",subtitle:J(y.monthlyCost)+" this month"},{label:"Upcoming",value:y.upcomingJobs,icon:m.Clock,color:"orange",bgColor:"bg-orange-50",borderColor:"border-orange-200",iconColor:"text-orange-600",subtitle:"Scheduled jobs"}],L=[{label:"Request Service",icon:i.Plus,path:"/client/request",color:"red",primary:!0},{label:"View All Jobs",icon:j.Calendar,path:"/client/jobs",color:"blue"},{label:"View Invoices",icon:t.FileText,path:"/client/invoices",color:"green"}];return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-black uppercase tracking-tighter italic text-black mb-2",children:"Dashboard"}),(0,b.jsxs)("p",{className:"text-gray-600 font-medium",children:["Welcome back, ",(0,b.jsx)("span",{className:"font-black text-black",children:u?.first_name||u?.email?.split("@")[0]||"Guest User"})]}),u?.business_name&&(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1 font-medium",children:u.business_name})]}),(0,b.jsx)("div",{className:"flex gap-3",children:L.map((c,e)=>(0,b.jsxs)(d.motion.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1*e},whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},onClick:()=>a.push(c.path),className:`px-6 py-4 font-black rounded-xl transition-all flex items-center gap-3 uppercase tracking-wider text-sm shadow-lg ${c.primary?"bg-red-600 text-white hover:bg-red-700 hover:shadow-xl":"bg-white border-2 border-gray-200 text-black hover:border-red-300 hover:bg-gray-50"}`,children:[(0,b.jsx)(c.icon,{size:20}),c.label]},e))})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:K.map((c,e)=>(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*e,duration:.4},whileHover:{y:-4,scale:1.02},className:`p-6 rounded-2xl bg-white border-2 ${c.borderColor} hover:border-red-300 transition-all shadow-lg hover:shadow-xl cursor-pointer`,onClick:()=>c.path&&a.push(c.path),children:[(0,b.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,b.jsx)("div",{className:`w-12 h-12 rounded-xl ${c.bgColor} flex items-center justify-center ${c.iconColor} shadow-md`,children:(0,b.jsx)(c.icon,{size:24})})}),(0,b.jsx)("p",{className:"text-xs font-bold uppercase tracking-wider text-gray-600 mb-1",children:c.label}),(0,b.jsx)("p",{className:"text-3xl font-black text-black mb-1",children:c.value}),c.subtitle&&(0,b.jsx)("p",{className:"text-xs text-gray-500 font-medium mt-1",children:c.subtitle})]},e))}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 grid grid-cols-3 gap-4",children:[(0,b.jsxs)(d.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4},className:"p-4 rounded-xl bg-white border border-gray-200 hover:border-red-300 transition-all shadow-md text-center",children:[(0,b.jsx)(r.Target,{size:20,className:"text-green-600 mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-xs font-bold uppercase tracking-wider text-gray-600 mb-1",children:"Avg Job Cost"}),(0,b.jsx)("p",{className:"text-xl font-black text-black",children:J(y.avgJobCost)})]}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.45},className:"p-4 rounded-xl bg-white border border-gray-200 hover:border-red-300 transition-all shadow-md text-center",children:[(0,b.jsx)(p.CheckCircle2,{size:20,className:"text-blue-600 mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-xs font-bold uppercase tracking-wider text-gray-600 mb-1",children:"Completed"}),(0,b.jsx)("p",{className:"text-xl font-black text-black",children:y.completed})]}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.5},className:"p-4 rounded-xl bg-white border border-gray-200 hover:border-red-300 transition-all shadow-md text-center",children:[(0,b.jsx)(q.BarChart3,{size:20,className:"text-purple-600 mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-xs font-bold uppercase tracking-wider text-gray-600 mb-1",children:"This Month"}),(0,b.jsx)("p",{className:"text-xl font-black text-black",children:y.monthlyJobsCount||0})]})]}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.5},className:"p-6 rounded-2xl bg-gradient-to-br from-green-50 to-blue-50 border-2 border-green-200 shadow-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-green-600 flex items-center justify-center text-white shadow-md",children:(0,b.jsx)(l.TrendingUp,{size:20})}),(0,b.jsx)("h3",{className:"text-lg font-black uppercase tracking-tight text-black",children:"Spending Insights"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"p-3 rounded-xl bg-white border border-gray-200",children:[(0,b.jsx)("p",{className:"text-xs font-bold uppercase tracking-wider text-gray-600 mb-1",children:"This Month"}),(0,b.jsx)("p",{className:"text-xl font-black text-black",children:J(y.monthlyCost)})]}),(0,b.jsxs)("div",{className:"p-3 rounded-xl bg-white border border-gray-200",children:[(0,b.jsx)("p",{className:"text-xs font-bold uppercase tracking-wider text-gray-600 mb-1",children:"All Time"}),(0,b.jsx)("p",{className:"text-xl font-black text-black",children:J(y.totalCost)})]}),(0,b.jsxs)("div",{className:"p-3 rounded-xl bg-white border border-gray-200",children:[(0,b.jsx)("p",{className:"text-xs font-bold uppercase tracking-wider text-gray-600 mb-1",children:"Average"}),(0,b.jsx)("p",{className:"text-xl font-black text-black",children:J(y.avgJobCost)})]})]})]})]}),C.length>0&&(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(m.Clock,{size:24,className:"text-blue-600"}),(0,b.jsxs)("h2",{className:"text-2xl font-black uppercase tracking-tight italic text-black",children:["Upcoming Jobs (",C.length,")"]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:C.map((c,e)=>(0,b.jsxs)(d.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.7+.1*e},onClick:()=>a.push(`/client/jobs/${c.id}`),className:"p-5 rounded-2xl bg-white border-2 border-gray-200 hover:border-blue-300 cursor-pointer transition-all shadow-md hover:shadow-xl group",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"text-base font-black text-black mb-1 group-hover:text-blue-600 transition-colors",children:c.service_name}),(0,b.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:c.service_type})]}),(0,b.jsx)(h.default,{status:c.status,size:"small"})]}),c.scheduled_start&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-700 mb-2",children:[(0,b.jsx)(j.Calendar,{size:14,className:"text-blue-600"}),(0,b.jsx)("span",{className:"font-medium",children:new Date(c.scheduled_start).toLocaleDateString("en-NG",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})})]}),c.location_address&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-600 mb-3",children:[(0,b.jsx)(s.MapPin,{size:12,className:"text-gray-500"}),(0,b.jsx)("span",{className:"truncate",children:c.location_address})]}),c.total_cost>0&&(0,b.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200",children:[(0,b.jsx)("span",{className:"text-xs font-bold uppercase tracking-wider text-gray-600",children:"Cost"}),(0,b.jsx)("span",{className:"text-sm font-black text-green-600",children:J(c.total_cost)})]}),(0,b.jsx)("div",{className:"mt-3 flex items-center justify-end opacity-0 group-hover:opacity-100 transition-opacity",children:(0,b.jsx)(o.ArrowRight,{size:16,className:"text-blue-600"})})]},c.id))})]}),E.length>0&&(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"p-6 rounded-2xl bg-orange-50 border-2 border-orange-300 shadow-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)(n.AlertCircle,{size:24,className:"text-orange-600"}),(0,b.jsxs)("h2",{className:"text-xl font-black uppercase tracking-tight text-orange-700",children:["Urgent Requests (",E.length,")"]})]}),(0,b.jsx)("div",{className:"space-y-3",children:E.map((c,e)=>(0,b.jsx)(d.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.8+.1*e},onClick:()=>a.push(`/client/jobs/${c.id}`),className:"p-4 rounded-xl bg-white border border-orange-200 hover:border-orange-400 cursor-pointer transition-all shadow-sm hover:shadow-md",children:(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("h3",{className:"text-base font-black text-black",children:c.service_name}),(0,b.jsx)(h.default,{status:c.status,size:"small"})]}),(0,b.jsxs)("p",{className:"text-xs text-gray-600 font-medium",children:[c.urgency?.toUpperCase()||"URGENT"," • ",c.business_name||"Your Business"]})]}),(0,b.jsx)(o.ArrowRight,{size:20,className:"text-orange-600"})]})},c.id))})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-2xl font-black uppercase tracking-tight italic text-black",children:"Recent Jobs"}),(0,b.jsxs)(d.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>a.push("/client/jobs"),className:"text-sm font-bold uppercase tracking-wider text-red-600 hover:text-red-700 transition-colors flex items-center gap-2",children:["View All Jobs",(0,b.jsx)(o.ArrowRight,{size:16})]})]}),G?(0,b.jsxs)("div",{className:"text-center py-12 text-gray-600",children:[(0,b.jsx)("div",{className:"inline-block w-8 h-8 border-4 border-red-600 border-t-transparent rounded-full animate-spin"}),(0,b.jsx)("p",{className:"mt-4 font-medium",children:"Loading your jobs..."})]}):A.length>0?(0,b.jsx)("div",{className:"space-y-4",children:A.map((c,e)=>(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9+.05*e},children:(0,b.jsx)(g.default,{job:c,index:e,onClick:()=>a.push(`/client/jobs/${c.id}`)})},c.id))}):(0,b.jsxs)(d.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.5},className:"text-center py-16 p-6 rounded-2xl bg-gradient-to-br from-gray-50 to-blue-50 border-2 border-gray-200 space-y-6",children:[(0,b.jsx)("div",{className:"w-20 h-20 rounded-full bg-red-100 mx-auto flex items-center justify-center",children:(0,b.jsx)(j.Calendar,{size:40,className:"text-red-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-2xl font-black uppercase tracking-tight text-black mb-2",children:"No Jobs Yet"}),(0,b.jsx)("p",{className:"text-gray-600 font-medium mb-2",children:"Get started by requesting your first cleaning service!"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"We're here to help keep your facility spotless."})]}),(0,b.jsxs)(d.motion.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.7},whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},onClick:()=>a.push("/client/request"),className:"px-8 py-4 bg-red-600 text-white font-black rounded-xl hover:bg-red-700 transition-all uppercase tracking-wider text-sm shadow-xl flex items-center gap-3 mx-auto",children:[(0,b.jsx)(i.Plus,{size:20}),"Request Your First Service"]})]})]})]})}a.s(["default",()=>u])}];

//# sourceMappingURL=app_%28app%29_client_dashboard_page_jsx_57c17be0._.js.map