module.exports=[70106,a=>{"use strict";var b=a.i(72131);let c=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let e=(0,b.forwardRef)(({color:a="currentColor",size:e=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...d,width:e,height:e,stroke:a,strokeWidth:g?24*Number(f)/Number(e):f,className:c("lucide",h),...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),f=(a,d)=>{let f=(0,b.forwardRef)(({className:f,...g},h)=>(0,b.createElement)(e,{ref:h,iconNode:d,className:c(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,f),...g}));return f.displayName=`${a}`,f};a.s(["default",()=>f],70106)},32860,a=>{"use strict";let b=(0,a.i(70106).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);a.s(["ArrowRight",()=>b],32860)},92759,a=>{"use strict";let b=(0,a.i(70106).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);a.s(["Send",()=>b],92759)},15618,a=>{"use strict";let b=(0,a.i(70106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},83497,a=>{"use strict";let b=(0,a.i(70106).default)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);a.s(["Package",()=>b],83497)},92966,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(83497),f=a.i(15618),g=a.i(92759),h=a.i(32860);let i={draft:"Draft",submitted:"Submitted",price_agreed:"Price agreed",listed:"Listed",sold:"Sold",withdrawn:"Withdrawn"},j={draft:"bg-zinc-200 text-zinc-700",submitted:"bg-blue-100 text-blue-800",price_agreed:"bg-amber-100 text-amber-800",listed:"bg-green-100 text-green-800",sold:"bg-emerald-200 text-emerald-900",withdrawn:"bg-zinc-300 text-zinc-600"};function k(a,b){if(null==a||""===a)return"—";let c="string"==typeof a?parseFloat(a):a;return isNaN(c)?"—":`${"GBP"===b?"£":b+" "}${c.toLocaleString()}`}function l(){let[a,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)(null);async function q(){let a=await fetch("/api/listings",{credentials:"include"});if(a.ok){let b=await a.json();l(Array.isArray(b)?b:[])}else l([]);n(!1)}async function r(a){p(a);try{(await fetch(`/api/listings/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({action:"submit"})})).ok&&await q()}finally{p(null)}}return(0,c.useEffect)(()=>{q()},[]),(0,b.jsxs)("div",{className:"p-8",children:[(0,b.jsxs)("div",{className:"mb-8 flex flex-wrap items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"inline-block bg-red-600 text-white text-[9px] font-black uppercase tracking-[0.2em] px-2 py-1 mb-3",children:"Items to sell"}),(0,b.jsx)("h1",{className:"text-3xl font-black tracking-tighter text-zinc-900 uppercase italic",children:"Your listings"}),(0,b.jsx)("p",{className:"text-zinc-600 text-sm mt-1",children:"Add items you want Convivia24 to sell. We agree price and commission in Messages, then list and sell."})]}),(0,b.jsxs)(d.default,{href:"/dashboard/listings/new",className:"inline-flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white text-sm font-black uppercase tracking-[0.1em] px-5 py-3 rounded transition-colors",children:[(0,b.jsx)(f.Plus,{size:16}),"Add listing"]})]}),m?(0,b.jsx)("p",{className:"text-zinc-500 text-sm",children:"Loading…"}):0===a.length?(0,b.jsxs)("div",{className:"bg-white border border-zinc-200 rounded-lg p-8 shadow-sm text-center",children:[(0,b.jsx)(e.Package,{className:"w-12 h-12 text-zinc-300 mx-auto mb-3"}),(0,b.jsx)("p",{className:"text-zinc-600 text-sm mb-4",children:"No listings yet."}),(0,b.jsxs)(d.default,{href:"/dashboard/listings/new",className:"inline-flex items-center gap-2 text-red-600 font-semibold text-sm hover:text-red-700",children:[(0,b.jsx)(f.Plus,{size:14}),"Add your first listing"]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex flex-wrap gap-4 mb-6 text-sm",children:[(0,b.jsxs)("span",{className:"text-zinc-600",children:[(0,b.jsx)("strong",{className:"text-zinc-900",children:a.length})," total"]}),a.filter(a=>"draft"===a.status).length>0&&(0,b.jsxs)("span",{className:"text-zinc-500",children:[a.filter(a=>"draft"===a.status).length," draft"]}),a.filter(a=>["submitted","price_agreed","listed"].includes(a.status)).length>0&&(0,b.jsxs)("span",{className:"text-zinc-500",children:[a.filter(a=>["submitted","price_agreed","listed"].includes(a.status)).length," in progress"]}),a.filter(a=>"sold"===a.status).length>0&&(0,b.jsxs)("span",{className:"text-zinc-500",children:[a.filter(a=>"sold"===a.status).length," sold"]})]}),(0,b.jsx)("div",{className:"space-y-3",children:a.map(a=>{let c,e;return(0,b.jsx)("div",{className:"bg-white border border-zinc-200 rounded-lg shadow-sm overflow-hidden",children:(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4 p-5",children:[(0,b.jsxs)(d.default,{href:`/dashboard/listings/${a.id}`,className:"min-w-0 flex-1 group",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-1",children:[(0,b.jsx)("span",{className:`text-[10px] font-black uppercase px-2 py-0.5 rounded ${j[a.status]??"bg-zinc-200 text-zinc-700"}`,children:i[a.status]??a.status}),(0,b.jsx)("span",{className:"text-[10px] text-zinc-400",children:(c=new Date(a.updated_at),0===(e=Math.floor((new Date().getTime()-c.getTime())/864e5))?"Today":1===e?"Yesterday":e<7?`${e} days ago`:e<30?`${Math.floor(e/7)} weeks ago`:c.toLocaleDateString())})]}),(0,b.jsx)("h2",{className:"text-lg font-bold text-zinc-900 truncate group-hover:text-red-600 transition-colors",children:a.title}),a.description&&(0,b.jsx)("p",{className:"text-sm text-zinc-500 mt-0.5 line-clamp-2",children:a.description}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-4 mt-2 text-[11px] text-zinc-600",children:[(0,b.jsxs)("span",{children:["Asking: ",k(a.asking_price,a.currency)]}),null!=a.agreed_price&&""!==a.agreed_price&&(0,b.jsxs)("span",{children:["Agreed: ",k(a.agreed_price,a.currency)]}),null!=a.agreed_commission_pct&&""!==a.agreed_commission_pct&&(0,b.jsxs)("span",{children:["Commission: ",Number(a.agreed_commission_pct),"%"]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:["draft"===a.status&&(0,b.jsxs)("button",{type:"button",onClick:b=>{b.preventDefault(),r(a.id)},disabled:!!o,className:"inline-flex items-center gap-1.5 bg-blue-600 hover:bg-blue-700 text-white text-xs font-bold uppercase tracking-wider px-3 py-2 rounded transition-colors disabled:opacity-60",children:[(0,b.jsx)(g.Send,{size:12}),o===a.id?"Submitting…":"Submit"]}),(0,b.jsxs)(d.default,{href:`/dashboard/listings/${a.id}`,className:"inline-flex items-center gap-1.5 border border-zinc-300 text-zinc-700 text-xs font-semibold px-3 py-2 rounded hover:bg-zinc-50 transition-colors",children:["View",(0,b.jsx)(h.ArrowRight,{size:12})]}),(0,b.jsx)(d.default,{href:"/dashboard/messages",className:"inline-flex items-center gap-1.5 border border-zinc-300 text-zinc-700 text-xs font-semibold px-3 py-2 rounded hover:bg-zinc-50 transition-colors",children:"Messages"})]})]})},a.id)})})]})]})}a.s(["default",()=>l])}];

//# sourceMappingURL=_0766dd51._.js.map