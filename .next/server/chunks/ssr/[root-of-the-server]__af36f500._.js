module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70864,a=>{a.n(a.i(33290))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},67971,a=>{a.n(a.i(26435))},8049,a=>{"use strict";var b=a.i(7997),c=a.i(53058),d=a.i(12259),e=a.i(95936);let f=[{key:"lead",label:"Lead",color:"border-zinc-600"},{key:"qualified",label:"Qualified",color:"border-blue-600"},{key:"proposal",label:"Proposal",color:"border-yellow-500"},{key:"negotiation",label:"Negotiation",color:"border-orange-500"},{key:"closed_won",label:"Won",color:"border-green-600"},{key:"closed_lost",label:"Lost",color:"border-zinc-700"}];async function g(){await (0,c.requireAdmin)();let a=await d.default`
    SELECT d.*, c.name as client_name
    FROM pipeline_deals d
    JOIN clients c ON c.id = d.client_id
    ORDER BY d.updated_at DESC
  `,g=f.reduce((b,c)=>(b[c.key]=a.filter(a=>a.stage===c.key),b),{}),h=a.filter(a=>!["closed_won","closed_lost"].includes(a.stage)),i=h.reduce((a,b)=>a+parseFloat(b.value||0),0);return(0,b.jsxs)("div",{className:"p-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("span",{className:"inline-block bg-red-700 text-white text-[9px] font-black uppercase tracking-[0.2em] px-2 py-1 mb-3",children:"Pipeline"}),(0,b.jsx)("h1",{className:"text-3xl font-black tracking-tighter text-white uppercase italic",children:"All Deals"}),(0,b.jsxs)("p",{className:"text-zinc-500 text-sm mt-1",children:[h.length," open deals · £",(i/1e3).toFixed(0),"k pipeline value"]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:f.map(({key:a,label:c,color:d})=>(0,b.jsxs)("div",{className:`bg-zinc-900 border-t-2 ${d} border-x border-b border-zinc-800`,children:[(0,b.jsxs)("div",{className:"px-4 py-3 border-b border-zinc-800 flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-xs font-black uppercase tracking-[0.15em] text-zinc-300",children:c}),(0,b.jsx)("span",{className:"text-xs text-zinc-600",children:g[a].length})]}),(0,b.jsxs)("div",{className:"p-3 space-y-2 min-h-[100px]",children:[0===g[a].length&&(0,b.jsx)("p",{className:"text-[11px] text-zinc-700 text-center pt-3",children:"Empty"}),g[a].map(a=>(0,b.jsxs)(e.default,{href:`/admin/clients/${a.client_id}`,className:"block bg-zinc-800 border border-zinc-700 hover:border-zinc-600 px-3 py-2.5 transition-colors",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-white leading-tight",children:a.title}),(0,b.jsx)("p",{className:"text-[11px] text-zinc-500 mt-0.5",children:a.client_name}),a.value&&(0,b.jsxs)("p",{className:"text-[11px] text-zinc-400 mt-1",children:["£",parseFloat(a.value).toLocaleString()]})]},a.id))]})]},a))})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__af36f500._.js.map