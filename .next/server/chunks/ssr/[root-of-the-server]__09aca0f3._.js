module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70864,a=>{a.n(a.i(33290))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},67971,a=>{a.n(a.i(26435))},92737,a=>{"use strict";let b=(0,a.i(1269).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);a.s(["ArrowRight",()=>b],92737)},29431,a=>{"use strict";var b=a.i(7997),c=a.i(53058),d=a.i(12259),e=a.i(95936),f=a.i(92737);let g=(0,a.i(1269).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);async function h(){await (0,c.requireAdmin)();let a=await d.default`
    SELECT
      c.*,
      COUNT(DISTINCT d.id)  as deal_count,
      COUNT(DISTINCT m.id)  FILTER (WHERE m.sender_role = 'client' AND m.read_at IS NULL) as unread_count,
      u.name as admin_name
    FROM clients c
    LEFT JOIN pipeline_deals d ON d.client_id = c.id
    LEFT JOIN messages m ON m.client_id = c.id
    LEFT JOIN app_users u ON u.id = c.assigned_admin
    GROUP BY c.id, u.name
    ORDER BY c.created_at DESC
  `;return(0,b.jsxs)("div",{className:"p-8 max-w-5xl",children:[(0,b.jsxs)("div",{className:"flex items-end justify-between mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"inline-block bg-red-700 text-white text-[9px] font-black uppercase tracking-[0.2em] px-2 py-1 mb-3",children:"Clients"}),(0,b.jsx)("h1",{className:"text-3xl font-black tracking-tighter text-white uppercase italic",children:"All Clients"}),(0,b.jsxs)("p",{className:"text-zinc-500 text-sm mt-1",children:[a.length," account",1!==a.length?"s":""]})]}),(0,b.jsxs)(e.default,{href:"/admin/clients/new",className:"flex items-center gap-2 bg-red-700 hover:bg-red-800 text-white text-sm font-black uppercase tracking-[0.1em] px-4 py-2.5 transition-colors",children:[(0,b.jsx)(g,{size:14}),"New Client"]})]}),(0,b.jsxs)("div",{className:"bg-zinc-900 border border-zinc-800",children:[0===a.length&&(0,b.jsx)("p",{className:"text-zinc-600 text-sm text-center py-12",children:"No clients yet. Add one to get started."}),(0,b.jsx)("div",{className:"divide-y divide-zinc-800",children:a.map(a=>(0,b.jsxs)(e.default,{href:`/admin/clients/${a.id}`,className:"group flex items-center justify-between px-6 py-4 hover:bg-zinc-800 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-9 h-9 bg-red-700 flex items-center justify-center text-white text-sm font-black shrink-0",children:a.name[0].toUpperCase()}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-white",children:a.name}),(0,b.jsxs)("div",{className:"flex items-center gap-3 mt-0.5",children:[a.industry&&(0,b.jsx)("span",{className:"text-[11px] text-zinc-500",children:a.industry}),(0,b.jsx)("span",{className:`text-[9px] font-black uppercase tracking-[0.1em] px-1.5 py-0.5 ${"active"===a.status?"bg-green-900 text-green-400":"bg-zinc-800 text-zinc-500"}`,children:a.status})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-6 text-right",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-white",children:a.deal_count}),(0,b.jsx)("p",{className:"text-[10px] text-zinc-600",children:"deals"})]}),parseInt(a.unread_count)>0&&(0,b.jsx)("div",{className:"bg-red-700 text-white text-[10px] font-black rounded-full w-5 h-5 flex items-center justify-center",children:a.unread_count}),(0,b.jsx)(f.ArrowRight,{size:14,className:"text-zinc-600 group-hover:text-red-500 transition-colors"})]})]},a.id))})]})]})}a.s(["default",()=>h],29431)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__09aca0f3._.js.map