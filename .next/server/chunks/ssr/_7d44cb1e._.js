module.exports=[85157,a=>{"use strict";var b=a.i(87924);a.i(72131);let c={pending:{bg:"bg-orange-100",text:"text-orange-700",border:"border-orange-300",label:"Pending"},scheduled:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-300",label:"Scheduled"},in_progress:{bg:"bg-red-100",text:"text-red-700",border:"border-red-300",label:"In Progress"},completed:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300",label:"Completed"},cancelled:{bg:"bg-red-100",text:"text-red-700",border:"border-red-300",label:"Cancelled"},assigned:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-300",label:"Assigned"},accepted:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300",label:"Accepted"},started:{bg:"bg-red-100",text:"text-red-700",border:"border-red-300",label:"Started"},draft:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-300",label:"Draft"},sent:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-300",label:"Sent"},paid:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300",label:"Paid"},overdue:{bg:"bg-red-100",text:"text-red-700",border:"border-red-300",label:"Overdue"},compliant:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300",label:"Compliant"},non_compliant:{bg:"bg-orange-100",text:"text-orange-700",border:"border-orange-300",label:"Non-Compliant"},verified:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300",label:"Verified"}};function d({status:a,size:d="default"}){let e=c[a?.toLowerCase()]||c.pending,f={small:"px-2 py-1 text-[10px]",default:"px-3 py-1.5 text-xs",large:"px-4 py-2 text-sm"};return(0,b.jsx)("span",{className:`inline-flex items-center justify-center rounded-full border font-black uppercase tracking-wider ${e.bg} ${e.text} ${e.border} ${f[d]||f.default}`,children:e.label||a?.replace("_"," ")||"Unknown"})}a.s(["default",()=>d])},210,a=>{"use strict";let b=(0,a.i(70106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},22582,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(14953),f=a.i(85157),g=a.i(210);function h(){let a=(0,d.useRouter)(),h=(0,d.useParams)(),{getToken:i}=(0,e.useAuth)(),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(!0);(0,c.useEffect)(()=>{h.id&&(r(),s())},[h.id]);let r=async()=>{try{let a=i(),b={};a&&(b.Authorization=`Bearer ${a}`);let c=await fetch(`/api/bookings/${h.id}`,{headers:b});if(c.ok){let a=await c.json();k(a.booking)}}catch(a){console.error("Fetch job error:",a)}finally{q(!1)}},s=async()=>{m([])},t=async()=>{if(n)try{let a=i(),b={"Content-Type":"application/json"};a&&(b.Authorization=`Bearer ${a}`),(await fetch(`/api/bookings/${h.id}/assign`,{method:"POST",headers:b,body:JSON.stringify({staff_id:n})})).ok&&(r(),o(""))}catch(a){console.error("Assign staff error:",a)}},u=async a=>{try{let b=i(),c={"Content-Type":"application/json"};b&&(c.Authorization=`Bearer ${b}`),(await fetch(`/api/bookings/${h.id}`,{method:"PATCH",headers:c,body:JSON.stringify({status:a})})).ok&&r()}catch(a){console.error("Update status error:",a)}};return p?(0,b.jsx)("div",{className:"text-center py-12 text-gray-600",children:"Loading..."}):j?(0,b.jsxs)("div",{className:"max-w-5xl mx-auto space-y-8",children:[(0,b.jsxs)("button",{onClick:()=>a.back(),className:"flex items-center gap-2 text-gray-600 hover:text-red-600 transition-colors font-bold",children:[(0,b.jsx)(g.ArrowLeft,{size:20}),"Back"]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h1",{className:"text-4xl font-black uppercase tracking-tighter italic text-black",children:"Job Management"}),(0,b.jsx)(f.default,{status:j.status,size:"large"})]}),(0,b.jsxs)("div",{className:"flex gap-4 flex-wrap",children:[(0,b.jsx)("button",{onClick:()=>u("scheduled"),disabled:"pending"!==j.status,className:"px-4 py-2 rounded-xl bg-gray-100 border border-gray-300 text-gray-700 font-bold uppercase tracking-wider text-xs hover:bg-gray-200 hover:border-red-300 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-gray-100",children:"Mark Scheduled"}),(0,b.jsx)("button",{onClick:()=>u("in_progress"),disabled:"scheduled"!==j.status,className:"px-4 py-2 rounded-xl bg-red-100 border border-red-300 text-red-700 font-bold uppercase tracking-wider text-xs hover:bg-red-200 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-red-100",children:"Start Job"}),(0,b.jsx)("button",{onClick:()=>u("completed"),disabled:"in_progress"!==j.status,className:"px-4 py-2 rounded-xl bg-green-100 border border-green-300 text-green-700 font-bold uppercase tracking-wider text-xs hover:bg-green-200 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-green-100",children:"Complete Job"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"p-6 rounded-2xl bg-white border border-gray-200 space-y-4 shadow-sm",children:[(0,b.jsx)("h2",{className:"text-xl font-black uppercase tracking-tight text-black",children:"Service"}),(0,b.jsx)("p",{className:"text-lg font-bold text-black",children:j.service_name}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:j.business_name})]}),(0,b.jsxs)("div",{className:"p-6 rounded-2xl bg-white border border-gray-200 space-y-4 shadow-sm",children:[(0,b.jsx)("h2",{className:"text-xl font-black uppercase tracking-tight text-black",children:"Cost"}),(0,b.jsxs)("p",{className:"text-3xl font-black text-red-600",children:["â‚¦",j.total_cost?.toLocaleString()]})]}),(0,b.jsxs)("div",{className:"p-6 rounded-2xl bg-white border border-gray-200 space-y-4 shadow-sm",children:[(0,b.jsx)("h2",{className:"text-xl font-black uppercase tracking-tight text-black",children:"Schedule"}),(0,b.jsxs)("p",{className:"text-sm text-gray-700",children:["Start: ",j.scheduled_start?new Date(j.scheduled_start).toLocaleString():"Not set"]}),(0,b.jsxs)("p",{className:"text-sm text-gray-700",children:["End: ",j.scheduled_end?new Date(j.scheduled_end).toLocaleString():"Not set"]})]}),(0,b.jsxs)("div",{className:"p-6 rounded-2xl bg-white border border-gray-200 space-y-4 shadow-sm",children:[(0,b.jsx)("h2",{className:"text-xl font-black uppercase tracking-tight text-black",children:"Location"}),(0,b.jsx)("p",{className:"text-sm text-gray-700",children:j.location_address})]})]}),(0,b.jsxs)("div",{className:"p-6 rounded-2xl bg-white border border-gray-200 space-y-4 shadow-sm",children:[(0,b.jsx)("h2",{className:"text-xl font-black uppercase tracking-tight text-black",children:"Assign Staff"}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsxs)("select",{value:n,onChange:a=>o(a.target.value),className:"flex-1 px-4 py-3 rounded-xl bg-white border border-gray-200 text-black focus:outline-none focus:border-red-500 focus:ring-2 focus:ring-red-200 transition-all",children:[(0,b.jsx)("option",{value:"",children:"Select staff member..."}),l.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.first_name," ",a.last_name," - ",a.email]},a.id))]}),(0,b.jsx)("button",{onClick:t,disabled:!n,className:"px-6 py-3 bg-red-600 text-white font-black rounded-xl hover:bg-red-700 transition-all uppercase tracking-wider text-sm disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-red-600",children:"Assign"})]}),j.assignments&&j.assignments.length>0&&(0,b.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,b.jsx)("h3",{className:"text-sm font-bold uppercase tracking-wider text-gray-600",children:"Assigned Staff"}),j.assignments.map((a,c)=>(0,b.jsxs)("div",{className:"p-3 rounded-xl bg-gray-50 border border-gray-200 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"font-bold text-black",children:[a.staff_first_name," ",a.staff_last_name]}),(0,b.jsx)("p",{className:"text-xs text-gray-600",children:a.staff_email})]}),(0,b.jsx)(f.default,{status:a.status,size:"small"})]},c))]})]}),j.special_instructions&&(0,b.jsxs)("div",{className:"p-6 rounded-2xl bg-white border border-gray-200 shadow-sm",children:[(0,b.jsx)("h2",{className:"text-xl font-black uppercase tracking-tight mb-4 text-black",children:"Special Instructions"}),(0,b.jsx)("p",{className:"text-gray-700",children:j.special_instructions})]})]}):(0,b.jsx)("div",{className:"text-center py-12 text-gray-600",children:"Job not found"})}a.s(["default",()=>h])}];

//# sourceMappingURL=_7d44cb1e._.js.map