{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/collinsnnaji/VSCodeDevelopments/convivia24/lib/auth/server.ts"],"sourcesContent":["import { createNeonAuth } from '@neondatabase/auth/next/server';\n\nexport function getAuth() {\n  return createNeonAuth({\n    baseUrl: process.env.NEON_AUTH_BASE_URL!,\n    cookies: {\n      secret: process.env.NEON_AUTH_COOKIE_SECRET!,\n    },\n  });\n}\n\n// Normalize Neon's { data, error } so session?.user works everywhere (dashboard, API routes)\nasync function getSessionNormalized() {\n  const { data } = await getAuth().getSession();\n  const user = data?.user ?? (data as any)?.session?.user;\n  if (!user) return null;\n  return { ...data, user } as { user: { id: string; email?: string | null; name?: string | null; image?: string | null }; [k: string]: unknown };\n}\n\n// Convenience alias â€” call getAuth() in request handlers, not at module level\nexport const auth = {\n  getSession: getSessionNormalized,\n  handler: () => getAuth().handler(),\n  middleware: (config?: { loginUrl?: string }) => getAuth().middleware(config),\n};\n"],"names":[],"mappings":";;;;;;AAAA;;AAEO,SAAS;IACd,OAAO,IAAA,8LAAc,EAAC;QACpB,SAAS,QAAQ,GAAG,CAAC,kBAAkB;QACvC,SAAS;YACP,QAAQ,QAAQ,GAAG,CAAC,uBAAuB;QAC7C;IACF;AACF;AAEA,6FAA6F;AAC7F,eAAe;IACb,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,UAAU,UAAU;IAC3C,MAAM,OAAO,MAAM,QAAS,MAAc,SAAS;IACnD,IAAI,CAAC,MAAM,OAAO;IAClB,OAAO;QAAE,GAAG,IAAI;QAAE;IAAK;AACzB;AAGO,MAAM,OAAO;IAClB,YAAY;IACZ,SAAS,IAAM,UAAU,OAAO;IAChC,YAAY,CAAC,SAAmC,UAAU,UAAU,CAAC;AACvE"}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///Users/collinsnnaji/VSCodeDevelopments/convivia24/app/api/auth/%5B...path%5D/route.ts"],"sourcesContent":["import { getAuth } from '@/lib/auth/server';\nimport type { NextRequest } from 'next/server';\n\nfunction rewriteCookiePath(cookie: string) {\n  const parts = cookie.split(';').map((part) => part.trim());\n  let hasPath = false;\n  const updated = parts.map((part) => {\n    if (part.toLowerCase().startsWith('path=')) {\n      hasPath = true;\n      return 'Path=/';\n    }\n    return part;\n  });\n  if (!hasPath) updated.push('Path=/');\n  return updated.join('; ');\n}\n\n// Next.js 15: context.params is Promise<{ path: string[] }> for [...path]\ntype RouteContext = { params: Promise<{ path: string[] }> };\n\nexport async function GET(request: NextRequest, context: RouteContext) {\n  const { GET: handler } = getAuth().handler();\n  const params = await context.params;\n  const response = await handler(request, { params } as any);\n  const setCookies = (response.headers as any).getSetCookie?.() ?? [];\n  if (setCookies.length === 0) return response;\n\n  const headers = new Headers(response.headers);\n  headers.delete('set-cookie');\n  for (const cookie of setCookies) {\n    headers.append('set-cookie', rewriteCookiePath(cookie));\n  }\n\n  return new Response(response.body, {\n    status: response.status,\n    statusText: response.statusText,\n    headers,\n  });\n}\n\nexport async function POST(request: NextRequest, context: RouteContext) {\n  const { POST: handler } = getAuth().handler();\n  const params = await context.params;\n  const response = await handler(request, { params } as any);\n  const setCookies = (response.headers as any).getSetCookie?.() ?? [];\n  if (setCookies.length === 0) return response;\n\n  const headers = new Headers(response.headers);\n  headers.delete('set-cookie');\n  for (const cookie of setCookies) {\n    headers.append('set-cookie', rewriteCookiePath(cookie));\n  }\n\n  return new Response(response.body, {\n    status: response.status,\n    statusText: response.statusText,\n    headers,\n  });\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAGA,SAAS,kBAAkB,MAAc;IACvC,MAAM,QAAQ,OAAO,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,OAAS,KAAK,IAAI;IACvD,IAAI,UAAU;IACd,MAAM,UAAU,MAAM,GAAG,CAAC,CAAC;QACzB,IAAI,KAAK,WAAW,GAAG,UAAU,CAAC,UAAU;YAC1C,UAAU;YACV,OAAO;QACT;QACA,OAAO;IACT;IACA,IAAI,CAAC,SAAS,QAAQ,IAAI,CAAC;IAC3B,OAAO,QAAQ,IAAI,CAAC;AACtB;AAKO,eAAe,IAAI,OAAoB,EAAE,OAAqB;IACnE,MAAM,EAAE,KAAK,OAAO,EAAE,GAAG,IAAA,kIAAO,IAAG,OAAO;IAC1C,MAAM,SAAS,MAAM,QAAQ,MAAM;IACnC,MAAM,WAAW,MAAM,QAAQ,SAAS;QAAE;IAAO;IACjD,MAAM,aAAa,AAAC,SAAS,OAAO,CAAS,YAAY,QAAQ,EAAE;IACnE,IAAI,WAAW,MAAM,KAAK,GAAG,OAAO;IAEpC,MAAM,UAAU,IAAI,QAAQ,SAAS,OAAO;IAC5C,QAAQ,MAAM,CAAC;IACf,KAAK,MAAM,UAAU,WAAY;QAC/B,QAAQ,MAAM,CAAC,cAAc,kBAAkB;IACjD;IAEA,OAAO,IAAI,SAAS,SAAS,IAAI,EAAE;QACjC,QAAQ,SAAS,MAAM;QACvB,YAAY,SAAS,UAAU;QAC/B;IACF;AACF;AAEO,eAAe,KAAK,OAAoB,EAAE,OAAqB;IACpE,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,IAAA,kIAAO,IAAG,OAAO;IAC3C,MAAM,SAAS,MAAM,QAAQ,MAAM;IACnC,MAAM,WAAW,MAAM,QAAQ,SAAS;QAAE;IAAO;IACjD,MAAM,aAAa,AAAC,SAAS,OAAO,CAAS,YAAY,QAAQ,EAAE;IACnE,IAAI,WAAW,MAAM,KAAK,GAAG,OAAO;IAEpC,MAAM,UAAU,IAAI,QAAQ,SAAS,OAAO;IAC5C,QAAQ,MAAM,CAAC;IACf,KAAK,MAAM,UAAU,WAAY;QAC/B,QAAQ,MAAM,CAAC,cAAc,kBAAkB;IACjD;IAEA,OAAO,IAAI,SAAS,SAAS,IAAI,EAAE;QACjC,QAAQ,SAAS,MAAM;QACvB,YAAY,SAAS,UAAU;QAC/B;IACF;AACF"}}]
}