(globalThis.TURBOPACK || (globalThis.TURBOPACK = [])).push([typeof document === "object" ? document.currentScript : undefined,
"[project]/node_modules/@neondatabase/auth/dist/supabase-adapter-BlcGPyOf.mjs [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "n",
    ()=>BetterAuthVanillaAdapter,
    "t",
    ()=>SupabaseAuthAdapter
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@swc/helpers/esm/_async_to_generator.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_call_super$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@swc/helpers/esm/_call_super.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_class_call_check$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@swc/helpers/esm/_class_call_check.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_create_class$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@swc/helpers/esm/_create_class.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@swc/helpers/esm/_define_property.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_inherits$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@swc/helpers/esm/_inherits.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_instanceof$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@swc/helpers/esm/_instanceof.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_object_spread$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@swc/helpers/esm/_object_spread.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_object_spread_props$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@swc/helpers/esm/_object_spread_props.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_to_consumable_array$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@swc/helpers/esm/_to_consumable_array.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_type_of$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@swc/helpers/esm/_type_of.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__ = __turbopack_context__.i("[project]/node_modules/tslib/tslib.es6.mjs [app-client] (ecmascript) <export __generator as _>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$dist$2f$adapter$2d$core$2d$CtmnMMJ7$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@neondatabase/auth/dist/adapter-core-CtmnMMJ7.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$dist$2f$constants$2d$Cupc_bln$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@neondatabase/auth/dist/constants-Cupc_bln.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f$better$2d$auth$2f$dist$2f$client$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@neondatabase/auth/node_modules/better-auth/dist/client/index.mjs [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f$better$2d$auth$2f$dist$2f$client$2d$BJRbyWu7$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__r__as__createAuthClient$3e$__ = __turbopack_context__.i("[project]/node_modules/@neondatabase/auth/node_modules/better-auth/dist/client-BJRbyWu7.mjs [app-client] (ecmascript) <export r as createAuthClient>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f$better$2d$auth$2f$dist$2f$proxy$2d$DNjQepc2$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__s__as__getGlobalBroadcastChannel$3e$__ = __turbopack_context__.i("[project]/node_modules/@neondatabase/auth/node_modules/better-auth/dist/proxy-DNjQepc2.mjs [app-client] (ecmascript) <export s as getGlobalBroadcastChannel>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f40$supabase$2f$auth$2d$js$2f$dist$2f$module$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@neondatabase/auth/node_modules/@supabase/auth-js/dist/module/index.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f40$supabase$2f$auth$2d$js$2f$dist$2f$module$2f$lib$2f$errors$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@neondatabase/auth/node_modules/@supabase/auth-js/dist/module/lib/errors.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$jose$2f$dist$2f$webapi$2f$util$2f$base64url$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__base64url$3e$__ = __turbopack_context__.i("[project]/node_modules/jose/dist/webapi/util/base64url.js [app-client] (ecmascript) <export * as base64url>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$jose$2f$dist$2f$webapi$2f$util$2f$decode_jwt$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/jose/dist/webapi/util/decode_jwt.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$jose$2f$dist$2f$webapi$2f$util$2f$decode_protected_header$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/jose/dist/webapi/util/decode_protected_header.js [app-client] (ecmascript)");
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
//#region src/adapters/better-auth-vanilla/better-auth-vanilla-adapter.ts
/**
* Internal implementation class - use BetterAuthVanillaAdapter factory function instead
*/ var BetterAuthVanillaAdapterImpl = /*#__PURE__*/ function(NeonAuthAdapterCore) {
    "use strict";
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_inherits$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(BetterAuthVanillaAdapterImpl, NeonAuthAdapterCore);
    function BetterAuthVanillaAdapterImpl(betterAuthClientOptions) {
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_class_call_check$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(this, BetterAuthVanillaAdapterImpl);
        var _this;
        _this = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_call_super$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(this, BetterAuthVanillaAdapterImpl, [
            betterAuthClientOptions
        ]), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this, "_betterAuth", void 0);
        _this._betterAuth = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f$better$2d$auth$2f$dist$2f$client$2d$BJRbyWu7$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__r__as__createAuthClient$3e$__["createAuthClient"])(_this.betterAuthOptions);
        return _this;
    }
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_create_class$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(BetterAuthVanillaAdapterImpl, [
        {
            key: "getBetterAuthInstance",
            value: function getBetterAuthInstance() {
                return this._betterAuth;
            }
        }
    ]);
    return BetterAuthVanillaAdapterImpl;
}(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$dist$2f$adapter$2d$core$2d$CtmnMMJ7$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["t"]);
/**
* Factory function that returns an adapter builder.
* The builder is called by createClient/createAuthClient with the URL.
*
* @param options - Optional adapter configuration (baseURL is injected separately)
* @returns A builder function that creates the adapter instance
*
* @example
* ```typescript
* const client = createClient({
*   auth: {
*     url: 'https://auth.example.com',
*     adapter: BetterAuthVanillaAdapter(),
*   },
*   dataApi: { url: 'https://data-api.example.com' },
* });
* ```
*/ function BetterAuthVanillaAdapter(options) {
    return function(url, fetchOptions) {
        var _options_fetchOptions;
        return new BetterAuthVanillaAdapterImpl((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_object_spread_props$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_object_spread$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])({
            baseURL: url
        }, options), {
            fetchOptions: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_object_spread_props$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_object_spread$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])({}, options === null || options === void 0 ? void 0 : options.fetchOptions), {
                headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_object_spread$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])({}, options === null || options === void 0 ? void 0 : (_options_fetchOptions = options.fetchOptions) === null || _options_fetchOptions === void 0 ? void 0 : _options_fetchOptions.headers, fetchOptions === null || fetchOptions === void 0 ? void 0 : fetchOptions.headers)
            })
        }));
    };
}
//#endregion
//#region src/utils/date.ts
function toISOString(date) {
    if (!date) return /* @__PURE__ */ new Date().toISOString();
    if (typeof date === "string") return date;
    if (typeof date === "number") return new Date(date).toISOString();
    return date.toISOString();
}
//#endregion
//#region src/adapters/supabase/errors/definitions.ts
/**
* Error codes for type-safe error handling
*/ var AuthErrorCode = {
    BadJwt: "bad_jwt",
    InvalidCredentials: "invalid_credentials",
    SessionExpired: "session_expired",
    SessionNotFound: "session_not_found",
    InvalidGrant: "invalid_grant",
    UserNotFound: "user_not_found",
    UserAlreadyExists: "user_already_exists",
    EmailExists: "email_exists",
    PhoneExists: "phone_exists",
    EmailNotConfirmed: "email_not_confirmed",
    PhoneNotConfirmed: "phone_not_confirmed",
    ValidationFailed: "validation_failed",
    BadJson: "bad_json",
    WeakPassword: "weak_password",
    EmailAddressInvalid: "email_address_invalid",
    FeatureNotSupported: "feature_not_supported",
    NotImplemented: "not_implemented",
    OAuthProviderNotSupported: "oauth_provider_not_supported",
    PhoneProviderDisabled: "phone_provider_disabled",
    MagicLinkNotSupported: "magic_link_not_supported",
    SsoProviderDisabled: "sso_provider_disabled",
    AnonymousProviderDisabled: "anonymous_provider_disabled",
    Web3ProviderDisabled: "web3_provider_disabled",
    BadOAuthCallback: "bad_oauth_callback",
    OAuthCallbackFailed: "oauth_callback_failed",
    OverRequestRateLimit: "over_request_rate_limit",
    OverEmailSendRateLimit: "over_email_send_rate_limit",
    OverSmsSendRateLimit: "over_sms_send_rate_limit",
    UnexpectedFailure: "unexpected_failure",
    InternalError: "internal_error",
    IdentityNotFound: "identity_not_found",
    UnknownError: "unknown_error"
};
var _obj;
/**
* Complete error definitions map
* Maps error codes to HTTP status codes and default messages
*/ var ERROR_DEFINITIONS = (_obj = {}, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.BadJwt, {
    code: AuthErrorCode.BadJwt,
    status: 401,
    message: "Invalid or expired session token",
    description: "The JWT token is malformed, expired, or has an invalid signature"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.InvalidCredentials, {
    code: AuthErrorCode.InvalidCredentials,
    status: 401,
    message: "Invalid email or password",
    description: "The provided credentials do not match any user account"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.SessionExpired, {
    code: AuthErrorCode.SessionExpired,
    status: 401,
    message: "Session has expired",
    description: "The user session has exceeded its timeout period"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.SessionNotFound, {
    code: AuthErrorCode.SessionNotFound,
    status: 401,
    message: "No active session found",
    description: "The user does not have an active session or the session was invalidated"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.InvalidGrant, {
    code: AuthErrorCode.InvalidGrant,
    status: 401,
    message: "Invalid authorization grant",
    description: "OAuth/OIDC grant validation failed"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.UserNotFound, {
    code: AuthErrorCode.UserNotFound,
    status: 404,
    message: "User not found",
    description: "No user exists with the provided identifier"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.UserAlreadyExists, {
    code: AuthErrorCode.UserAlreadyExists,
    status: 409,
    message: "User already exists",
    description: "A user with this email or phone number is already registered"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.EmailExists, {
    code: AuthErrorCode.EmailExists,
    status: 409,
    message: "Email address already registered",
    description: "This email address is already associated with an account"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.PhoneExists, {
    code: AuthErrorCode.PhoneExists,
    status: 409,
    message: "Phone number already registered",
    description: "This phone number is already associated with an account"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.EmailNotConfirmed, {
    code: AuthErrorCode.EmailNotConfirmed,
    status: 422,
    message: "Email verification required",
    description: "The user must verify their email before signing in"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.PhoneNotConfirmed, {
    code: AuthErrorCode.PhoneNotConfirmed,
    status: 422,
    message: "Phone verification required",
    description: "The user must verify their phone number before signing in"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.ValidationFailed, {
    code: AuthErrorCode.ValidationFailed,
    status: 400,
    message: "Invalid request parameters",
    description: "One or more request parameters are invalid or missing"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.BadJson, {
    code: AuthErrorCode.BadJson,
    status: 400,
    message: "Invalid JSON in request body",
    description: "The request body contains malformed JSON"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.WeakPassword, {
    code: AuthErrorCode.WeakPassword,
    status: 400,
    message: "Password does not meet security requirements",
    description: "The password is too weak or does not meet complexity requirements"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.EmailAddressInvalid, {
    code: AuthErrorCode.EmailAddressInvalid,
    status: 400,
    message: "Invalid email address format",
    description: "The provided email address is not in a valid format"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.FeatureNotSupported, {
    code: AuthErrorCode.FeatureNotSupported,
    status: 403,
    message: "Feature not available",
    description: "This feature is not supported in the current configuration"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.NotImplemented, {
    code: AuthErrorCode.NotImplemented,
    status: 501,
    message: "Feature not implemented",
    description: "This feature has not been implemented yet"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.OAuthProviderNotSupported, {
    code: AuthErrorCode.OAuthProviderNotSupported,
    status: 403,
    message: "OAuth provider not supported",
    description: "The requested OAuth provider is not enabled"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.PhoneProviderDisabled, {
    code: AuthErrorCode.PhoneProviderDisabled,
    status: 403,
    message: "Phone authentication not available",
    description: "Phone number authentication is not enabled"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.MagicLinkNotSupported, {
    code: AuthErrorCode.MagicLinkNotSupported,
    status: 403,
    message: "Magic link authentication not available",
    description: "Magic link authentication is not supported"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.SsoProviderDisabled, {
    code: AuthErrorCode.SsoProviderDisabled,
    status: 403,
    message: "SSO not supported",
    description: "Enterprise SSO authentication is not available"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.AnonymousProviderDisabled, {
    code: AuthErrorCode.AnonymousProviderDisabled,
    status: 403,
    message: "Anonymous authentication not available",
    description: "Anonymous sign-in is not enabled"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.Web3ProviderDisabled, {
    code: AuthErrorCode.Web3ProviderDisabled,
    status: 403,
    message: "Web3 authentication not supported",
    description: "Web3/blockchain authentication is not available"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.BadOAuthCallback, {
    code: AuthErrorCode.BadOAuthCallback,
    status: 400,
    message: "Invalid OAuth callback",
    description: "The OAuth callback request is missing required parameters"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.OAuthCallbackFailed, {
    code: AuthErrorCode.OAuthCallbackFailed,
    status: 500,
    message: "OAuth authentication failed",
    description: "The OAuth callback completed but no session was created"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.OverRequestRateLimit, {
    code: AuthErrorCode.OverRequestRateLimit,
    status: 429,
    message: "Too many requests",
    description: "Rate limit exceeded. Please try again later"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.OverEmailSendRateLimit, {
    code: AuthErrorCode.OverEmailSendRateLimit,
    status: 429,
    message: "Too many email requests",
    description: "Too many emails sent. Please wait before trying again"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.OverSmsSendRateLimit, {
    code: AuthErrorCode.OverSmsSendRateLimit,
    status: 429,
    message: "Too many SMS requests",
    description: "Too many SMS messages sent. Please wait before trying again"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.UnexpectedFailure, {
    code: AuthErrorCode.UnexpectedFailure,
    status: 500,
    message: "An unexpected error occurred",
    description: "The server encountered an unexpected condition"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.InternalError, {
    code: AuthErrorCode.InternalError,
    status: 500,
    message: "Internal server error",
    description: "An internal error occurred while processing the request"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.IdentityNotFound, {
    code: AuthErrorCode.IdentityNotFound,
    status: 404,
    message: "Identity not found",
    description: "The requested user identity does not exist"
}), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_obj, AuthErrorCode.UnknownError, {
    code: AuthErrorCode.UnknownError,
    status: 500,
    message: "An unknown error occurred",
    description: "The error could not be categorized"
}), _obj);
/**
* Helper to get error definition by code
*/ function getErrorDefinition(code) {
    return ERROR_DEFINITIONS[code];
}
/**
* Create an AuthError or AuthApiError with proper status and message
*
* @param code - The error code from AuthErrorCode
* @param customMessage - Optional custom message (defaults to error definition message)
* @returns AuthError for 5xx errors, AuthApiError for 4xx errors
*/ function createAuthError(code, customMessage) {
    var def = getErrorDefinition(code);
    var message = customMessage || def.message;
    var status = def.status;
    if (status !== 500 && status !== 501 && status !== 503) return new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f40$supabase$2f$auth$2d$js$2f$dist$2f$module$2f$lib$2f$errors$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["AuthApiError"](message, status, def.code);
    return new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f40$supabase$2f$auth$2d$js$2f$dist$2f$module$2f$lib$2f$errors$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["AuthError"](message, status, def.code);
}
//#endregion
//#region src/adapters/supabase/errors/mappings.ts
/**
* Maps Better Auth error codes to AuthErrorCode
* Based on Better Auth SDK error codes
*
* @see https://www.better-auth.com/docs/concepts/error-handling
*/ var BETTER_AUTH_ERROR_MAP = {
    "INVALID_EMAIL_OR_PASSWORD": AuthErrorCode.InvalidCredentials,
    "INVALID_PASSWORD": AuthErrorCode.InvalidCredentials,
    "INVALID_EMAIL": AuthErrorCode.EmailAddressInvalid,
    "USER_NOT_FOUND": AuthErrorCode.UserNotFound,
    "INVALID_TOKEN": AuthErrorCode.BadJwt,
    "SESSION_EXPIRED": AuthErrorCode.SessionExpired,
    "FAILED_TO_GET_SESSION": AuthErrorCode.SessionNotFound,
    "USER_ALREADY_EXISTS": AuthErrorCode.UserAlreadyExists,
    "EMAIL_NOT_VERIFIED": AuthErrorCode.EmailNotConfirmed,
    "USER_EMAIL_NOT_FOUND": AuthErrorCode.UserNotFound,
    "PASSWORD_TOO_SHORT": AuthErrorCode.WeakPassword,
    "PASSWORD_TOO_LONG": AuthErrorCode.WeakPassword,
    "USER_ALREADY_HAS_PASSWORD": AuthErrorCode.ValidationFailed,
    "CREDENTIAL_ACCOUNT_NOT_FOUND": AuthErrorCode.IdentityNotFound,
    "FAILED_TO_UNLINK_LAST_ACCOUNT": AuthErrorCode.ValidationFailed,
    "ACCOUNT_NOT_FOUND": AuthErrorCode.IdentityNotFound,
    "SOCIAL_ACCOUNT_ALREADY_LINKED": AuthErrorCode.ValidationFailed,
    "PROVIDER_NOT_FOUND": AuthErrorCode.OAuthProviderNotSupported,
    "ID_TOKEN_NOT_SUPPORTED": AuthErrorCode.FeatureNotSupported,
    "FAILED_TO_CREATE_USER": AuthErrorCode.InternalError,
    "FAILED_TO_CREATE_SESSION": AuthErrorCode.InternalError,
    "FAILED_TO_UPDATE_USER": AuthErrorCode.InternalError,
    "EMAIL_CAN_NOT_BE_UPDATED": AuthErrorCode.FeatureNotSupported
};
/**
* Maps HTTP status codes from Better Auth to AuthErrorCode
*/ var STATUS_CODE_ERROR_MAP = {
    400: AuthErrorCode.ValidationFailed,
    401: AuthErrorCode.BadJwt,
    403: AuthErrorCode.FeatureNotSupported,
    404: AuthErrorCode.UserNotFound,
    409: AuthErrorCode.UserAlreadyExists,
    422: AuthErrorCode.ValidationFailed,
    429: AuthErrorCode.OverRequestRateLimit,
    500: AuthErrorCode.UnexpectedFailure,
    501: AuthErrorCode.NotImplemented,
    503: AuthErrorCode.FeatureNotSupported
};
//#endregion
//#region src/core/better-auth-helpers.ts
/**
* Normalize Better Auth errors to standard AuthError format
*
* Handles three error formats:
* 1. BetterFetchError: { status, statusText, message?, code? }
* 2. BetterAuthErrorResponse: { status, statusText, message?, code? }
* 3. Standard Error: { message, name, stack }
*
* Maps Better Auth errors to appropriate AuthError/AuthApiError with:
* - Correct HTTP status codes
* - Standard error codes (snake_case)
* - User-friendly, security-conscious messages
*/ function normalizeBetterAuthError(error) {
    if (error !== null && error !== void 0 && (typeof error === "undefined" ? "undefined" : (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_type_of$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(error)) === "object" && "status" in error && "statusText" in error) {
        var betterError = error;
        var status = betterError.status;
        if ("code" in betterError && betterError.code && typeof betterError.code === "string") {
            var mappedCode = BETTER_AUTH_ERROR_MAP[betterError.code];
            if (mappedCode) {
                var def$2 = getErrorDefinition(mappedCode);
                return createNormalizedError(def$2.message, def$2.status, def$2.code, status);
            }
        }
        var def$1 = getErrorDefinition(mapStatusCodeToErrorCode(status, betterError.message || betterError.statusText));
        return createNormalizedError(betterError.message || def$1.message, status, def$1.code, status);
    }
    if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_instanceof$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(error, Error)) {
        var def$11 = getErrorDefinition(mapMessageToErrorCode(error.message));
        return createNormalizedError(error.message || def$11.message, def$11.status, def$11.code, def$11.status);
    }
    var def = getErrorDefinition(AuthErrorCode.UnknownError);
    return new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f40$supabase$2f$auth$2d$js$2f$dist$2f$module$2f$lib$2f$errors$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["AuthError"](def.message, def.status, def.code);
}
/**
* Map HTTP status code to AuthErrorCode
* Uses message content for disambiguation when status code is ambiguous
*/ function mapStatusCodeToErrorCode(status, message) {
    var lowerMessage = (message === null || message === void 0 ? void 0 : message.toLowerCase()) || "";
    switch(status){
        case 401:
            if (lowerMessage.includes("token") || lowerMessage.includes("jwt")) return AuthErrorCode.BadJwt;
            if (lowerMessage.includes("session")) return AuthErrorCode.SessionNotFound;
            if (lowerMessage.includes("expired")) return AuthErrorCode.SessionExpired;
            return AuthErrorCode.InvalidCredentials;
        case 404:
            if (lowerMessage.includes("identity") || lowerMessage.includes("account")) return AuthErrorCode.IdentityNotFound;
            if (lowerMessage.includes("session")) return AuthErrorCode.SessionNotFound;
            return AuthErrorCode.UserNotFound;
        case 409:
            if (lowerMessage.includes("email")) return AuthErrorCode.EmailExists;
            if (lowerMessage.includes("phone")) return AuthErrorCode.PhoneExists;
            return AuthErrorCode.UserAlreadyExists;
        case 422:
            if (lowerMessage.includes("email") && lowerMessage.includes("confirm")) return AuthErrorCode.EmailNotConfirmed;
            if (lowerMessage.includes("phone") && lowerMessage.includes("confirm")) return AuthErrorCode.PhoneNotConfirmed;
            return AuthErrorCode.ValidationFailed;
        case 429:
            if (lowerMessage.includes("email")) return AuthErrorCode.OverEmailSendRateLimit;
            if (lowerMessage.includes("sms") || lowerMessage.includes("phone")) return AuthErrorCode.OverSmsSendRateLimit;
            return AuthErrorCode.OverRequestRateLimit;
        case 400:
            if (lowerMessage.includes("password") && lowerMessage.includes("weak")) return AuthErrorCode.WeakPassword;
            if (lowerMessage.includes("email") && lowerMessage.includes("invalid")) return AuthErrorCode.EmailAddressInvalid;
            if (lowerMessage.includes("json")) return AuthErrorCode.BadJson;
            if (lowerMessage.includes("oauth") || lowerMessage.includes("callback")) return AuthErrorCode.BadOAuthCallback;
            return AuthErrorCode.ValidationFailed;
        case 403:
            if (lowerMessage.includes("provider") || lowerMessage.includes("oauth")) return AuthErrorCode.OAuthProviderNotSupported;
            if (lowerMessage.includes("phone")) return AuthErrorCode.PhoneProviderDisabled;
            if (lowerMessage.includes("sso")) return AuthErrorCode.SsoProviderDisabled;
            return AuthErrorCode.FeatureNotSupported;
        case 501:
            return AuthErrorCode.NotImplemented;
        case 503:
            return AuthErrorCode.FeatureNotSupported;
        default:
            if (lowerMessage.includes("oauth")) return AuthErrorCode.OAuthCallbackFailed;
            return AuthErrorCode.UnexpectedFailure;
    }
}
/**
* Map error message content to AuthErrorCode
* Used as fallback when status code is not available
*/ function mapMessageToErrorCode(message) {
    var lower = message.toLowerCase();
    if (lower.includes("invalid login") || lower.includes("incorrect") || lower.includes("wrong password")) return AuthErrorCode.InvalidCredentials;
    if (lower.includes("token") && (lower.includes("invalid") || lower.includes("expired"))) return AuthErrorCode.BadJwt;
    if (lower.includes("session") && lower.includes("expired")) return AuthErrorCode.SessionExpired;
    if (lower.includes("session") && lower.includes("not found")) return AuthErrorCode.SessionNotFound;
    if (lower.includes("already exists") || lower.includes("already registered")) return AuthErrorCode.UserAlreadyExists;
    if (lower.includes("not found") && lower.includes("user")) return AuthErrorCode.UserNotFound;
    if (lower.includes("not found") && lower.includes("identity")) return AuthErrorCode.IdentityNotFound;
    if (lower.includes("email") && lower.includes("not confirmed")) return AuthErrorCode.EmailNotConfirmed;
    if (lower.includes("phone") && lower.includes("not confirmed")) return AuthErrorCode.PhoneNotConfirmed;
    if (lower.includes("weak password") || lower.includes("password") && lower.includes("requirements")) return AuthErrorCode.WeakPassword;
    if (lower.includes("email") && lower.includes("invalid")) return AuthErrorCode.EmailAddressInvalid;
    if (lower.includes("rate limit") || lower.includes("too many requests")) return AuthErrorCode.OverRequestRateLimit;
    if (lower.includes("oauth") && lower.includes("failed")) return AuthErrorCode.OAuthCallbackFailed;
    if (lower.includes("provider") && lower.includes("not supported")) return AuthErrorCode.OAuthProviderNotSupported;
    return AuthErrorCode.UnexpectedFailure;
}
/**
* Create normalized error with correct type (AuthError vs AuthApiError)
* Uses AuthApiError for non-500 status codes (API/client errors)
* Uses AuthError for 500 status codes (server errors)
*/ function createNormalizedError(message, targetStatus, code, _originalStatus) {
    var status = targetStatus;
    if (status !== 500 && status !== 501 && status !== 503) return new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f40$supabase$2f$auth$2d$js$2f$dist$2f$module$2f$lib$2f$errors$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["AuthApiError"](message, status, code);
    return new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f40$supabase$2f$auth$2d$js$2f$dist$2f$module$2f$lib$2f$errors$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["AuthError"](message, status, code);
}
/**
* Map Better Auth session to Session format
*/ function mapBetterAuthSession(betterAuthSession, betterAuthUser) {
    if (!betterAuthSession || !betterAuthUser) return null;
    var expiresAt;
    if (typeof betterAuthSession.expiresAt === "string") expiresAt = Math.floor(new Date(betterAuthSession.expiresAt).getTime() / 1e3);
    else if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_type_of$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(betterAuthSession.expiresAt) === "object" && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_instanceof$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(betterAuthSession.expiresAt, Date)) expiresAt = Math.floor(betterAuthSession.expiresAt.getTime() / 1e3);
    else expiresAt = Math.floor(Date.now() / 1e3) + Math.floor(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$dist$2f$constants$2d$Cupc_bln$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["n"] / 1e3);
    var now = Math.floor(Date.now() / 1e3);
    var expiresIn = Math.max(0, expiresAt - now);
    return {
        access_token: betterAuthSession.token,
        refresh_token: "",
        expires_at: expiresAt,
        expires_in: expiresIn,
        token_type: "bearer",
        user: mapBetterAuthUser(betterAuthUser)
    };
}
/**
* Map Better Auth user to User format
*/ function mapBetterAuthUser(betterAuthUser) {
    var createdAt = toISOString(betterAuthUser.createdAt);
    var updatedAt = toISOString(betterAuthUser.updatedAt);
    var userMetadata = {};
    if (betterAuthUser.name) userMetadata.displayName = betterAuthUser.name;
    if (betterAuthUser.image) userMetadata.profileImageUrl = betterAuthUser.image;
    var userRecord = betterAuthUser;
    var _iteratorNormalCompletion = true, _didIteratorError = false, _iteratorError = undefined;
    try {
        for(var _iterator = Object.keys(userRecord)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true){
            var key = _step.value;
            if (![
                "id",
                "email",
                "emailVerified",
                "name",
                "image",
                "createdAt",
                "updatedAt"
            ].includes(key)) userMetadata[key] = userRecord[key];
        }
    } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
    } finally{
        try {
            if (!_iteratorNormalCompletion && _iterator.return != null) {
                _iterator.return();
            }
        } finally{
            if (_didIteratorError) {
                throw _iteratorError;
            }
        }
    }
    return {
        id: betterAuthUser.id,
        email: betterAuthUser.email || "",
        email_confirmed_at: betterAuthUser.emailVerified ? createdAt : void 0,
        phone: void 0,
        confirmed_at: betterAuthUser.emailVerified ? createdAt : void 0,
        last_sign_in_at: updatedAt,
        app_metadata: {},
        user_metadata: userMetadata,
        identities: [],
        created_at: createdAt,
        updated_at: updatedAt,
        aud: "authenticated",
        role: "authenticated"
    };
}
function mapBetterAuthIdentity(betterAuthUserIdentityAccount, accountInfoData) {
    return {
        id: betterAuthUserIdentityAccount.id,
        user_id: betterAuthUserIdentityAccount.id,
        identity_id: betterAuthUserIdentityAccount.accountId,
        provider: betterAuthUserIdentityAccount.providerId,
        created_at: toISOString(betterAuthUserIdentityAccount.createdAt),
        updated_at: toISOString(betterAuthUserIdentityAccount.updatedAt),
        last_sign_in_at: toISOString(betterAuthUserIdentityAccount.updatedAt),
        identity_data: accountInfoData ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_object_spread$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])({
            provider: betterAuthUserIdentityAccount.providerId,
            provider_id: betterAuthUserIdentityAccount.accountId,
            scopes: betterAuthUserIdentityAccount.scopes,
            email: accountInfoData.data.email,
            name: accountInfoData.data.user.name,
            picture: accountInfoData.data.user.picture,
            email_verified: accountInfoData.data.user.email_verified
        }, accountInfoData.data) : {
            provider: betterAuthUserIdentityAccount.providerId,
            provider_id: betterAuthUserIdentityAccount.accountId,
            scopes: betterAuthUserIdentityAccount.scopes
        }
    };
}
//#endregion
//#region src/adapters/supabase/supabase-adapter.ts
/**
* Duck-type check for Better Auth API errors.
* Replaces `instanceof APIError` to avoid importing server-side code.
*/ function isBetterAuthAPIError(error) {
    return error !== null && (typeof error === "undefined" ? "undefined" : (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_type_of$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(error)) === "object" && "status" in error && typeof error.status === "number";
}
/**
* Internal implementation class - use SupabaseAuthAdapter factory function instead
*/ var SupabaseAuthAdapterImpl = /*#__PURE__*/ function(NeonAuthAdapterCore) {
    "use strict";
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_inherits$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(SupabaseAuthAdapterImpl, NeonAuthAdapterCore);
    function SupabaseAuthAdapterImpl(betterAuthClientOptions) {
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_class_call_check$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(this, SupabaseAuthAdapterImpl);
        var _this;
        var _this1;
        _this = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_call_super$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(this, SupabaseAuthAdapterImpl, [
            betterAuthClientOptions
        ]), _this1 = _this, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "admin", void 0), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "mfa", void 0), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "oauth", void 0), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "_betterAuth", void 0), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "_stateChangeEmitters", /* @__PURE__ */ new Map()), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "initialize", function() {
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                var session, error;
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                    switch(_state.label){
                        case 0:
                            _state.trys.push([
                                0,
                                2,
                                ,
                                3
                            ]);
                            return [
                                4,
                                _this1.getSession()
                            ];
                        case 1:
                            session = _state.sent();
                            if (session.error) throw session.error;
                            return [
                                2,
                                {
                                    data: session.data,
                                    error: null
                                }
                            ];
                        case 2:
                            error = _state.sent();
                            if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f40$supabase$2f$auth$2d$js$2f$dist$2f$module$2f$lib$2f$errors$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isAuthError"])(error)) return [
                                2,
                                {
                                    data: {
                                        session: null
                                    },
                                    error: error
                                }
                            ];
                            if (isBetterAuthAPIError(error)) return [
                                2,
                                {
                                    data: {
                                        session: null
                                    },
                                    error: normalizeBetterAuthError(error)
                                }
                            ];
                            throw error;
                        case 3:
                            return [
                                2
                            ];
                    }
                });
            })();
        }), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "refreshSession", function() {
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                var _sessionResult_data_session, sessionResult, _sessionResult_data_session_user, error;
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                    switch(_state.label){
                        case 0:
                            _state.trys.push([
                                0,
                                2,
                                ,
                                3
                            ]);
                            return [
                                4,
                                _this1.getSession()
                            ];
                        case 1:
                            sessionResult = _state.sent();
                            if (sessionResult.error) throw sessionResult.error;
                            return [
                                2,
                                {
                                    data: {
                                        user: (_sessionResult_data_session_user = (_sessionResult_data_session = sessionResult.data.session) === null || _sessionResult_data_session === void 0 ? void 0 : _sessionResult_data_session.user) !== null && _sessionResult_data_session_user !== void 0 ? _sessionResult_data_session_user : null,
                                        session: sessionResult.data.session
                                    },
                                    error: null
                                }
                            ];
                        case 2:
                            error = _state.sent();
                            if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f40$supabase$2f$auth$2d$js$2f$dist$2f$module$2f$lib$2f$errors$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isAuthError"])(error)) return [
                                2,
                                {
                                    data: {
                                        user: null,
                                        session: null
                                    },
                                    error: error
                                }
                            ];
                            if (isBetterAuthAPIError(error)) return [
                                2,
                                {
                                    data: {
                                        user: null,
                                        session: null
                                    },
                                    error: normalizeBetterAuthError(error)
                                }
                            ];
                            throw error;
                        case 3:
                            return [
                                2
                            ];
                    }
                });
            })();
        }), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "setSession", function() {
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                    return [
                        2,
                        {
                            data: {
                                user: null,
                                session: null
                            },
                            error: createAuthError(AuthErrorCode.NotImplemented, "setSession() is not supported by Better Auth. Use signInWithPassword() instead.")
                        }
                    ];
                });
            })();
        }), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "signUp", function(credentials) {
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                var _credentials_options, _credentials_options1, _credentials_options2, _sessionResult_data_session, displayName, result, sessionResult, error;
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                    switch(_state.label){
                        case 0:
                            _state.trys.push([
                                0,
                                5,
                                ,
                                6
                            ]);
                            if (!("email" in credentials && credentials.email && credentials.password)) return [
                                3,
                                3
                            ];
                            displayName = ((_credentials_options = credentials.options) === null || _credentials_options === void 0 ? void 0 : _credentials_options.data) && "displayName" in credentials.options.data && typeof credentials.options.data.displayName === "string" ? credentials.options.data.displayName : "";
                            return [
                                4,
                                _this1._betterAuth.signUp.email((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_object_spread$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])({
                                    email: credentials.email,
                                    password: credentials.password,
                                    name: displayName,
                                    callbackURL: (_credentials_options1 = credentials.options) === null || _credentials_options1 === void 0 ? void 0 : _credentials_options1.emailRedirectTo
                                }, (_credentials_options2 = credentials.options) === null || _credentials_options2 === void 0 ? void 0 : _credentials_options2.data))
                            ];
                        case 1:
                            result = _state.sent();
                            if (result.error) throw normalizeBetterAuthError(result.error);
                            return [
                                4,
                                _this1.getSession()
                            ];
                        case 2:
                            sessionResult = _state.sent();
                            if (!((_sessionResult_data_session = sessionResult.data.session) === null || _sessionResult_data_session === void 0 ? void 0 : _sessionResult_data_session.user)) throw createAuthError(AuthErrorCode.SessionNotFound, "Failed to retrieve user session");
                            return [
                                2,
                                {
                                    data: {
                                        user: sessionResult.data.session.user,
                                        session: sessionResult.data.session
                                    },
                                    error: null
                                }
                            ];
                        case 3:
                            if ("phone" in credentials && credentials.phone) throw createAuthError(AuthErrorCode.PhoneProviderDisabled, "Phone sign-up not supported");
                            else throw createAuthError(AuthErrorCode.ValidationFailed, "Invalid credentials format");
                            _state.label = 4;
                        case 4:
                            return [
                                3,
                                6
                            ];
                        case 5:
                            error = _state.sent();
                            if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f40$supabase$2f$auth$2d$js$2f$dist$2f$module$2f$lib$2f$errors$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isAuthError"])(error)) return [
                                2,
                                {
                                    data: {
                                        user: null,
                                        session: null
                                    },
                                    error: error
                                }
                            ];
                            if (isBetterAuthAPIError(error)) return [
                                2,
                                {
                                    data: {
                                        user: null,
                                        session: null
                                    },
                                    error: normalizeBetterAuthError(error)
                                }
                            ];
                            throw error;
                        case 6:
                            return [
                                2
                            ];
                    }
                });
            })();
        }), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "signInAnonymously", function() {
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                    return [
                        2,
                        {
                            data: {
                                user: null,
                                session: null
                            },
                            error: createAuthError(AuthErrorCode.AnonymousProviderDisabled, "Anonymous sign-in is not supported. To allow unauthenticated access with an anonymous JWT, use the allowAnonymous option in your Auth configuration instead.")
                        }
                    ];
                });
            })();
        }), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "signInWithPassword", function(credentials) {
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                var _sessionResult_data_session, result, sessionResult, error;
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                    switch(_state.label){
                        case 0:
                            _state.trys.push([
                                0,
                                5,
                                ,
                                6
                            ]);
                            if (!("email" in credentials && credentials.email)) return [
                                3,
                                3
                            ];
                            return [
                                4,
                                _this1._betterAuth.signIn.email({
                                    email: credentials.email,
                                    password: credentials.password
                                })
                            ];
                        case 1:
                            result = _state.sent();
                            if (result.error) throw normalizeBetterAuthError(result.error);
                            return [
                                4,
                                _this1.getSession()
                            ];
                        case 2:
                            sessionResult = _state.sent();
                            if (!((_sessionResult_data_session = sessionResult.data.session) === null || _sessionResult_data_session === void 0 ? void 0 : _sessionResult_data_session.user)) throw createAuthError(AuthErrorCode.SessionNotFound, "Failed to retrieve user session");
                            return [
                                2,
                                {
                                    data: {
                                        user: sessionResult.data.session.user,
                                        session: sessionResult.data.session
                                    },
                                    error: null
                                }
                            ];
                        case 3:
                            if ("phone" in credentials && credentials.phone) throw createAuthError(AuthErrorCode.PhoneProviderDisabled, "Phone sign-in not supported");
                            else throw createAuthError(AuthErrorCode.ValidationFailed, "Invalid credentials format");
                            _state.label = 4;
                        case 4:
                            return [
                                3,
                                6
                            ];
                        case 5:
                            error = _state.sent();
                            if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f40$supabase$2f$auth$2d$js$2f$dist$2f$module$2f$lib$2f$errors$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isAuthError"])(error)) return [
                                2,
                                {
                                    data: {
                                        user: null,
                                        session: null
                                    },
                                    error: error
                                }
                            ];
                            if (isBetterAuthAPIError(error)) return [
                                2,
                                {
                                    data: {
                                        user: null,
                                        session: null
                                    },
                                    error: normalizeBetterAuthError(error)
                                }
                            ];
                            throw error;
                        case 6:
                            return [
                                2
                            ];
                    }
                });
            })();
        }), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "signInWithOAuth", function(credentials) {
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                var _options_scopes, provider, options, error;
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                    switch(_state.label){
                        case 0:
                            _state.trys.push([
                                0,
                                2,
                                ,
                                3
                            ]);
                            provider = credentials.provider, options = credentials.options;
                            return [
                                4,
                                _this1._betterAuth.signIn.social({
                                    provider: provider,
                                    scopes: options === null || options === void 0 ? void 0 : (_options_scopes = options.scopes) === null || _options_scopes === void 0 ? void 0 : _options_scopes.split(" "),
                                    disableRedirect: options === null || options === void 0 ? void 0 : options.skipBrowserRedirect,
                                    callbackURL: (options === null || options === void 0 ? void 0 : options.redirectTo) || (globalThis.window === void 0 ? "" : globalThis.location.origin)
                                })
                            ];
                        case 1:
                            _state.sent();
                            return [
                                2,
                                {
                                    data: {
                                        provider: provider,
                                        url: (options === null || options === void 0 ? void 0 : options.redirectTo) || (globalThis.window === void 0 ? "" : globalThis.location.origin)
                                    },
                                    error: null
                                }
                            ];
                        case 2:
                            error = _state.sent();
                            if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f40$supabase$2f$auth$2d$js$2f$dist$2f$module$2f$lib$2f$errors$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isAuthError"])(error)) return [
                                2,
                                {
                                    data: {
                                        provider: credentials.provider,
                                        url: null
                                    },
                                    error: error
                                }
                            ];
                            if (isBetterAuthAPIError(error)) return [
                                2,
                                {
                                    data: {
                                        provider: credentials.provider,
                                        url: null
                                    },
                                    error: normalizeBetterAuthError(error)
                                }
                            ];
                            throw error;
                        case 3:
                            return [
                                2
                            ];
                    }
                });
            })();
        }), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "signInWithOtp", function(credentials) {
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                var error;
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                    switch(_state.label){
                        case 0:
                            _state.trys.push([
                                0,
                                3,
                                ,
                                4
                            ]);
                            if ("phone" in credentials) return [
                                2,
                                {
                                    data: {
                                        user: null,
                                        session: null,
                                        messageId: void 0
                                    },
                                    error: createAuthError(AuthErrorCode.PhoneProviderDisabled, "Phone OTP authentication is not supported. Use email-based authentication instead.")
                                }
                            ];
                            if (!("email" in credentials)) return [
                                3,
                                2
                            ];
                            return [
                                4,
                                _this1._betterAuth.emailOtp.sendVerificationOtp({
                                    email: credentials.email,
                                    type: "sign-in"
                                })
                            ];
                        case 1:
                            _state.sent();
                            return [
                                2,
                                {
                                    data: {
                                        user: null,
                                        session: null,
                                        messageId: void 0
                                    },
                                    error: null
                                }
                            ];
                        case 2:
                            throw createAuthError(AuthErrorCode.ValidationFailed, "Invalid OTP credentials format");
                        case 3:
                            error = _state.sent();
                            if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f40$supabase$2f$auth$2d$js$2f$dist$2f$module$2f$lib$2f$errors$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isAuthError"])(error)) return [
                                2,
                                {
                                    data: {
                                        user: null,
                                        session: null,
                                        messageId: void 0
                                    },
                                    error: error
                                }
                            ];
                            if (isBetterAuthAPIError(error)) return [
                                2,
                                {
                                    data: {
                                        user: null,
                                        session: null,
                                        messageId: void 0
                                    },
                                    error: normalizeBetterAuthError(error)
                                }
                            ];
                            throw error;
                        case 4:
                            return [
                                2
                            ];
                    }
                });
            })();
        }), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "signInWithIdToken", function(credentials) {
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                var result, session, error;
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                    switch(_state.label){
                        case 0:
                            _state.trys.push([
                                0,
                                3,
                                ,
                                4
                            ]);
                            return [
                                4,
                                _this1._betterAuth.signIn.social({
                                    provider: credentials.provider,
                                    idToken: {
                                        token: credentials.token,
                                        accessToken: credentials.access_token,
                                        nonce: credentials.nonce
                                    }
                                })
                            ];
                        case 1:
                            result = _state.sent();
                            if (result.error) throw normalizeBetterAuthError(result.error);
                            if (!("user" in result.data) || !result.data.user) throw createAuthError(AuthErrorCode.OAuthCallbackFailed, "Failed to sign in with ID token");
                            return [
                                4,
                                _this1.getSession()
                            ];
                        case 2:
                            session = _state.sent();
                            if (session.error || !session.data.session) throw session.error || createAuthError(AuthErrorCode.SessionNotFound, "Failed to get session");
                            return [
                                2,
                                {
                                    data: {
                                        user: session.data.session.user,
                                        session: session.data.session
                                    },
                                    error: null
                                }
                            ];
                        case 3:
                            error = _state.sent();
                            if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f40$supabase$2f$auth$2d$js$2f$dist$2f$module$2f$lib$2f$errors$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isAuthError"])(error)) return [
                                2,
                                {
                                    data: {
                                        user: null,
                                        session: null
                                    },
                                    error: error
                                }
                            ];
                            if (isBetterAuthAPIError(error)) return [
                                2,
                                {
                                    data: {
                                        user: null,
                                        session: null
                                    },
                                    error: normalizeBetterAuthError(error)
                                }
                            ];
                            throw error;
                        case 4:
                            return [
                                2
                            ];
                    }
                });
            })();
        }), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "signInWithSSO", function(params) {
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                var attemptedWith;
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                    attemptedWith = "providerId" in params ? "provider ID: ".concat(params.providerId) : "domain: ".concat("domain" in params ? params.domain : "unknown");
                    return [
                        2,
                        {
                            data: null,
                            error: createAuthError(AuthErrorCode.SsoProviderDisabled, "Better Auth does not support enterprise SAML SSO. Attempted with ".concat(attemptedWith, ". Use signInWithOAuth() for OAuth providers instead."))
                        }
                    ];
                });
            })();
        }), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "signInWithWeb3", function(credentials) {
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                var attemptedChain;
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                    attemptedChain = credentials.chain;
                    return [
                        2,
                        {
                            data: {
                                user: null,
                                session: null
                            },
                            error: createAuthError(AuthErrorCode.Web3ProviderDisabled, "Better Auth does not support Web3 authentication. Attempted with chain: ".concat(attemptedChain, ". Supported: OAuth, email/password, magic link."))
                        }
                    ];
                });
            })();
        }), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "signOut", function() {
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                var result, error;
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                    switch(_state.label){
                        case 0:
                            _state.trys.push([
                                0,
                                2,
                                ,
                                3
                            ]);
                            return [
                                4,
                                _this1._betterAuth.signOut()
                            ];
                        case 1:
                            result = _state.sent();
                            if (result.error) throw normalizeBetterAuthError(result.error);
                            return [
                                2,
                                {
                                    error: null
                                }
                            ];
                        case 2:
                            error = _state.sent();
                            if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f40$supabase$2f$auth$2d$js$2f$dist$2f$module$2f$lib$2f$errors$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isAuthError"])(error)) return [
                                2,
                                {
                                    error: error
                                }
                            ];
                            if (isBetterAuthAPIError(error)) return [
                                2,
                                {
                                    error: normalizeBetterAuthError(error)
                                }
                            ];
                            throw error;
                        case 3:
                            return [
                                2
                            ];
                    }
                });
            })();
        }), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "getUser", function() {
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                var sessionResult, error;
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                    switch(_state.label){
                        case 0:
                            _state.trys.push([
                                0,
                                2,
                                ,
                                3
                            ]);
                            return [
                                4,
                                _this1.getSession()
                            ];
                        case 1:
                            sessionResult = _state.sent();
                            if (sessionResult.error || !sessionResult.data.session) throw sessionResult.error || createAuthError(AuthErrorCode.SessionNotFound, "No user session found");
                            return [
                                2,
                                {
                                    data: {
                                        user: sessionResult.data.session.user
                                    },
                                    error: null
                                }
                            ];
                        case 2:
                            error = _state.sent();
                            if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f40$supabase$2f$auth$2d$js$2f$dist$2f$module$2f$lib$2f$errors$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isAuthError"])(error)) return [
                                2,
                                {
                                    data: {
                                        user: null
                                    },
                                    error: error
                                }
                            ];
                            if (isBetterAuthAPIError(error)) return [
                                2,
                                {
                                    data: {
                                        user: null
                                    },
                                    error: normalizeBetterAuthError(error)
                                }
                            ];
                            throw error;
                        case 3:
                            return [
                                2
                            ];
                    }
                });
            })();
        }), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "getClaims", function(jwtArg) {
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                var jwt, _sessionResult_data, sessionResult, error;
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                    switch(_state.label){
                        case 0:
                            _state.trys.push([
                                0,
                                3,
                                ,
                                4
                            ]);
                            jwt = jwtArg;
                            if (!!jwt) return [
                                3,
                                2
                            ];
                            return [
                                4,
                                _this1.getSession()
                            ];
                        case 1:
                            sessionResult = _state.sent();
                            if (sessionResult.error || !((_sessionResult_data = sessionResult.data) === null || _sessionResult_data === void 0 ? void 0 : _sessionResult_data.session)) throw sessionResult.error || createAuthError(AuthErrorCode.SessionNotFound, "No user session found");
                            jwt = sessionResult.data.session.access_token;
                            _state.label = 2;
                        case 2:
                            if (!jwt) throw createAuthError(AuthErrorCode.SessionNotFound, "No access token found");
                            if (jwt.split(".").length !== 3) throw createAuthError(AuthErrorCode.BadJwt, "Invalid token format");
                            return [
                                2,
                                {
                                    data: {
                                        header: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$jose$2f$dist$2f$webapi$2f$util$2f$decode_protected_header$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["decodeProtectedHeader"])(jwt),
                                        claims: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$jose$2f$dist$2f$webapi$2f$util$2f$decode_jwt$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["decodeJwt"])(jwt),
                                        signature: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$jose$2f$dist$2f$webapi$2f$util$2f$base64url$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__base64url$3e$__["base64url"].decode(jwt.split(".")[2])
                                    },
                                    error: null
                                }
                            ];
                        case 3:
                            error = _state.sent();
                            if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f40$supabase$2f$auth$2d$js$2f$dist$2f$module$2f$lib$2f$errors$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isAuthError"])(error)) return [
                                2,
                                {
                                    data: null,
                                    error: error
                                }
                            ];
                            if (isBetterAuthAPIError(error)) return [
                                2,
                                {
                                    data: null,
                                    error: normalizeBetterAuthError(error)
                                }
                            ];
                            throw error;
                        case 4:
                            return [
                                2
                            ];
                    }
                });
            })();
        }), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "updateUser", function(attributes) {
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                var _result_data, result, updatedSessionResult, error;
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                    switch(_state.label){
                        case 0:
                            _state.trys.push([
                                0,
                                3,
                                ,
                                4
                            ]);
                            if (attributes.password) throw createAuthError(AuthErrorCode.FeatureNotSupported, "The password cannot be updated through the updateUser method, use the changePassword method instead.");
                            if (attributes.email) throw createAuthError(AuthErrorCode.FeatureNotSupported, "The email cannot be updated through the updateUser method, use the changeEmail method instead.");
                            return [
                                4,
                                _this1._betterAuth.updateUser((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_object_spread$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])({}, attributes.data))
                            ];
                        case 1:
                            result = _state.sent();
                            if ((_result_data = result.data) === null || _result_data === void 0 ? void 0 : _result_data.status) throw createAuthError(AuthErrorCode.InternalError, "Failed to update user");
                            if (result === null || result === void 0 ? void 0 : result.error) throw normalizeBetterAuthError(result.error);
                            return [
                                4,
                                _this1.getSession({
                                    forceFetch: true
                                })
                            ];
                        case 2:
                            updatedSessionResult = _state.sent();
                            if (!updatedSessionResult.data.session) throw createAuthError(AuthErrorCode.SessionNotFound, "Failed to retrieve updated user");
                            return [
                                2,
                                {
                                    data: {
                                        user: updatedSessionResult.data.session.user
                                    },
                                    error: null
                                }
                            ];
                        case 3:
                            error = _state.sent();
                            if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f40$supabase$2f$auth$2d$js$2f$dist$2f$module$2f$lib$2f$errors$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isAuthError"])(error)) return [
                                2,
                                {
                                    data: {
                                        user: null
                                    },
                                    error: error
                                }
                            ];
                            if (isBetterAuthAPIError(error)) return [
                                2,
                                {
                                    data: {
                                        user: null
                                    },
                                    error: normalizeBetterAuthError(error)
                                }
                            ];
                            throw error;
                        case 4:
                            return [
                                2
                            ];
                    }
                });
            })();
        }), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "getUserIdentities", function() {
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                var sessionResult, result, identitiesPromises, _tmp, _tmp1, error;
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                    switch(_state.label){
                        case 0:
                            _state.trys.push([
                                0,
                                4,
                                ,
                                5
                            ]);
                            return [
                                4,
                                _this1.getSession()
                            ];
                        case 1:
                            sessionResult = _state.sent();
                            if (sessionResult.error || !sessionResult.data.session) throw sessionResult.error || createAuthError(AuthErrorCode.SessionNotFound, "No user session found");
                            return [
                                4,
                                _this1._betterAuth.listAccounts()
                            ];
                        case 2:
                            result = _state.sent();
                            if (!result) throw createAuthError(AuthErrorCode.InternalError, "Failed to list accounts");
                            if (result.error) throw normalizeBetterAuthError(result.error);
                            identitiesPromises = result.data.map(function(account) {
                                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                                    var accountInfo, error;
                                    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                                        switch(_state.label){
                                            case 0:
                                                accountInfo = null;
                                                _state.label = 1;
                                            case 1:
                                                _state.trys.push([
                                                    1,
                                                    3,
                                                    ,
                                                    4
                                                ]);
                                                return [
                                                    4,
                                                    _this1._betterAuth.accountInfo({
                                                        query: {
                                                            accountId: account.accountId
                                                        }
                                                    })
                                                ];
                                            case 2:
                                                accountInfo = _state.sent().data;
                                                return [
                                                    3,
                                                    4
                                                ];
                                            case 3:
                                                error = _state.sent();
                                                console.warn("Failed to get account info for ".concat(account.providerId, ":"), error);
                                                return [
                                                    3,
                                                    4
                                                ];
                                            case 4:
                                                return [
                                                    2,
                                                    mapBetterAuthIdentity(account, accountInfo !== null && accountInfo !== void 0 ? accountInfo : null)
                                                ];
                                        }
                                    });
                                })();
                            });
                            _tmp = {};
                            _tmp1 = {};
                            return [
                                4,
                                Promise.all(identitiesPromises)
                            ];
                        case 3:
                            return [
                                2,
                                (_tmp.data = (_tmp1.identities = _state.sent(), _tmp1), _tmp.error = null, _tmp)
                            ];
                        case 4:
                            error = _state.sent();
                            if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f40$supabase$2f$auth$2d$js$2f$dist$2f$module$2f$lib$2f$errors$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isAuthError"])(error)) return [
                                2,
                                {
                                    data: null,
                                    error: error
                                }
                            ];
                            if (isBetterAuthAPIError(error)) return [
                                2,
                                {
                                    data: null,
                                    error: normalizeBetterAuthError(error)
                                }
                            ];
                            throw error;
                        case 5:
                            return [
                                2
                            ];
                    }
                });
            })();
        }), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "linkIdentity", function(credentials) {
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                var provider, _credentials_options, _credentials_options_scopes, _credentials_options1, _result_data, sessionResult, _result$1_data, result$1, callbackURL, scopes, result, error;
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                    switch(_state.label){
                        case 0:
                            provider = credentials.provider;
                            _state.label = 1;
                        case 1:
                            _state.trys.push([
                                1,
                                6,
                                ,
                                7
                            ]);
                            return [
                                4,
                                _this1.getSession()
                            ];
                        case 2:
                            sessionResult = _state.sent();
                            if (sessionResult.error || !sessionResult.data.session) throw sessionResult.error || createAuthError(AuthErrorCode.SessionNotFound, "No user session found");
                            if (!("token" in credentials)) return [
                                3,
                                4
                            ];
                            return [
                                4,
                                _this1._betterAuth.linkSocial({
                                    provider: provider,
                                    idToken: {
                                        token: credentials.token,
                                        accessToken: credentials.access_token,
                                        nonce: credentials.nonce
                                    }
                                })
                            ];
                        case 3:
                            result$1 = _state.sent();
                            if (result$1.error) throw normalizeBetterAuthError(result$1.error);
                            return [
                                2,
                                {
                                    data: {
                                        user: sessionResult.data.session.user,
                                        session: sessionResult.data.session,
                                        provider: provider,
                                        url: (_result$1_data = result$1.data) === null || _result$1_data === void 0 ? void 0 : _result$1_data.url
                                    },
                                    error: null
                                }
                            ];
                        case 4:
                            callbackURL = ((_credentials_options = credentials.options) === null || _credentials_options === void 0 ? void 0 : _credentials_options.redirectTo) || (globalThis.window === void 0 ? "" : globalThis.location.origin);
                            scopes = (_credentials_options1 = credentials.options) === null || _credentials_options1 === void 0 ? void 0 : (_credentials_options_scopes = _credentials_options1.scopes) === null || _credentials_options_scopes === void 0 ? void 0 : _credentials_options_scopes.split(" ").filter(function(s) {
                                return s.length > 0;
                            });
                            return [
                                4,
                                _this1._betterAuth.linkSocial({
                                    provider: provider,
                                    callbackURL: callbackURL,
                                    errorCallbackURL: callbackURL ? "".concat(callbackURL, "?error=linking-failed") : void 0,
                                    scopes: scopes
                                })
                            ];
                        case 5:
                            result = _state.sent();
                            if (result.error) throw normalizeBetterAuthError(result.error);
                            return [
                                2,
                                {
                                    data: {
                                        provider: provider,
                                        url: (_result_data = result.data) === null || _result_data === void 0 ? void 0 : _result_data.url,
                                        user: sessionResult.data.session.user,
                                        session: sessionResult.data.session
                                    },
                                    error: null
                                }
                            ];
                        case 6:
                            error = _state.sent();
                            if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f40$supabase$2f$auth$2d$js$2f$dist$2f$module$2f$lib$2f$errors$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isAuthError"])(error)) return [
                                2,
                                {
                                    data: {
                                        provider: provider,
                                        url: null,
                                        user: null,
                                        session: null
                                    },
                                    error: error
                                }
                            ];
                            if (isBetterAuthAPIError(error)) return [
                                2,
                                {
                                    data: {
                                        provider: provider,
                                        url: null,
                                        user: null,
                                        session: null
                                    },
                                    error: normalizeBetterAuthError(error)
                                }
                            ];
                            throw error;
                        case 7:
                            return [
                                2
                            ];
                    }
                });
            })();
        }), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "unlinkIdentity", function(identity) {
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                var sessionResult, identities, targetIdentity, providerId, accountId, result, updatedSession, error;
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                    switch(_state.label){
                        case 0:
                            _state.trys.push([
                                0,
                                5,
                                ,
                                6
                            ]);
                            return [
                                4,
                                _this1.getSession()
                            ];
                        case 1:
                            sessionResult = _state.sent();
                            if (sessionResult.error || !sessionResult.data.session) throw sessionResult.error || createAuthError(AuthErrorCode.SessionNotFound, "No user session found");
                            return [
                                4,
                                _this1.getUserIdentities()
                            ];
                        case 2:
                            identities = _state.sent();
                            if (identities.error || !identities.data) throw identities.error || createAuthError(AuthErrorCode.InternalError, "Failed to fetch identities");
                            targetIdentity = identities.data.identities.find(function(i) {
                                return i.id === identity.identity_id;
                            });
                            if (!targetIdentity) throw createAuthError(AuthErrorCode.IdentityNotFound, "Identity not found");
                            providerId = targetIdentity.provider;
                            accountId = targetIdentity.identity_id;
                            return [
                                4,
                                _this1._betterAuth.unlinkAccount({
                                    providerId: providerId,
                                    accountId: accountId
                                })
                            ];
                        case 3:
                            result = _state.sent();
                            if (result === null || result === void 0 ? void 0 : result.error) throw normalizeBetterAuthError(result.error);
                            return [
                                4,
                                _this1.getSession({
                                    forceFetch: true
                                })
                            ];
                        case 4:
                            updatedSession = _state.sent();
                            if (updatedSession.data.session) __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$dist$2f$adapter$2d$core$2d$CtmnMMJ7$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["r"]["updateUser"].onSuccess(updatedSession.data.session);
                            return [
                                2,
                                {
                                    data: {},
                                    error: null
                                }
                            ];
                        case 5:
                            error = _state.sent();
                            if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f40$supabase$2f$auth$2d$js$2f$dist$2f$module$2f$lib$2f$errors$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isAuthError"])(error)) return [
                                2,
                                {
                                    data: null,
                                    error: error
                                }
                            ];
                            if (isBetterAuthAPIError(error)) return [
                                2,
                                {
                                    data: null,
                                    error: normalizeBetterAuthError(error)
                                }
                            ];
                            throw error;
                        case 6:
                            return [
                                2
                            ];
                    }
                });
            })();
        }), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "verifyOtp", function(params) {
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                var error;
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                    switch(_state.label){
                        case 0:
                            _state.trys.push([
                                0,
                                3,
                                ,
                                4
                            ]);
                            if ("phone" in params && params.phone) return [
                                2,
                                {
                                    data: {
                                        user: null,
                                        session: null
                                    },
                                    error: createAuthError(AuthErrorCode.PhoneProviderDisabled, "Phone OTP verification is not supported. Use email-based authentication instead.")
                                }
                            ];
                            if ("email" in params && params.type === "magiclink") return [
                                2,
                                {
                                    data: {
                                        user: null,
                                        session: null
                                    },
                                    error: createAuthError(AuthErrorCode.MagicLinkNotSupported, "Magic link verification is not supported. Use email OTP authentication instead.")
                                }
                            ];
                            if (!("email" in params && params.email)) return [
                                3,
                                2
                            ];
                            return [
                                4,
                                _this1.verifyEmailOtp(params)
                            ];
                        case 1:
                            return [
                                2,
                                _state.sent()
                            ];
                        case 2:
                            if ("token_hash" in params && params.token_hash) throw createAuthError(AuthErrorCode.FeatureNotSupported, "Token hash verification not supported");
                            throw createAuthError(AuthErrorCode.ValidationFailed, "Invalid OTP verification parameters");
                        case 3:
                            error = _state.sent();
                            if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f40$supabase$2f$auth$2d$js$2f$dist$2f$module$2f$lib$2f$errors$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isAuthError"])(error)) return [
                                2,
                                {
                                    data: {
                                        user: null,
                                        session: null
                                    },
                                    error: error
                                }
                            ];
                            if (isBetterAuthAPIError(error)) return [
                                2,
                                {
                                    data: {
                                        user: null,
                                        session: null
                                    },
                                    error: normalizeBetterAuthError(error)
                                }
                            ];
                            throw error;
                        case 4:
                            return [
                                2
                            ];
                    }
                });
            })();
        }), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "resetPasswordForEmail", function(email, options) {
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                var result, error;
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                    switch(_state.label){
                        case 0:
                            _state.trys.push([
                                0,
                                2,
                                ,
                                3
                            ]);
                            return [
                                4,
                                _this1._betterAuth.requestPasswordReset({
                                    email: email,
                                    redirectTo: (options === null || options === void 0 ? void 0 : options.redirectTo) || (globalThis.window === void 0 ? "" : globalThis.location.origin)
                                })
                            ];
                        case 1:
                            result = _state.sent();
                            if (result === null || result === void 0 ? void 0 : result.error) throw normalizeBetterAuthError(result.error);
                            return [
                                2,
                                {
                                    data: {},
                                    error: null
                                }
                            ];
                        case 2:
                            error = _state.sent();
                            if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f40$supabase$2f$auth$2d$js$2f$dist$2f$module$2f$lib$2f$errors$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isAuthError"])(error)) return [
                                2,
                                {
                                    data: null,
                                    error: error
                                }
                            ];
                            if (isBetterAuthAPIError(error)) return [
                                2,
                                {
                                    data: null,
                                    error: normalizeBetterAuthError(error)
                                }
                            ];
                            throw error;
                        case 3:
                            return [
                                2
                            ];
                    }
                });
            })();
        }), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "reauthenticate", function() {
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                var _newSession_data_session, newSession, error;
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                    switch(_state.label){
                        case 0:
                            _state.trys.push([
                                0,
                                2,
                                ,
                                3
                            ]);
                            return [
                                4,
                                _this1.getSession()
                            ];
                        case 1:
                            newSession = _state.sent();
                            if (newSession.error || !newSession.data.session) throw newSession.error || createAuthError(AuthErrorCode.SessionNotFound, "No session found");
                            return [
                                2,
                                {
                                    data: {
                                        user: ((_newSession_data_session = newSession.data.session) === null || _newSession_data_session === void 0 ? void 0 : _newSession_data_session.user) || null,
                                        session: newSession.data.session
                                    },
                                    error: null
                                }
                            ];
                        case 2:
                            error = _state.sent();
                            if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f40$supabase$2f$auth$2d$js$2f$dist$2f$module$2f$lib$2f$errors$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isAuthError"])(error)) return [
                                2,
                                {
                                    data: {
                                        user: null,
                                        session: null
                                    },
                                    error: error
                                }
                            ];
                            if (isBetterAuthAPIError(error)) return [
                                2,
                                {
                                    data: {
                                        user: null,
                                        session: null
                                    },
                                    error: normalizeBetterAuthError(error)
                                }
                            ];
                            throw error;
                        case 3:
                            return [
                                2
                            ];
                    }
                });
            })();
        }), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "resend", function(credentials) {
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                var email, type, options, result, error;
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                    switch(_state.label){
                        case 0:
                            _state.trys.push([
                                0,
                                4,
                                ,
                                5
                            ]);
                            if (!("email" in credentials)) return [
                                3,
                                3
                            ];
                            email = credentials.email, type = credentials.type, options = credentials.options;
                            if (!(type === "signup" || type === "email_change")) return [
                                3,
                                2
                            ];
                            return [
                                4,
                                _this1._betterAuth.sendVerificationEmail({
                                    email: email,
                                    callbackURL: (options === null || options === void 0 ? void 0 : options.emailRedirectTo) || (globalThis.window === void 0 ? "" : globalThis.location.origin)
                                })
                            ];
                        case 1:
                            result = _state.sent();
                            if (result === null || result === void 0 ? void 0 : result.error) throw normalizeBetterAuthError(result.error);
                            return [
                                2,
                                {
                                    data: {
                                        user: null,
                                        session: null
                                    },
                                    error: null
                                }
                            ];
                        case 2:
                            throw createAuthError(AuthErrorCode.ValidationFailed, "Unsupported resend type: ".concat(type));
                        case 3:
                            if ("phone" in credentials) return [
                                2,
                                {
                                    data: {
                                        user: null,
                                        session: null
                                    },
                                    error: createAuthError(AuthErrorCode.PhoneProviderDisabled, "SMS resend is not supported. Use email-based authentication instead.")
                                }
                            ];
                            throw createAuthError(AuthErrorCode.ValidationFailed, "Invalid credentials format");
                        case 4:
                            error = _state.sent();
                            if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f40$supabase$2f$auth$2d$js$2f$dist$2f$module$2f$lib$2f$errors$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isAuthError"])(error)) return [
                                2,
                                {
                                    data: {
                                        user: null,
                                        session: null
                                    },
                                    error: error
                                }
                            ];
                            if (isBetterAuthAPIError(error)) return [
                                2,
                                {
                                    data: {
                                        user: null,
                                        session: null
                                    },
                                    error: normalizeBetterAuthError(error)
                                }
                            ];
                            throw error;
                        case 5:
                            return [
                                2
                            ];
                    }
                });
            })();
        }), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "exchangeCodeForSession", function(_authCode) {
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                var sessionResult, error;
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                    switch(_state.label){
                        case 0:
                            _state.trys.push([
                                0,
                                2,
                                ,
                                3
                            ]);
                            return [
                                4,
                                _this1.getSession()
                            ];
                        case 1:
                            sessionResult = _state.sent();
                            if (sessionResult.data.session) return [
                                2,
                                {
                                    data: {
                                        session: sessionResult.data.session,
                                        user: sessionResult.data.session.user
                                    },
                                    error: null
                                }
                            ];
                            throw createAuthError(AuthErrorCode.OAuthCallbackFailed, "OAuth callback completed but no session was created. Make sure the OAuth callback has been processed.");
                        case 2:
                            error = _state.sent();
                            if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f40$supabase$2f$auth$2d$js$2f$dist$2f$module$2f$lib$2f$errors$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isAuthError"])(error)) return [
                                2,
                                {
                                    data: {
                                        session: null,
                                        user: null
                                    },
                                    error: error
                                }
                            ];
                            if (isBetterAuthAPIError(error)) return [
                                2,
                                {
                                    data: {
                                        session: null,
                                        user: null
                                    },
                                    error: normalizeBetterAuthError(error)
                                }
                            ];
                            throw error;
                        case 3:
                            return [
                                2
                            ];
                    }
                });
            })();
        }), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "onAuthStateChange", function(callback) {
            var id = crypto.randomUUID();
            var subscription = {
                id: id,
                callback: callback,
                unsubscribe: function() {
                    _this1._stateChangeEmitters.delete(id);
                }
            };
            _this1._stateChangeEmitters.set(id, subscription);
            _this1.emitInitialSession(callback);
            return {
                data: {
                    subscription: {
                        id: id,
                        callback: callback,
                        unsubscribe: subscription.unsubscribe
                    }
                }
            };
        }), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "isThrowOnErrorEnabled", function() {
            return false;
        }), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "startAutoRefresh", function() {
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                    return [
                        2
                    ];
                });
            })();
        }), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_define_property$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1, "stopAutoRefresh", function() {
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                    return [
                        2
                    ];
                });
            })();
        });
        _this1._betterAuth = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f$better$2d$auth$2f$dist$2f$client$2d$BJRbyWu7$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__r__as__createAuthClient$3e$__["createAuthClient"])(_this1.betterAuthOptions);
        /**
		* useSession() - Automatic Session Management
		*
		* Enabled by Default:
		* -  Refetch on Window Focus: Automatically refetches session when user returns to the tab
		* -  Cross-Tab Sync: Syncs session state across all browser tabs (sign out in one = sign out in all)
		* -  Online/Offline Detection: Refetches session when network connection is restored
		* -  Interval Polling: Disabled (refetchInterval: 0)
		*
		* Returns:
		* - data: Session object (user + session)
		* - isPending: Loading state
		* - isRefetching: Refetch in progress
		* - error: Error object if any
		* - refetch(): Manual refetch function
		*
		* Customize with:
		* createAuthClient({
		*   sessionOptions: {
		*     refetchOnWindowFocus: true,  // default
		*     refetchInterval: 0,           // default (seconds, 0 = off)
		*     refetchWhenOffline: false     // default
		*   }
		* })
		*/ _this1._betterAuth.useSession.subscribe(function(value) {
            var _value_data, _value_data1;
            if (!((_value_data = value.data) === null || _value_data === void 0 ? void 0 : _value_data.session) || !((_value_data1 = value.data) === null || _value_data1 === void 0 ? void 0 : _value_data1.user)) {
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$dist$2f$adapter$2d$core$2d$CtmnMMJ7$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["n"].clearSessionCache();
                return;
            }
        });
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f$better$2d$auth$2f$dist$2f$proxy$2d$DNjQepc2$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__s__as__getGlobalBroadcastChannel$3e$__["getGlobalBroadcastChannel"])().subscribe(function(message) {
            if (message.clientId === __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$dist$2f$adapter$2d$core$2d$CtmnMMJ7$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["i"]) return;
            if (message.data && "sessionData" in message.data) {
                var sessionData = message.data.sessionData;
                var trigger = message.data.trigger;
                if (sessionData) __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$dist$2f$adapter$2d$core$2d$CtmnMMJ7$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["n"].setCachedSession(sessionData);
                else __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$dist$2f$adapter$2d$core$2d$CtmnMMJ7$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["n"].clearSessionCache();
                var supabaseSession = sessionData ? mapBetterAuthSession(sessionData.session, sessionData.user) : null;
                var promises = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_to_consumable_array$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(_this1._stateChangeEmitters.values()).map(function(subscription) {
                    try {
                        return Promise.resolve(subscription.callback(trigger, supabaseSession));
                    } catch (e) {
                        return Promise.resolve();
                    }
                });
                Promise.allSettled(promises);
            }
        });
        return _this;
    }
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_create_class$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(SupabaseAuthAdapterImpl, [
        {
            key: "getBetterAuthInstance",
            value: function getBetterAuthInstance() {
                return this._betterAuth;
            }
        },
        {
            key: "getSession",
            value: function getSession(options) {
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                    var _currentSession_data, currentSession, error;
                    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                        switch(_state.label){
                            case 0:
                                _state.trys.push([
                                    0,
                                    2,
                                    ,
                                    3
                                ]);
                                return [
                                    4,
                                    this._betterAuth.getSession((options === null || options === void 0 ? void 0 : options.forceFetch) ? {
                                        fetchOptions: {
                                            headers: {
                                                "X-Force-Fetch": "true"
                                            }
                                        }
                                    } : void 0)
                                ];
                            case 1:
                                currentSession = _state.sent();
                                if (!((_currentSession_data = currentSession.data) === null || _currentSession_data === void 0 ? void 0 : _currentSession_data.session)) return [
                                    2,
                                    {
                                        data: {
                                            session: null
                                        },
                                        error: null
                                    }
                                ];
                                return [
                                    2,
                                    {
                                        data: {
                                            session: mapBetterAuthSession(currentSession.data.session, currentSession.data.user)
                                        },
                                        error: null
                                    }
                                ];
                            case 2:
                                error = _state.sent();
                                if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$node_modules$2f40$supabase$2f$auth$2d$js$2f$dist$2f$module$2f$lib$2f$errors$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["isAuthError"])(error)) return [
                                    2,
                                    {
                                        data: {
                                            session: null
                                        },
                                        error: error
                                    }
                                ];
                                if (isBetterAuthAPIError(error)) return [
                                    2,
                                    {
                                        data: {
                                            session: null
                                        },
                                        error: normalizeBetterAuthError(error)
                                    }
                                ];
                                throw error;
                            case 3:
                                return [
                                    2
                                ];
                        }
                    });
                }).call(this);
            }
        },
        {
            key: "verifyEmailOtp",
            value: function verifyEmailOtp(params) {
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                    var type, result, sessionResult, _sessionResult_data_session, result1, sessionResult1, _sessionResult_data_session_user, _checkResult_data, checkResult, _params_options, _sessionResult_data_session1, _sessionResult_data, _sessionResult_data1, result2, sessionResult2, _sessionResult_data_session2, _sessionResult_data2, _sessionResult_data3, result3, sessionResult3;
                    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                        switch(_state.label){
                            case 0:
                                type = params.type;
                                if (!(type === "email")) return [
                                    3,
                                    3
                                ];
                                return [
                                    4,
                                    this._betterAuth.signIn.emailOtp({
                                        email: params.email,
                                        otp: params.token
                                    })
                                ];
                            case 1:
                                result = _state.sent();
                                if (result.error) return [
                                    2,
                                    {
                                        data: {
                                            user: null,
                                            session: null
                                        },
                                        error: normalizeBetterAuthError(result.error)
                                    }
                                ];
                                return [
                                    4,
                                    this.getSession({
                                        forceFetch: true
                                    })
                                ];
                            case 2:
                                sessionResult = _state.sent();
                                if (!sessionResult.data.session) return [
                                    2,
                                    {
                                        data: {
                                            user: null,
                                            session: null
                                        },
                                        error: createAuthError(AuthErrorCode.SessionNotFound, "Failed to retrieve session after OTP verification. Make sure the magic link callback has been processed.")
                                    }
                                ];
                                return [
                                    2,
                                    {
                                        data: {
                                            user: sessionResult.data.session.user,
                                            session: sessionResult.data.session
                                        },
                                        error: null
                                    }
                                ];
                            case 3:
                                if (type === "magiclink") return [
                                    2,
                                    {
                                        data: {
                                            user: null,
                                            session: null
                                        },
                                        error: createAuthError(AuthErrorCode.MagicLinkNotSupported, "Magic link verification is not supported. Use email OTP authentication instead.")
                                    }
                                ];
                                if (!(type === "signup" || type === "invite")) return [
                                    3,
                                    6
                                ];
                                return [
                                    4,
                                    this._betterAuth.emailOtp.verifyEmail({
                                        email: params.email,
                                        otp: params.token
                                    })
                                ];
                            case 4:
                                result1 = _state.sent();
                                if (result1 === null || result1 === void 0 ? void 0 : result1.error) return [
                                    2,
                                    {
                                        data: {
                                            user: null,
                                            session: null
                                        },
                                        error: normalizeBetterAuthError(result1.error)
                                    }
                                ];
                                return [
                                    4,
                                    this.getSession({
                                        forceFetch: true
                                    })
                                ];
                            case 5:
                                sessionResult1 = _state.sent();
                                return [
                                    2,
                                    {
                                        data: {
                                            user: (_sessionResult_data_session_user = (_sessionResult_data_session = sessionResult1.data.session) === null || _sessionResult_data_session === void 0 ? void 0 : _sessionResult_data_session.user) !== null && _sessionResult_data_session_user !== void 0 ? _sessionResult_data_session_user : null,
                                            session: sessionResult1.data.session
                                        },
                                        error: null
                                    }
                                ];
                            case 6:
                                if (!(type === "recovery")) return [
                                    3,
                                    8
                                ];
                                return [
                                    4,
                                    this._betterAuth.emailOtp.checkVerificationOtp({
                                        email: params.email,
                                        otp: params.token,
                                        type: "forget-password"
                                    })
                                ];
                            case 7:
                                checkResult = _state.sent();
                                if (checkResult.error || !((_checkResult_data = checkResult.data) === null || _checkResult_data === void 0 ? void 0 : _checkResult_data.success)) return [
                                    2,
                                    {
                                        data: {
                                            user: null,
                                            session: null
                                        },
                                        error: normalizeBetterAuthError(checkResult.error)
                                    }
                                ];
                                return [
                                    2,
                                    {
                                        data: {
                                            user: null,
                                            session: null
                                        },
                                        error: null
                                    }
                                ];
                            case 8:
                                if (!(type === "email_change")) return [
                                    3,
                                    11
                                ];
                                return [
                                    4,
                                    this._betterAuth.verifyEmail({
                                        query: {
                                            token: params.token,
                                            callbackURL: (_params_options = params.options) === null || _params_options === void 0 ? void 0 : _params_options.redirectTo
                                        }
                                    })
                                ];
                            case 9:
                                result2 = _state.sent();
                                if (result2 === null || result2 === void 0 ? void 0 : result2.error) return [
                                    2,
                                    {
                                        data: {
                                            user: null,
                                            session: null
                                        },
                                        error: normalizeBetterAuthError(result2.error)
                                    }
                                ];
                                return [
                                    4,
                                    this.getSession({
                                        forceFetch: true
                                    })
                                ];
                            case 10:
                                sessionResult2 = _state.sent();
                                if (sessionResult2.error || !sessionResult2.data) return [
                                    2,
                                    {
                                        data: {
                                            user: null,
                                            session: null
                                        },
                                        error: sessionResult2.error || createAuthError(AuthErrorCode.InternalError, "Failed to get session")
                                    }
                                ];
                                if (sessionResult2.data.session) __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$dist$2f$adapter$2d$core$2d$CtmnMMJ7$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["r"]["updateUser"].onSuccess(sessionResult2.data.session);
                                return [
                                    2,
                                    {
                                        data: {
                                            user: ((_sessionResult_data = sessionResult2.data) === null || _sessionResult_data === void 0 ? void 0 : (_sessionResult_data_session1 = _sessionResult_data.session) === null || _sessionResult_data_session1 === void 0 ? void 0 : _sessionResult_data_session1.user) || null,
                                            session: ((_sessionResult_data1 = sessionResult2.data) === null || _sessionResult_data1 === void 0 ? void 0 : _sessionResult_data1.session) || null
                                        },
                                        error: null
                                    }
                                ];
                            case 11:
                                if (!(type === "invite")) return [
                                    3,
                                    14
                                ];
                                return [
                                    4,
                                    this._betterAuth.organization.acceptInvitation({
                                        invitationId: params.token
                                    })
                                ];
                            case 12:
                                result3 = _state.sent();
                                if (result3.error) return [
                                    2,
                                    {
                                        data: {
                                            user: null,
                                            session: null
                                        },
                                        error: normalizeBetterAuthError(result3.error)
                                    }
                                ];
                                return [
                                    4,
                                    this.getSession({
                                        forceFetch: true
                                    })
                                ];
                            case 13:
                                sessionResult3 = _state.sent();
                                if (sessionResult3.error || !sessionResult3.data) return [
                                    2,
                                    {
                                        data: {
                                            user: null,
                                            session: null
                                        },
                                        error: sessionResult3.error || createAuthError(AuthErrorCode.InternalError, "Failed to get session")
                                    }
                                ];
                                return [
                                    2,
                                    {
                                        data: {
                                            user: ((_sessionResult_data2 = sessionResult3.data) === null || _sessionResult_data2 === void 0 ? void 0 : (_sessionResult_data_session2 = _sessionResult_data2.session) === null || _sessionResult_data_session2 === void 0 ? void 0 : _sessionResult_data_session2.user) || null,
                                            session: (_sessionResult_data3 = sessionResult3.data) === null || _sessionResult_data3 === void 0 ? void 0 : _sessionResult_data3.session
                                        },
                                        error: null
                                    }
                                ];
                            case 14:
                                return [
                                    2,
                                    {
                                        data: {
                                            user: null,
                                            session: null
                                        },
                                        error: createAuthError(AuthErrorCode.ValidationFailed, "Unsupported email OTP type: ".concat(type))
                                    }
                                ];
                        }
                    });
                }).call(this);
            }
        },
        {
            key: "emitInitialSession",
            value: function emitInitialSession(callback) {
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_async_to_generator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])(function() {
                    var _ref, data, error, e;
                    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$5f$_generator__as__$5f3e$__["_"])(this, function(_state) {
                        switch(_state.label){
                            case 0:
                                _state.trys.push([
                                    0,
                                    5,
                                    ,
                                    7
                                ]);
                                return [
                                    4,
                                    this.getSession()
                                ];
                            case 1:
                                _ref = _state.sent(), data = _ref.data, error = _ref.error;
                                if (!error) return [
                                    3,
                                    3
                                ];
                                return [
                                    4,
                                    callback("INITIAL_SESSION", null)
                                ];
                            case 2:
                                _state.sent();
                                return [
                                    2
                                ];
                            case 3:
                                return [
                                    4,
                                    callback("INITIAL_SESSION", data.session)
                                ];
                            case 4:
                                _state.sent();
                                return [
                                    3,
                                    7
                                ];
                            case 5:
                                e = _state.sent();
                                return [
                                    4,
                                    callback("INITIAL_SESSION", null)
                                ];
                            case 6:
                                _state.sent();
                                return [
                                    3,
                                    7
                                ];
                            case 7:
                                return [
                                    2
                                ];
                        }
                    });
                }).call(this);
            }
        }
    ]);
    return SupabaseAuthAdapterImpl;
}(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$neondatabase$2f$auth$2f$dist$2f$adapter$2d$core$2d$CtmnMMJ7$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["t"]);
/**
* Factory function that returns an adapter builder.
* The builder is called by createClient/createAuthClient with the URL.
*
* @param options - Optional adapter configuration (baseURL is injected separately)
* @returns A builder function that creates the adapter instance
*
* @example
* ```typescript
* const client = createClient({
*   auth: {
*     url: 'https://auth.example.com',
*     adapter: SupabaseAuthAdapter(),
*   },
*   dataApi: { url: 'https://data-api.example.com' },
* });
* ```
*/ function SupabaseAuthAdapter(options) {
    return function(url, fetchOptions) {
        var _options_fetchOptions;
        return new SupabaseAuthAdapterImpl((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_object_spread_props$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_object_spread$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])({
            baseURL: url
        }, options), {
            fetchOptions: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_object_spread_props$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_object_spread$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])({}, options === null || options === void 0 ? void 0 : options.fetchOptions), {
                headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$swc$2f$helpers$2f$esm$2f$_object_spread$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["_"])({}, options === null || options === void 0 ? void 0 : (_options_fetchOptions = options.fetchOptions) === null || _options_fetchOptions === void 0 ? void 0 : _options_fetchOptions.headers, fetchOptions === null || fetchOptions === void 0 ? void 0 : fetchOptions.headers)
            })
        }));
    };
}
;
}),
]);

//# sourceMappingURL=node_modules_%40neondatabase_auth_dist_supabase-adapter-BlcGPyOf_mjs_4b1623bf._.js.map