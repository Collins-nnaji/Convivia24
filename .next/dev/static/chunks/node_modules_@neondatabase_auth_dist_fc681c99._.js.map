{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/collinsnnaji/VSCodeDevelopments/convivia24/node_modules/%40neondatabase/auth/dist/constants-Cupc_bln.mjs"],"sourcesContent":["//#region src/core/constants.ts\n/**\n* Session caching configuration constants\n*\n* Uses industry-standard 60s cache TTL (common across auth providers).\n*\n* Note: Token refresh detection is now automatic via Better Auth's\n* fetchOptions.onSuccess callback. No polling is needed.\n*/\n/** Session cache TTL in milliseconds (60 seconds) */\nconst SESSION_CACHE_TTL_MS = 6e4;\n/** Clock skew buffer for token expiration checks in milliseconds (10 seconds) */\nconst CLOCK_SKEW_BUFFER_MS = 1e4;\n/** Default session expiry duration in milliseconds (1 hour) */\nconst DEFAULT_SESSION_EXPIRY_MS = 36e5;\n/** Name of the session verifier parameter in the URL, used for the OAUTH flow */\nconst NEON_AUTH_SESSION_VERIFIER_PARAM_NAME = \"neon_auth_session_verifier\";\n/** Name of the popup marker parameter in the URL, used for OAuth popup flow in iframes */\nconst NEON_AUTH_POPUP_PARAM_NAME = \"neon_popup\";\n/** Name of the original callback URL parameter, used in OAuth popup flow */\nconst NEON_AUTH_POPUP_CALLBACK_PARAM_NAME = \"neon_popup_callback\";\n/** The callback route used for OAuth popup completion (must be in middleware SKIP_ROUTES) */\nconst NEON_AUTH_POPUP_CALLBACK_ROUTE = \"/auth/callback\";\n/** Message type for OAuth popup completion postMessage */\nconst OAUTH_POPUP_MESSAGE_TYPE = \"neon-auth:oauth-complete\";\n\n//#endregion\nexport { NEON_AUTH_POPUP_PARAM_NAME as a, SESSION_CACHE_TTL_MS as c, NEON_AUTH_POPUP_CALLBACK_ROUTE as i, DEFAULT_SESSION_EXPIRY_MS as n, NEON_AUTH_SESSION_VERIFIER_PARAM_NAME as o, NEON_AUTH_POPUP_CALLBACK_PARAM_NAME as r, OAUTH_POPUP_MESSAGE_TYPE as s, CLOCK_SKEW_BUFFER_MS as t };"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA,+BAA+B;AAC/B;;;;;;;AAOA,GACA,mDAAmD,GACnD,IAAM,uBAAuB;AAC7B,+EAA+E,GAC/E,IAAM,uBAAuB;AAC7B,6DAA6D,GAC7D,IAAM,4BAA4B;AAClC,+EAA+E,GAC/E,IAAM,wCAAwC;AAC9C,wFAAwF,GACxF,IAAM,6BAA6B;AACnC,0EAA0E,GAC1E,IAAM,sCAAsC;AAC5C,2FAA2F,GAC3F,IAAM,iCAAiC;AACvC,wDAAwD,GACxD,IAAM,2BAA2B","ignoreList":[0]}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":["file:///Users/collinsnnaji/VSCodeDevelopments/convivia24/node_modules/%40neondatabase/auth/dist/adapter-core-CtmnMMJ7.mjs"],"sourcesContent":["import { a as NEON_AUTH_POPUP_PARAM_NAME, c as SESSION_CACHE_TTL_MS, i as NEON_AUTH_POPUP_CALLBACK_ROUTE, o as NEON_AUTH_SESSION_VERIFIER_PARAM_NAME, r as NEON_AUTH_POPUP_CALLBACK_PARAM_NAME, s as OAUTH_POPUP_MESSAGE_TYPE, t as CLOCK_SKEW_BUFFER_MS } from \"./constants-Cupc_bln.mjs\";\nimport { getGlobalBroadcastChannel } from \"better-auth/client\";\nimport { adminClient, emailOTPClient, jwtClient, organizationClient } from \"better-auth/client/plugins\";\nimport z from \"zod\";\n\n//#region src/core/in-flight-request-manager.ts\n/**\n* Generic in-flight request deduplication manager.\n*\n* Prevents thundering herd by tracking Promises by key.\n* Multiple concurrent calls with the same key await the same Promise\n* instead of making N identical requests.\n*\n* Example:\n* ```typescript\n* const manager = new InFlightRequestManager();\n*\n* // 10 concurrent calls deduplicate to 1 actual fetch\n* const results = await Promise.all([\n*   manager.deduplicate('user:123', () => fetchUser(123)),\n*   manager.deduplicate('user:123', () => fetchUser(123)),\n*   // ... 8 more calls\n* ]);\n* // Result: 1 fetch call, 10 identical results\n* ```\n*\n* Thread Safety: JavaScript is single-threaded, no race conditions possible\n*/\nvar InFlightRequestManager = class {\n\t/**\n\t* Map of request keys to in-flight Promises.\n\t* Automatically cleared after Promise resolution (success or error).\n\t*/\n\tinFlightRequests = /* @__PURE__ */ new Map();\n\t/**\n\t* Execute function with deduplication.\n\t*\n\t* If request with same key is in-flight, returns existing Promise.\n\t* Otherwise, executes fn and tracks the Promise.\n\t*\n\t* @param key - Unique identifier for this request (e.g., \"getSession\")\n\t* @param fn - Async function to execute (only called if no in-flight request exists)\n\t* @returns Promise that resolves to the function result\n\t*\n\t* @example\n\t* ```typescript\n\t* // First call: Executes fetchSession(), tracks Promise\n\t* const result1 = await manager.deduplicate('getSession', fetchSession);\n\t*\n\t* // Concurrent call: Returns existing Promise (no fetchSession() call)\n\t* const result2 = await manager.deduplicate('getSession', fetchSession);\n\t*\n\t* // Both results are identical (same object reference)\n\t* console.log(result1 === result2); // true\n\t* ```\n\t*/\n\tasync deduplicate(key, fn) {\n\t\tconst existing = this.inFlightRequests.get(key);\n\t\tif (existing) return existing;\n\t\tconst promise = fn().finally(() => {\n\t\t\tthis.inFlightRequests.delete(key);\n\t\t});\n\t\tthis.inFlightRequests.set(key, promise);\n\t\treturn promise;\n\t}\n\t/**\n\t* Clear specific in-flight request.\n\t*\n\t* Useful for forced refresh or cache invalidation scenarios.\n\t* Next call with same key will execute fresh request.\n\t*\n\t* @param key - Request key to clear\n\t*/\n\tclear(key) {\n\t\tthis.inFlightRequests.delete(key);\n\t}\n\t/**\n\t* Clear all in-flight requests.\n\t*\n\t* Useful for cleanup on sign-out or reset scenarios.\n\t*/\n\tclearAll() {\n\t\tthis.inFlightRequests.clear();\n\t}\n\t/**\n\t* Check if request is in-flight.\n\t*\n\t* @param key - Request key to check\n\t* @returns True if request is currently in-flight\n\t*/\n\thas(key) {\n\t\treturn this.inFlightRequests.has(key);\n\t}\n\t/**\n\t* Get count of in-flight requests (for debugging/testing).\n\t*\n\t* @returns Number of currently tracked requests\n\t*/\n\tsize() {\n\t\treturn this.inFlightRequests.size;\n\t}\n};\n\n//#endregion\n//#region src/utils/jwt.ts\n/**\n* Extract expiration timestamp from JWT payload\n* @param jwt - The JWT token string\n* @returns Expiration timestamp in seconds (Unix time) or null if invalid\n*/\nfunction getJwtExpiration(jwt) {\n\ttry {\n\t\tconst parts = jwt.split(\".\");\n\t\tif (parts.length !== 3) return null;\n\t\tconst exp = JSON.parse(atob(parts[1])).exp;\n\t\treturn typeof exp === \"number\" ? exp : null;\n\t} catch {\n\t\treturn null;\n\t}\n}\n\n//#endregion\n//#region src/core/token-cache.ts\nvar TokenCache = class {\n\tcache = null;\n\t/**\n\t* Get cached data if not expired.\n\t* Returns null if cache is empty or expired.\n\t*/\n\tget() {\n\t\tif (!this.cache) return null;\n\t\tif (Date.now() > this.cache.expiresAt) {\n\t\t\tthis.cache = null;\n\t\t\treturn null;\n\t\t}\n\t\treturn this.cache.data;\n\t}\n\t/**\n\t* Set cached data with TTL.\n\t* If jwt is provided, TTL is calculated from its expiration.\n\t* Otherwise, uses default SESSION_CACHE_TTL_MS.\n\t*/\n\tset(data, jwt) {\n\t\tconst ttl = this.calculateTTL(jwt);\n\t\tthis.cache = {\n\t\t\tdata,\n\t\t\texpiresAt: Date.now() + ttl\n\t\t};\n\t}\n\t/**\n\t* Clear the cache.\n\t*/\n\tclear() {\n\t\tthis.cache = null;\n\t}\n\t/**\n\t* Check if cache has valid (non-expired) data.\n\t*/\n\thas() {\n\t\treturn this.get() !== null;\n\t}\n\t/**\n\t* Calculate cache TTL from JWT expiration.\n\t* Falls back to default TTL if JWT is invalid or missing.\n\t*/\n\tcalculateTTL(jwt) {\n\t\tif (!jwt) return SESSION_CACHE_TTL_MS;\n\t\tconst exp = getJwtExpiration(jwt);\n\t\tif (!exp) return SESSION_CACHE_TTL_MS;\n\t\tconst now = Date.now();\n\t\tconst ttl = exp * 1e3 - now - CLOCK_SKEW_BUFFER_MS;\n\t\treturn Math.max(ttl, 1e3);\n\t}\n};\n\n//#endregion\n//#region src/core/session-cache-manager.ts\n/**\n* Manages in-memory session cache with TTL expiration.\n*\n* Built on TokenCache, adding session-specific features:\n* - Invalidation flag for sign-out scenarios\n* - Token refresh detection via lastSessionData comparison\n*\n* Example:\n* ```typescript\n* const cacheManager = new SessionCacheManager();\n* cacheManager.setCachedSession({ session, user });\n* const cached = cacheManager.getCachedSession();\n* ```\n*/\nvar SessionCacheManager = class {\n\tcache = new TokenCache();\n\tlastSessionData = null;\n\tinvalidated = false;\n\t/**\n\t* Get cached session if valid and not expired.\n\t* Returns null if cache is invalid, expired, or doesn't exist.\n\t*/\n\tgetCachedSession() {\n\t\tif (this.invalidated) return null;\n\t\treturn this.cache.get();\n\t}\n\t/**\n\t* Set cached session with JWT-based TTL.\n\t* Skips caching if cache was invalidated (sign-out scenario).\n\t*/\n\tsetCachedSession(data) {\n\t\tif (this.invalidated) return;\n\t\tthis.lastSessionData = this.cache.get();\n\t\tthis.cache.set(data, data.session.token);\n\t}\n\t/**\n\t* Invalidate cache (marks as invalid but doesn't clear).\n\t* Useful for sign-out scenarios where in-flight requests should not cache.\n\t*/\n\tinvalidateSessionCache() {\n\t\tthis.invalidated = true;\n\t}\n\t/**\n\t* Clear cache completely.\n\t*/\n\tclearSessionCache() {\n\t\tthis.cache.clear();\n\t\tthis.lastSessionData = null;\n\t\tthis.invalidated = false;\n\t}\n\t/**\n\t* Check if token was refreshed by comparing tokens with previous session.\n\t* Returns true if tokens differ (token was refreshed), false otherwise.\n\t*/\n\twasTokenRefreshed(data) {\n\t\tif (!this.lastSessionData?.session?.token || !data?.session?.token) return false;\n\t\treturn this.lastSessionData.session.token !== data.session.token;\n\t}\n};\n\n//#endregion\n//#region src/core/anonymous-token-cache-manager.ts\n/**\n* Manages in-memory anonymous token cache with TTL expiration.\n*\n* Stores the full anonymous token response (token + expires_at).\n* Unlike SessionCacheManager, doesn't need:\n* - Invalidation flag (no sign-out scenario for anonymous tokens)\n* - Refresh detection (anonymous tokens are stateless)\n*/\nvar AnonymousTokenCacheManager = class {\n\tcache = new TokenCache();\n\t/**\n\t* Get cached anonymous token response if not expired.\n\t* Returns null if cache is empty or expired.\n\t*/\n\tgetCachedResponse() {\n\t\treturn this.cache.get();\n\t}\n\t/**\n\t* Set cached anonymous token response with JWT-based TTL.\n\t* TTL is automatically calculated from the JWT expiration.\n\t*/\n\tsetCachedResponse(data) {\n\t\tthis.cache.set(data, data.token);\n\t}\n\t/**\n\t* Clear the cache.\n\t*/\n\tclearCache() {\n\t\tthis.cache.clear();\n\t}\n\t/**\n\t* Check if cache has a valid (non-expired) response.\n\t*/\n\thasCachedResponse() {\n\t\treturn this.cache.has();\n\t}\n};\n\n//#endregion\n//#region src/core/oauth-popup.ts\n/**\n* Opens an OAuth popup window and waits for completion.\n*\n* This is used when the app is running inside an iframe, where OAuth\n* redirect flows don't work due to X-Frame-Options/CSP restrictions.\n* The popup completes the OAuth flow and sends a postMessage back\n* with the session verifier needed to fetch the session.\n*\n* @param url - The OAuth authorization URL to open in the popup\n* @returns Promise that resolves with the session verifier when OAuth completes\n* @throws Error if popup is blocked, closed by user, or times out\n*/\nasync function openOAuthPopup(url) {\n\tconst timeout = 12e4;\n\tconst pollInterval = 500;\n\treturn new Promise((resolve, reject) => {\n\t\tconst popup = globalThis.open(url, \"neon_oauth_popup\", \"width=500,height=700,popup=yes\");\n\t\tif (!popup || popup.closed) {\n\t\t\treject(/* @__PURE__ */ new Error(\"Popup blocked. Please allow popups for this site.\"));\n\t\t\treturn;\n\t\t}\n\t\tconst timeoutId = setTimeout(() => {\n\t\t\tcleanup();\n\t\t\ttry {\n\t\t\t\tpopup.close();\n\t\t\t} catch {}\n\t\t\treject(/* @__PURE__ */ new Error(\"OAuth popup timed out. Please try again.\"));\n\t\t}, timeout);\n\t\tconst pollId = setInterval(() => {\n\t\t\ttry {\n\t\t\t\tif (popup.closed) {\n\t\t\t\t\tcleanup();\n\t\t\t\t\treject(/* @__PURE__ */ new Error(\"OAuth popup was closed. Please try again.\"));\n\t\t\t\t}\n\t\t\t} catch {}\n\t\t}, pollInterval);\n\t\tfunction cleanup() {\n\t\t\tclearTimeout(timeoutId);\n\t\t\tclearInterval(pollId);\n\t\t\tglobalThis.removeEventListener(\"message\", handleMessage);\n\t\t}\n\t\tfunction handleMessage(event) {\n\t\t\tif (event.origin !== globalThis.location.origin) return;\n\t\t\tif (event.data?.type !== OAUTH_POPUP_MESSAGE_TYPE) return;\n\t\t\tcleanup();\n\t\t\tresolve({ verifier: event.data.verifier || null });\n\t\t}\n\t\tglobalThis.addEventListener(\"message\", handleMessage);\n\t});\n}\n\n//#endregion\n//#region src/utils/browser.ts\n/**\n* Checks if the code is running in a browser environment\n* @returns true if in browser, false otherwise (e.g., Node.js)\n*/\nconst isBrowser = () => {\n\treturn globalThis.window !== void 0 && typeof document !== \"undefined\";\n};\n/**\n* Checks if the code is running inside an iframe\n* Used to detect embedded contexts where OAuth redirect won't work\n* @returns true if in iframe, false otherwise\n*/\nconst isIframe = () => {\n\tif (!isBrowser()) return false;\n\ttry {\n\t\treturn globalThis.self !== globalThis.top;\n\t} catch {\n\t\treturn true;\n\t}\n};\n\n//#endregion\n//#region src/plugins/anonymous-token.ts\nconst ANONYMOUS_TOKEN_ENDPOINT = \"/token/anonymous\";\nconst anonymousTokenResponseSchema = z.object({\n\ttoken: z.string(),\n\texpires_at: z.number()\n});\nconst anonymousTokenClient = () => {\n\treturn {\n\t\tid: \"anonymous-token\",\n\t\tpathMethods: { [ANONYMOUS_TOKEN_ENDPOINT]: \"GET\" },\n\t\tgetActions: ($fetch) => {\n\t\t\treturn { getAnonymousToken: async (fetchOptions) => {\n\t\t\t\treturn await $fetch(ANONYMOUS_TOKEN_ENDPOINT, {\n\t\t\t\t\tmethod: \"GET\",\n\t\t\t\t\t...fetchOptions\n\t\t\t\t});\n\t\t\t} };\n\t\t}\n\t};\n};\n\n//#endregion\n//#region src/core/better-auth-methods.ts\nconst CURRENT_TAB_CLIENT_ID = crypto.randomUUID();\nconst BETTER_AUTH_METHODS_IN_FLIGHT_REQUESTS = new InFlightRequestManager();\nconst BETTER_AUTH_METHODS_CACHE = new SessionCacheManager();\nconst BETTER_AUTH_ANONYMOUS_TOKEN_CACHE = new AnonymousTokenCacheManager();\nconst BETTER_AUTH_ENDPOINTS = {\n\tsignUp: \"/sign-up\",\n\tsignIn: \"/sign-in\",\n\tsignOut: \"/sign-out\",\n\tupdateUser: \"/update-user\",\n\tgetSession: \"/get-session\",\n\ttoken: \"/token\",\n\tanonymousSignIn: \"/sign-in/anonymous\",\n\tanonymousToken: \"/token/anonymous\"\n};\n/**\n* Handles social sign-in via popup when running inside an iframe.\n* This is necessary because OAuth redirects don't work in iframes due to\n* X-Frame-Options/CSP restrictions from OAuth providers.\n*\n* Flow:\n* 1. Request OAuth URL from server (with disableRedirect)\n* 2. Open popup window with the OAuth URL\n* 3. Wait for popup to complete and send back the session verifier\n* 4. Navigate to callbackURL with verifier - normal page load handles session\n*/\nasync function handleSocialSignInViaPopup(input, init) {\n\tconst body = JSON.parse(init?.body || \"{}\");\n\tconst originalCallbackURL = body.callbackURL || \"/\";\n\tconst popupCallbackUrl = new URL(NEON_AUTH_POPUP_CALLBACK_ROUTE, globalThis.location.origin);\n\tpopupCallbackUrl.searchParams.set(NEON_AUTH_POPUP_PARAM_NAME, \"1\");\n\tpopupCallbackUrl.searchParams.set(NEON_AUTH_POPUP_CALLBACK_PARAM_NAME, originalCallbackURL);\n\tbody.callbackURL = popupCallbackUrl.toString();\n\tbody.disableRedirect = true;\n\tconst response = await fetch(input, {\n\t\t...init,\n\t\tbody: JSON.stringify(body)\n\t});\n\tconst data = await response.json();\n\tconst oauthUrl = data.url;\n\tif (!oauthUrl) throw new Error(\"Failed to get OAuth URL\");\n\tconst popupResult = await openOAuthPopup(oauthUrl);\n\tif (!popupResult.verifier) throw new Error(\"OAuth completed but no session verifier received\");\n\tconst navigationUrl = new URL(originalCallbackURL, globalThis.location.origin);\n\tnavigationUrl.searchParams.set(NEON_AUTH_SESSION_VERIFIER_PARAM_NAME, popupResult.verifier);\n\tglobalThis.location.href = navigationUrl.toString();\n\treturn Response.json(data, { status: response.status });\n}\nconst BETTER_AUTH_METHODS_HOOKS = {\n\tsignUp: {\n\t\tonRequest: () => {},\n\t\tonSuccess: (responseData) => {\n\t\t\tif (isSessionResponseData(responseData)) {\n\t\t\t\tconst sessionData = {\n\t\t\t\t\tsession: responseData.session,\n\t\t\t\t\tuser: responseData.user\n\t\t\t\t};\n\t\t\t\tBETTER_AUTH_METHODS_CACHE.setCachedSession(sessionData);\n\t\t\t\temitAuthEvent({\n\t\t\t\t\ttype: \"SIGN_IN\",\n\t\t\t\t\tdata: sessionData\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\tsignIn: {\n\t\tbeforeFetch: (input, init) => {\n\t\t\tif (!(typeof input === \"string\" ? input : input.toString()).includes(\"/sign-in/social\") || !isIframe()) return null;\n\t\t\treturn handleSocialSignInViaPopup(input, init);\n\t\t},\n\t\tonRequest: () => {},\n\t\tonSuccess: (responseData) => {\n\t\t\tif (isSessionResponseData(responseData)) {\n\t\t\t\tconst sessionData = {\n\t\t\t\t\tsession: responseData.session,\n\t\t\t\t\tuser: responseData.user\n\t\t\t\t};\n\t\t\t\tBETTER_AUTH_METHODS_CACHE.setCachedSession(sessionData);\n\t\t\t\temitAuthEvent({\n\t\t\t\t\ttype: \"SIGN_IN\",\n\t\t\t\t\tdata: sessionData\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\tsignOut: {\n\t\tonRequest: () => {\n\t\t\tBETTER_AUTH_METHODS_CACHE.invalidateSessionCache();\n\t\t\tBETTER_AUTH_METHODS_IN_FLIGHT_REQUESTS.clearAll();\n\t\t},\n\t\tonSuccess: () => {\n\t\t\tBETTER_AUTH_METHODS_CACHE.clearSessionCache();\n\t\t\temitAuthEvent({ type: \"SIGN_OUT\" });\n\t\t}\n\t},\n\tupdateUser: {\n\t\tonRequest: () => {},\n\t\tonSuccess: (responseData) => {\n\t\t\tif (isSessionResponseData(responseData)) {\n\t\t\t\tconst sessionData = {\n\t\t\t\t\tsession: responseData.session,\n\t\t\t\t\tuser: responseData.user\n\t\t\t\t};\n\t\t\t\tBETTER_AUTH_METHODS_CACHE.setCachedSession(sessionData);\n\t\t\t\temitAuthEvent({\n\t\t\t\t\ttype: \"USER_UPDATE\",\n\t\t\t\t\tdata: sessionData\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tBETTER_AUTH_METHODS_CACHE.clearSessionCache();\n\t\t\t\temitAuthEvent({ type: \"USER_UPDATE\" });\n\t\t\t}\n\t\t}\n\t},\n\tgetSession: {\n\t\tbeforeFetch: () => {\n\t\t\tconst cachedData = BETTER_AUTH_METHODS_CACHE.getCachedSession();\n\t\t\tif (!cachedData) return null;\n\t\t\treturn Response.json(cachedData, { status: 200 });\n\t\t},\n\t\tonRequest: (ctx) => {\n\t\t\tif (!isBrowser()) return;\n\t\t\tconst neonAuthSessionVerifierParam = new URLSearchParams(globalThis.window.location.search).get(NEON_AUTH_SESSION_VERIFIER_PARAM_NAME);\n\t\t\tif (neonAuthSessionVerifierParam) {\n\t\t\t\tconst url = typeof ctx.url === \"string\" ? new URL(ctx.url) : ctx.url;\n\t\t\t\turl.searchParams.set(NEON_AUTH_SESSION_VERIFIER_PARAM_NAME, neonAuthSessionVerifierParam);\n\t\t\t\treturn {\n\t\t\t\t\t...ctx,\n\t\t\t\t\turl\n\t\t\t\t};\n\t\t\t}\n\t\t},\n\t\tonSuccess: (responseData) => {\n\t\t\tif (isSessionResponseData(responseData)) {\n\t\t\t\tconst sessionData = {\n\t\t\t\t\tsession: responseData.session,\n\t\t\t\t\tuser: responseData.user\n\t\t\t\t};\n\t\t\t\tconst wasRefreshed = BETTER_AUTH_METHODS_CACHE.wasTokenRefreshed(sessionData);\n\t\t\t\tBETTER_AUTH_METHODS_CACHE.setCachedSession(sessionData);\n\t\t\t\tif (wasRefreshed) emitAuthEvent({\n\t\t\t\t\ttype: \"TOKEN_REFRESH\",\n\t\t\t\t\tdata: sessionData\n\t\t\t\t});\n\t\t\t\tif (isBrowser()) {\n\t\t\t\t\tconst url = new URL(globalThis.window.location.href);\n\t\t\t\t\tif (url.searchParams.get(NEON_AUTH_SESSION_VERIFIER_PARAM_NAME)) {\n\t\t\t\t\t\turl.searchParams.delete(NEON_AUTH_SESSION_VERIFIER_PARAM_NAME);\n\t\t\t\t\t\thistory.replaceState(history.state, \"\", url.href);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tanonymousToken: {\n\t\tbeforeFetch: () => {\n\t\t\tconst cachedResponse = BETTER_AUTH_ANONYMOUS_TOKEN_CACHE.getCachedResponse();\n\t\t\tif (!cachedResponse) return null;\n\t\t\treturn Response.json(cachedResponse, { status: 200 });\n\t\t},\n\t\tonRequest: () => {},\n\t\tonSuccess: (responseData) => {\n\t\t\tconst parsed = anonymousTokenResponseSchema.safeParse(responseData);\n\t\t\tif (parsed.success) BETTER_AUTH_ANONYMOUS_TOKEN_CACHE.setCachedResponse(parsed.data);\n\t\t}\n\t}\n};\n/**\n* Unified event emission method that handles Better Auth broadcasts.\n* Broadcasts use Better Auth native format - each adapter handles\n* conversion to their specific format (e.g., Supabase Session).\n*\n* This ensures:\n* - Single source of truth for all event emissions\n* - Better Auth ecosystem compatibility via getGlobalBroadcastChannel()\n* - Adapter-agnostic event format\n* - Cross-tab synchronization via Better Auth's broadcast system\n*/\nasync function emitAuthEvent(event) {\n\tconst eventType = mapToEventType(event);\n\tconst sessionData = \"data\" in event ? event.data : null;\n\tconst trigger = mapToTrigger(event);\n\tif (trigger) getGlobalBroadcastChannel().post({\n\t\tevent: \"session\",\n\t\tdata: { trigger },\n\t\tclientId: CURRENT_TAB_CLIENT_ID\n\t});\n\tgetGlobalBroadcastChannel().post({\n\t\tevent: \"session\",\n\t\tdata: {\n\t\t\ttrigger: eventType,\n\t\t\tsessionData\n\t\t},\n\t\tclientId: CURRENT_TAB_CLIENT_ID\n\t});\n}\n/** Maps internal event types to NeonAuthChangeEvent */\nfunction mapToEventType(event) {\n\tswitch (event.type) {\n\t\tcase \"SIGN_IN\": return \"SIGNED_IN\";\n\t\tcase \"SIGN_OUT\": return \"SIGNED_OUT\";\n\t\tcase \"TOKEN_REFRESH\": return \"TOKEN_REFRESHED\";\n\t\tcase \"USER_UPDATE\": return \"USER_UPDATED\";\n\t}\n}\n/** Maps internal event types to Better Auth broadcast triggers */\nfunction mapToTrigger(event) {\n\tswitch (event.type) {\n\t\tcase \"SIGN_OUT\": return \"signout\";\n\t\tcase \"TOKEN_REFRESH\": return null;\n\t\tcase \"USER_UPDATE\": return \"updateUser\";\n\t\tcase \"SIGN_IN\": return null;\n\t}\n}\n/**\n* Type guard that validates response data has non-null session and user.\n* Narrows the type to ensure session and user are not null.\n*/\nfunction isSessionResponseData(responseData) {\n\treturn Boolean(responseData && typeof responseData === \"object\" && \"session\" in responseData && \"user\" in responseData && responseData.session !== null && responseData.user !== null);\n}\nfunction deriveBetterAuthMethodFromUrl(url) {\n\tif (url.includes(\"/sign-in/anonymous\")) return \"anonymousSignIn\";\n\tif (url.includes(BETTER_AUTH_ENDPOINTS.anonymousToken)) return \"anonymousToken\";\n\tif (url.includes(BETTER_AUTH_ENDPOINTS.signIn)) return \"signIn\";\n\tif (url.includes(BETTER_AUTH_ENDPOINTS.signUp)) return \"signUp\";\n\tif (url.includes(BETTER_AUTH_ENDPOINTS.signOut)) return \"signOut\";\n\tif (url.includes(BETTER_AUTH_ENDPOINTS.updateUser)) return \"updateUser\";\n\tif (url.includes(BETTER_AUTH_ENDPOINTS.getSession) || url.includes(BETTER_AUTH_ENDPOINTS.token)) return \"getSession\";\n}\nfunction initBroadcastChannel() {\n\tif (isBrowser() && globalThis.opener && globalThis.opener !== globalThis) {\n\t\tconst params = new URLSearchParams(globalThis.location.search);\n\t\tif (params.has(NEON_AUTH_POPUP_PARAM_NAME)) {\n\t\t\tconst verifier = params.get(NEON_AUTH_SESSION_VERIFIER_PARAM_NAME);\n\t\t\tconst originalCallback = params.get(NEON_AUTH_POPUP_CALLBACK_PARAM_NAME);\n\t\t\tglobalThis.opener.postMessage({\n\t\t\t\ttype: OAUTH_POPUP_MESSAGE_TYPE,\n\t\t\t\tverifier,\n\t\t\t\toriginalCallback\n\t\t\t}, \"*\");\n\t\t\tglobalThis.close();\n\t\t\treturn;\n\t\t}\n\t}\n\tgetGlobalBroadcastChannel().subscribe((message) => {\n\t\tif (message.clientId === CURRENT_TAB_CLIENT_ID) return;\n\t\tconst trigger = message.data?.trigger;\n\t\tif (trigger === \"signout\" || trigger === \"updateUser\" || trigger === \"getSession\") BETTER_AUTH_METHODS_CACHE.clearSessionCache();\n\t});\n}\n\n//#endregion\n//#region package.json\nvar name = \"@neondatabase/auth\";\nvar version = \"0.1.0-beta.21\";\n\n//#endregion\n//#region ../internal/dist/index.mjs\nconst X_NEON_CLIENT_INFO_HEADER = \"X-Neon-Client-Info\";\n/**\n* Type guard for checking if a property exists on globalThis\n*/\nfunction hasGlobalProperty(key) {\n\treturn key in globalThis;\n}\n/**\n* Detects the JavaScript framework being used at runtime.\n* Detection order matters to avoid false positives (e.g., Next.js includes React).\n*/\nfunction detectFramework() {\n\tif (typeof process !== \"undefined\" && process.env && (process.env.NEXT_RUNTIME || process.env.__NEXT_PRIVATE_ORIGIN)) return \"next\";\n\tif (typeof globalThis.window !== \"undefined\") {\n\t\tif (hasGlobalProperty(\"__NEXT_DATA__\")) return \"next\";\n\t\tif (hasGlobalProperty(\"__remixContext\")) return \"remix\";\n\t\tif (hasGlobalProperty(\"__REACT_DEVTOOLS_GLOBAL_HOOK__\")) return \"react\";\n\t\tif (hasGlobalProperty(\"__VUE__\")) return \"vue\";\n\t\tif (hasGlobalProperty(\"Zone\")) return \"angular\";\n\t}\n}\nfunction getClientInfo(sdkName, sdkVersion) {\n\tconst base = {\n\t\tsdk: sdkName,\n\t\tversion: sdkVersion,\n\t\truntime: \"unknown\",\n\t\truntimeVersion: \"unknown\",\n\t\tplatform: \"unknown\",\n\t\tarch: \"unknown\"\n\t};\n\tlet result;\n\tif (typeof process !== \"undefined\" && process.versions?.node) result = {\n\t\t...base,\n\t\truntime: \"node\",\n\t\truntimeVersion: process.versions.node,\n\t\tplatform: process.platform,\n\t\tarch: process.arch\n\t};\n\telse if (typeof Deno !== \"undefined\") result = {\n\t\t...base,\n\t\truntime: \"deno\",\n\t\truntimeVersion: Deno.version?.deno ?? \"unknown\",\n\t\tplatform: Deno.build?.os ?? \"unknown\",\n\t\tarch: Deno.build?.arch ?? \"unknown\"\n\t};\n\telse if (typeof Bun !== \"undefined\") result = {\n\t\t...base,\n\t\truntime: \"bun\",\n\t\truntimeVersion: Bun.version ?? \"unknown\",\n\t\tplatform: process?.platform ?? \"unknown\",\n\t\tarch: process?.arch ?? \"unknown\"\n\t};\n\telse if (typeof EdgeRuntime !== \"undefined\" || typeof process !== \"undefined\" && !process.versions?.node && typeof globalThis.window === \"undefined\" && typeof document === \"undefined\") result = {\n\t\t...base,\n\t\truntime: \"edge\"\n\t};\n\telse if (globalThis.window !== void 0 && typeof document !== \"undefined\") result = {\n\t\t...base,\n\t\truntime: \"browser\",\n\t\truntimeVersion: \"unknown\",\n\t\tplatform: \"web\",\n\t\tarch: \"unknown\"\n\t};\n\telse result = base;\n\tconst framework = detectFramework();\n\tif (framework) result.framework = framework;\n\treturn result;\n}\nfunction createClientInfoInjector(defaultSdkName, defaultSdkVersion) {\n\tconst cachedClientInfo = JSON.stringify(getClientInfo(defaultSdkName, defaultSdkVersion));\n\treturn function injectClientInfo$1(headers, sdkOverride) {\n\t\tconst result = new Headers(headers);\n\t\tif (result.has(X_NEON_CLIENT_INFO_HEADER)) return result;\n\t\tconst clientInfoString = sdkOverride ? JSON.stringify(getClientInfo(sdkOverride.name, sdkOverride.version)) : cachedClientInfo;\n\t\tresult.set(X_NEON_CLIENT_INFO_HEADER, clientInfoString);\n\t\treturn result;\n\t};\n}\n\n//#endregion\n//#region src/utils/client-info.ts\nconst injectClientInfo = createClientInfoInjector(name, version);\n\n//#endregion\n//#region src/core/adapter-core.ts\nconst FORCE_FETCH_HEADER = \"X-Force-Fetch\";\nconst supportedBetterAuthClientPlugins = [\n\tjwtClient(),\n\tadminClient(),\n\torganizationClient(),\n\temailOTPClient(),\n\tanonymousTokenClient()\n];\nvar NeonAuthAdapterCore = class {\n\tbetterAuthOptions;\n\t/**\n\t* Better Auth adapter implementing the NeonAuthClient interface.\n\t* See CLAUDE.md for architecture details and API mappings.\n\t*/\n\tconstructor(betterAuthClientOptions) {\n\t\tconst userOnSuccess = betterAuthClientOptions.fetchOptions?.onSuccess;\n\t\tconst userOnRequest = betterAuthClientOptions.fetchOptions?.onRequest;\n\t\tthis.betterAuthOptions = {\n\t\t\t...betterAuthClientOptions,\n\t\t\tplugins: supportedBetterAuthClientPlugins,\n\t\t\tfetchOptions: {\n\t\t\t\t...betterAuthClientOptions.fetchOptions,\n\t\t\t\tthrow: false,\n\t\t\t\tonRequest: (request) => {\n\t\t\t\t\tconst url = request.url;\n\t\t\t\t\tconst method = deriveBetterAuthMethodFromUrl(url.toString());\n\t\t\t\t\tif (method) BETTER_AUTH_METHODS_HOOKS[method].onRequest(request);\n\t\t\t\t\tuserOnRequest?.(request);\n\t\t\t\t},\n\t\t\t\tcustomFetchImpl: async (url, init) => {\n\t\t\t\t\tconst headers = injectClientInfo(init?.headers);\n\t\t\t\t\tif (headers.has(FORCE_FETCH_HEADER)) {\n\t\t\t\t\t\theaders.delete(FORCE_FETCH_HEADER);\n\t\t\t\t\t\tconst response$1 = await fetch(url, {\n\t\t\t\t\t\t\t...init,\n\t\t\t\t\t\t\theaders\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (!response$1.ok) {\n\t\t\t\t\t\t\tconst body = await response$1.clone().json().catch(() => ({}));\n\t\t\t\t\t\t\tconst err = new Error(body.message || `HTTP ${response$1.status} ${response$1.statusText}`);\n\t\t\t\t\t\t\terr.status = response$1.status;\n\t\t\t\t\t\t\terr.statusText = response$1.statusText;\n\t\t\t\t\t\t\tthrow err;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn response$1;\n\t\t\t\t\t}\n\t\t\t\t\tconst betterAuthMethod = deriveBetterAuthMethodFromUrl(url.toString());\n\t\t\t\t\tif (betterAuthMethod) {\n\t\t\t\t\t\tconst response$1 = await BETTER_AUTH_METHODS_HOOKS[betterAuthMethod].beforeFetch?.(url, init);\n\t\t\t\t\t\tif (response$1) return response$1;\n\t\t\t\t\t}\n\t\t\t\t\tconst key = `${init?.method || \"GET\"}:${url}:${init?.body || \"\"}`;\n\t\t\t\t\tconst response = await BETTER_AUTH_METHODS_IN_FLIGHT_REQUESTS.deduplicate(key, () => fetch(url, {\n\t\t\t\t\t\t...init,\n\t\t\t\t\t\theaders\n\t\t\t\t\t}));\n\t\t\t\t\tif (!response.ok) {\n\t\t\t\t\t\tconst errorBody = await response.clone().json().catch(() => ({}));\n\t\t\t\t\t\tconst err = new Error(errorBody.message || `HTTP ${response.status} ${response.statusText}`);\n\t\t\t\t\t\terr.status = response.status;\n\t\t\t\t\t\terr.statusText = response.statusText;\n\t\t\t\t\t\tthrow err;\n\t\t\t\t\t}\n\t\t\t\t\treturn response.clone();\n\t\t\t\t},\n\t\t\t\tonSuccess: async (ctx) => {\n\t\t\t\t\tconst jwt = ctx.response.headers.get(\"set-auth-jwt\");\n\t\t\t\t\tif (jwt) if (ctx.data?.session) ctx.data.session.token = jwt;\n\t\t\t\t\telse console.warn(\"[onSuccess] JWT found but no session data to inject into!\");\n\t\t\t\t\tconst url = ctx.request.url.toString();\n\t\t\t\t\tconst responseData = ctx.data;\n\t\t\t\t\tconst method = deriveBetterAuthMethodFromUrl(url);\n\t\t\t\t\tif (method) BETTER_AUTH_METHODS_HOOKS[method].onSuccess(responseData);\n\t\t\t\t\tawait userOnSuccess?.(ctx);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tinitBroadcastChannel();\n\t}\n\t/**\n\t* Get JWT token for authenticated or anonymous access.\n\t* Single source of truth for token retrieval logic.\n\t*\n\t* @param allowAnonymous - When true, fetches anonymous token if no session exists\n\t* @returns JWT token string or null if unavailable\n\t*/\n\tasync getJWTToken(allowAnonymous) {\n\t\tconst client = this.getBetterAuthInstance();\n\t\tconst session = await client.getSession();\n\t\tif (session.data?.session?.token) return session.data.session.token;\n\t\tif (allowAnonymous) return (await client.getAnonymousToken()).data?.token ?? null;\n\t\treturn null;\n\t}\n};\n\n//#endregion\nexport { CURRENT_TAB_CLIENT_ID as i, BETTER_AUTH_METHODS_CACHE as n, BETTER_AUTH_METHODS_HOOKS as r, NeonAuthAdapterCore as t };"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 1131, "column": 0}, "map": {"version":3,"sources":["file:///Users/collinsnnaji/VSCodeDevelopments/convivia24/node_modules/%40neondatabase/auth/dist/better-auth-react-adapter-Dv-o6A6O.mjs"],"sourcesContent":["import { t as NeonAuthAdapterCore } from \"./adapter-core-CtmnMMJ7.mjs\";\nimport { createAuthClient } from \"better-auth/react\";\n\n//#region src/adapters/better-auth-react/better-auth-react-adapter.ts\n/**\n* Internal implementation class - use BetterAuthReactAdapter factory function instead\n*/\nvar BetterAuthReactAdapterImpl = class extends NeonAuthAdapterCore {\n\t_betterAuth;\n\tconstructor(betterAuthClientOptions) {\n\t\tsuper(betterAuthClientOptions);\n\t\tthis._betterAuth = createAuthClient(this.betterAuthOptions);\n\t}\n\tgetBetterAuthInstance() {\n\t\treturn this._betterAuth;\n\t}\n};\n/**\n* Factory function that returns an adapter builder.\n* The builder is called by createClient/createAuthClient with the URL.\n*\n* @param options - Optional adapter configuration (baseURL is injected separately)\n* @returns A builder function that creates the adapter instance\n*\n* @example\n* ```typescript\n* const client = createClient({\n*   auth: {\n*     url: 'https://auth.example.com',\n*     adapter: BetterAuthReactAdapter(),\n*   },\n*   dataApi: { url: 'https://data-api.example.com' },\n* });\n* ```\n*/\nfunction BetterAuthReactAdapter(options) {\n\treturn (url, fetchOptions) => new BetterAuthReactAdapterImpl({\n\t\tbaseURL: url,\n\t\t...options,\n\t\tfetchOptions: {\n\t\t\t...options?.fetchOptions,\n\t\t\theaders: {\n\t\t\t\t...options?.fetchOptions?.headers,\n\t\t\t\t...fetchOptions?.headers\n\t\t\t}\n\t\t}\n\t});\n}\n\n//#endregion\nexport { BetterAuthReactAdapter as t };"],"names":[],"mappings":";;;;;;;;;;;AAAA;AACA;;;;;;;;;;AAEA,qEAAqE;AACrE;;AAEA,GACA,IAAI,2CAA6B;;;aAA7B,2BAES,uBAAuB;wLAFhC;;gBAGF,0KAHE;YAGI;YAFP,gLAAA,eAAA,KAAA;QAGC,MAAK,WAAW,GAAG,IAAA,oOAAgB,EAAC,MAAK,iBAAiB;;;;;YAE3D,KAAA;mBAAA,SAAA;gBACC,OAAO,IAAI,CAAC,WAAW;YACxB;;;;EAR8C,sLAAmB;AAUlE;;;;;;;;;;;;;;;;;AAiBA,GACA,SAAS,uBAAuB,OAAO;IACtC,OAAO,SAAC,KAAK;YAMP;eANwB,IAAI,2BAA2B;YAC5D,SAAS;WACN;YACH,cAAc,wVACV,oBAAA,8BAAA,QAAS,YAAY;gBACxB,SAAS,2KACL,oBAAA,+BAAA,wBAAA,QAAS,YAAY,cAArB,4CAAA,sBAAuB,OAAO,EAC9B,yBAAA,mCAAA,aAAc,OAAO;;;;AAI5B","ignoreList":[0]}},
    {"offset": {"line": 1212, "column": 0}, "map": {"version":3,"sources":["file:///Users/collinsnnaji/VSCodeDevelopments/convivia24/node_modules/%40neondatabase/auth/dist/supabase-adapter-BlcGPyOf.mjs"],"sourcesContent":["import { i as CURRENT_TAB_CLIENT_ID, n as BETTER_AUTH_METHODS_CACHE, r as BETTER_AUTH_METHODS_HOOKS, t as NeonAuthAdapterCore } from \"./adapter-core-CtmnMMJ7.mjs\";\nimport { n as DEFAULT_SESSION_EXPIRY_MS } from \"./constants-Cupc_bln.mjs\";\nimport { createAuthClient, getGlobalBroadcastChannel } from \"better-auth/client\";\nimport { AuthApiError, AuthError, isAuthError } from \"@supabase/auth-js\";\nimport { base64url, decodeJwt, decodeProtectedHeader } from \"jose\";\n\n//#region src/adapters/better-auth-vanilla/better-auth-vanilla-adapter.ts\n/**\n* Internal implementation class - use BetterAuthVanillaAdapter factory function instead\n*/\nvar BetterAuthVanillaAdapterImpl = class extends NeonAuthAdapterCore {\n\t_betterAuth;\n\tconstructor(betterAuthClientOptions) {\n\t\tsuper(betterAuthClientOptions);\n\t\tthis._betterAuth = createAuthClient(this.betterAuthOptions);\n\t}\n\tgetBetterAuthInstance() {\n\t\treturn this._betterAuth;\n\t}\n};\n/**\n* Factory function that returns an adapter builder.\n* The builder is called by createClient/createAuthClient with the URL.\n*\n* @param options - Optional adapter configuration (baseURL is injected separately)\n* @returns A builder function that creates the adapter instance\n*\n* @example\n* ```typescript\n* const client = createClient({\n*   auth: {\n*     url: 'https://auth.example.com',\n*     adapter: BetterAuthVanillaAdapter(),\n*   },\n*   dataApi: { url: 'https://data-api.example.com' },\n* });\n* ```\n*/\nfunction BetterAuthVanillaAdapter(options) {\n\treturn (url, fetchOptions) => new BetterAuthVanillaAdapterImpl({\n\t\tbaseURL: url,\n\t\t...options,\n\t\tfetchOptions: {\n\t\t\t...options?.fetchOptions,\n\t\t\theaders: {\n\t\t\t\t...options?.fetchOptions?.headers,\n\t\t\t\t...fetchOptions?.headers\n\t\t\t}\n\t\t}\n\t});\n}\n\n//#endregion\n//#region src/utils/date.ts\nfunction toISOString(date) {\n\tif (!date) return (/* @__PURE__ */ new Date()).toISOString();\n\tif (typeof date === \"string\") return date;\n\tif (typeof date === \"number\") return new Date(date).toISOString();\n\treturn date.toISOString();\n}\n\n//#endregion\n//#region src/adapters/supabase/errors/definitions.ts\n/**\n* Error codes for type-safe error handling\n*/\nconst AuthErrorCode = {\n\tBadJwt: \"bad_jwt\",\n\tInvalidCredentials: \"invalid_credentials\",\n\tSessionExpired: \"session_expired\",\n\tSessionNotFound: \"session_not_found\",\n\tInvalidGrant: \"invalid_grant\",\n\tUserNotFound: \"user_not_found\",\n\tUserAlreadyExists: \"user_already_exists\",\n\tEmailExists: \"email_exists\",\n\tPhoneExists: \"phone_exists\",\n\tEmailNotConfirmed: \"email_not_confirmed\",\n\tPhoneNotConfirmed: \"phone_not_confirmed\",\n\tValidationFailed: \"validation_failed\",\n\tBadJson: \"bad_json\",\n\tWeakPassword: \"weak_password\",\n\tEmailAddressInvalid: \"email_address_invalid\",\n\tFeatureNotSupported: \"feature_not_supported\",\n\tNotImplemented: \"not_implemented\",\n\tOAuthProviderNotSupported: \"oauth_provider_not_supported\",\n\tPhoneProviderDisabled: \"phone_provider_disabled\",\n\tMagicLinkNotSupported: \"magic_link_not_supported\",\n\tSsoProviderDisabled: \"sso_provider_disabled\",\n\tAnonymousProviderDisabled: \"anonymous_provider_disabled\",\n\tWeb3ProviderDisabled: \"web3_provider_disabled\",\n\tBadOAuthCallback: \"bad_oauth_callback\",\n\tOAuthCallbackFailed: \"oauth_callback_failed\",\n\tOverRequestRateLimit: \"over_request_rate_limit\",\n\tOverEmailSendRateLimit: \"over_email_send_rate_limit\",\n\tOverSmsSendRateLimit: \"over_sms_send_rate_limit\",\n\tUnexpectedFailure: \"unexpected_failure\",\n\tInternalError: \"internal_error\",\n\tIdentityNotFound: \"identity_not_found\",\n\tUnknownError: \"unknown_error\"\n};\n/**\n* Complete error definitions map\n* Maps error codes to HTTP status codes and default messages\n*/\nconst ERROR_DEFINITIONS = {\n\t[AuthErrorCode.BadJwt]: {\n\t\tcode: AuthErrorCode.BadJwt,\n\t\tstatus: 401,\n\t\tmessage: \"Invalid or expired session token\",\n\t\tdescription: \"The JWT token is malformed, expired, or has an invalid signature\"\n\t},\n\t[AuthErrorCode.InvalidCredentials]: {\n\t\tcode: AuthErrorCode.InvalidCredentials,\n\t\tstatus: 401,\n\t\tmessage: \"Invalid email or password\",\n\t\tdescription: \"The provided credentials do not match any user account\"\n\t},\n\t[AuthErrorCode.SessionExpired]: {\n\t\tcode: AuthErrorCode.SessionExpired,\n\t\tstatus: 401,\n\t\tmessage: \"Session has expired\",\n\t\tdescription: \"The user session has exceeded its timeout period\"\n\t},\n\t[AuthErrorCode.SessionNotFound]: {\n\t\tcode: AuthErrorCode.SessionNotFound,\n\t\tstatus: 401,\n\t\tmessage: \"No active session found\",\n\t\tdescription: \"The user does not have an active session or the session was invalidated\"\n\t},\n\t[AuthErrorCode.InvalidGrant]: {\n\t\tcode: AuthErrorCode.InvalidGrant,\n\t\tstatus: 401,\n\t\tmessage: \"Invalid authorization grant\",\n\t\tdescription: \"OAuth/OIDC grant validation failed\"\n\t},\n\t[AuthErrorCode.UserNotFound]: {\n\t\tcode: AuthErrorCode.UserNotFound,\n\t\tstatus: 404,\n\t\tmessage: \"User not found\",\n\t\tdescription: \"No user exists with the provided identifier\"\n\t},\n\t[AuthErrorCode.UserAlreadyExists]: {\n\t\tcode: AuthErrorCode.UserAlreadyExists,\n\t\tstatus: 409,\n\t\tmessage: \"User already exists\",\n\t\tdescription: \"A user with this email or phone number is already registered\"\n\t},\n\t[AuthErrorCode.EmailExists]: {\n\t\tcode: AuthErrorCode.EmailExists,\n\t\tstatus: 409,\n\t\tmessage: \"Email address already registered\",\n\t\tdescription: \"This email address is already associated with an account\"\n\t},\n\t[AuthErrorCode.PhoneExists]: {\n\t\tcode: AuthErrorCode.PhoneExists,\n\t\tstatus: 409,\n\t\tmessage: \"Phone number already registered\",\n\t\tdescription: \"This phone number is already associated with an account\"\n\t},\n\t[AuthErrorCode.EmailNotConfirmed]: {\n\t\tcode: AuthErrorCode.EmailNotConfirmed,\n\t\tstatus: 422,\n\t\tmessage: \"Email verification required\",\n\t\tdescription: \"The user must verify their email before signing in\"\n\t},\n\t[AuthErrorCode.PhoneNotConfirmed]: {\n\t\tcode: AuthErrorCode.PhoneNotConfirmed,\n\t\tstatus: 422,\n\t\tmessage: \"Phone verification required\",\n\t\tdescription: \"The user must verify their phone number before signing in\"\n\t},\n\t[AuthErrorCode.ValidationFailed]: {\n\t\tcode: AuthErrorCode.ValidationFailed,\n\t\tstatus: 400,\n\t\tmessage: \"Invalid request parameters\",\n\t\tdescription: \"One or more request parameters are invalid or missing\"\n\t},\n\t[AuthErrorCode.BadJson]: {\n\t\tcode: AuthErrorCode.BadJson,\n\t\tstatus: 400,\n\t\tmessage: \"Invalid JSON in request body\",\n\t\tdescription: \"The request body contains malformed JSON\"\n\t},\n\t[AuthErrorCode.WeakPassword]: {\n\t\tcode: AuthErrorCode.WeakPassword,\n\t\tstatus: 400,\n\t\tmessage: \"Password does not meet security requirements\",\n\t\tdescription: \"The password is too weak or does not meet complexity requirements\"\n\t},\n\t[AuthErrorCode.EmailAddressInvalid]: {\n\t\tcode: AuthErrorCode.EmailAddressInvalid,\n\t\tstatus: 400,\n\t\tmessage: \"Invalid email address format\",\n\t\tdescription: \"The provided email address is not in a valid format\"\n\t},\n\t[AuthErrorCode.FeatureNotSupported]: {\n\t\tcode: AuthErrorCode.FeatureNotSupported,\n\t\tstatus: 403,\n\t\tmessage: \"Feature not available\",\n\t\tdescription: \"This feature is not supported in the current configuration\"\n\t},\n\t[AuthErrorCode.NotImplemented]: {\n\t\tcode: AuthErrorCode.NotImplemented,\n\t\tstatus: 501,\n\t\tmessage: \"Feature not implemented\",\n\t\tdescription: \"This feature has not been implemented yet\"\n\t},\n\t[AuthErrorCode.OAuthProviderNotSupported]: {\n\t\tcode: AuthErrorCode.OAuthProviderNotSupported,\n\t\tstatus: 403,\n\t\tmessage: \"OAuth provider not supported\",\n\t\tdescription: \"The requested OAuth provider is not enabled\"\n\t},\n\t[AuthErrorCode.PhoneProviderDisabled]: {\n\t\tcode: AuthErrorCode.PhoneProviderDisabled,\n\t\tstatus: 403,\n\t\tmessage: \"Phone authentication not available\",\n\t\tdescription: \"Phone number authentication is not enabled\"\n\t},\n\t[AuthErrorCode.MagicLinkNotSupported]: {\n\t\tcode: AuthErrorCode.MagicLinkNotSupported,\n\t\tstatus: 403,\n\t\tmessage: \"Magic link authentication not available\",\n\t\tdescription: \"Magic link authentication is not supported\"\n\t},\n\t[AuthErrorCode.SsoProviderDisabled]: {\n\t\tcode: AuthErrorCode.SsoProviderDisabled,\n\t\tstatus: 403,\n\t\tmessage: \"SSO not supported\",\n\t\tdescription: \"Enterprise SSO authentication is not available\"\n\t},\n\t[AuthErrorCode.AnonymousProviderDisabled]: {\n\t\tcode: AuthErrorCode.AnonymousProviderDisabled,\n\t\tstatus: 403,\n\t\tmessage: \"Anonymous authentication not available\",\n\t\tdescription: \"Anonymous sign-in is not enabled\"\n\t},\n\t[AuthErrorCode.Web3ProviderDisabled]: {\n\t\tcode: AuthErrorCode.Web3ProviderDisabled,\n\t\tstatus: 403,\n\t\tmessage: \"Web3 authentication not supported\",\n\t\tdescription: \"Web3/blockchain authentication is not available\"\n\t},\n\t[AuthErrorCode.BadOAuthCallback]: {\n\t\tcode: AuthErrorCode.BadOAuthCallback,\n\t\tstatus: 400,\n\t\tmessage: \"Invalid OAuth callback\",\n\t\tdescription: \"The OAuth callback request is missing required parameters\"\n\t},\n\t[AuthErrorCode.OAuthCallbackFailed]: {\n\t\tcode: AuthErrorCode.OAuthCallbackFailed,\n\t\tstatus: 500,\n\t\tmessage: \"OAuth authentication failed\",\n\t\tdescription: \"The OAuth callback completed but no session was created\"\n\t},\n\t[AuthErrorCode.OverRequestRateLimit]: {\n\t\tcode: AuthErrorCode.OverRequestRateLimit,\n\t\tstatus: 429,\n\t\tmessage: \"Too many requests\",\n\t\tdescription: \"Rate limit exceeded. Please try again later\"\n\t},\n\t[AuthErrorCode.OverEmailSendRateLimit]: {\n\t\tcode: AuthErrorCode.OverEmailSendRateLimit,\n\t\tstatus: 429,\n\t\tmessage: \"Too many email requests\",\n\t\tdescription: \"Too many emails sent. Please wait before trying again\"\n\t},\n\t[AuthErrorCode.OverSmsSendRateLimit]: {\n\t\tcode: AuthErrorCode.OverSmsSendRateLimit,\n\t\tstatus: 429,\n\t\tmessage: \"Too many SMS requests\",\n\t\tdescription: \"Too many SMS messages sent. Please wait before trying again\"\n\t},\n\t[AuthErrorCode.UnexpectedFailure]: {\n\t\tcode: AuthErrorCode.UnexpectedFailure,\n\t\tstatus: 500,\n\t\tmessage: \"An unexpected error occurred\",\n\t\tdescription: \"The server encountered an unexpected condition\"\n\t},\n\t[AuthErrorCode.InternalError]: {\n\t\tcode: AuthErrorCode.InternalError,\n\t\tstatus: 500,\n\t\tmessage: \"Internal server error\",\n\t\tdescription: \"An internal error occurred while processing the request\"\n\t},\n\t[AuthErrorCode.IdentityNotFound]: {\n\t\tcode: AuthErrorCode.IdentityNotFound,\n\t\tstatus: 404,\n\t\tmessage: \"Identity not found\",\n\t\tdescription: \"The requested user identity does not exist\"\n\t},\n\t[AuthErrorCode.UnknownError]: {\n\t\tcode: AuthErrorCode.UnknownError,\n\t\tstatus: 500,\n\t\tmessage: \"An unknown error occurred\",\n\t\tdescription: \"The error could not be categorized\"\n\t}\n};\n/**\n* Helper to get error definition by code\n*/\nfunction getErrorDefinition(code) {\n\treturn ERROR_DEFINITIONS[code];\n}\n/**\n* Create an AuthError or AuthApiError with proper status and message\n*\n* @param code - The error code from AuthErrorCode\n* @param customMessage - Optional custom message (defaults to error definition message)\n* @returns AuthError for 5xx errors, AuthApiError for 4xx errors\n*/\nfunction createAuthError(code, customMessage) {\n\tconst def = getErrorDefinition(code);\n\tconst message = customMessage || def.message;\n\tconst status = def.status;\n\tif (status !== 500 && status !== 501 && status !== 503) return new AuthApiError(message, status, def.code);\n\treturn new AuthError(message, status, def.code);\n}\n\n//#endregion\n//#region src/adapters/supabase/errors/mappings.ts\n/**\n* Maps Better Auth error codes to AuthErrorCode\n* Based on Better Auth SDK error codes\n*\n* @see https://www.better-auth.com/docs/concepts/error-handling\n*/\nconst BETTER_AUTH_ERROR_MAP = {\n\t\"INVALID_EMAIL_OR_PASSWORD\": AuthErrorCode.InvalidCredentials,\n\t\"INVALID_PASSWORD\": AuthErrorCode.InvalidCredentials,\n\t\"INVALID_EMAIL\": AuthErrorCode.EmailAddressInvalid,\n\t\"USER_NOT_FOUND\": AuthErrorCode.UserNotFound,\n\t\"INVALID_TOKEN\": AuthErrorCode.BadJwt,\n\t\"SESSION_EXPIRED\": AuthErrorCode.SessionExpired,\n\t\"FAILED_TO_GET_SESSION\": AuthErrorCode.SessionNotFound,\n\t\"USER_ALREADY_EXISTS\": AuthErrorCode.UserAlreadyExists,\n\t\"EMAIL_NOT_VERIFIED\": AuthErrorCode.EmailNotConfirmed,\n\t\"USER_EMAIL_NOT_FOUND\": AuthErrorCode.UserNotFound,\n\t\"PASSWORD_TOO_SHORT\": AuthErrorCode.WeakPassword,\n\t\"PASSWORD_TOO_LONG\": AuthErrorCode.WeakPassword,\n\t\"USER_ALREADY_HAS_PASSWORD\": AuthErrorCode.ValidationFailed,\n\t\"CREDENTIAL_ACCOUNT_NOT_FOUND\": AuthErrorCode.IdentityNotFound,\n\t\"FAILED_TO_UNLINK_LAST_ACCOUNT\": AuthErrorCode.ValidationFailed,\n\t\"ACCOUNT_NOT_FOUND\": AuthErrorCode.IdentityNotFound,\n\t\"SOCIAL_ACCOUNT_ALREADY_LINKED\": AuthErrorCode.ValidationFailed,\n\t\"PROVIDER_NOT_FOUND\": AuthErrorCode.OAuthProviderNotSupported,\n\t\"ID_TOKEN_NOT_SUPPORTED\": AuthErrorCode.FeatureNotSupported,\n\t\"FAILED_TO_CREATE_USER\": AuthErrorCode.InternalError,\n\t\"FAILED_TO_CREATE_SESSION\": AuthErrorCode.InternalError,\n\t\"FAILED_TO_UPDATE_USER\": AuthErrorCode.InternalError,\n\t\"EMAIL_CAN_NOT_BE_UPDATED\": AuthErrorCode.FeatureNotSupported\n};\n/**\n* Maps HTTP status codes from Better Auth to AuthErrorCode\n*/\nconst STATUS_CODE_ERROR_MAP = {\n\t400: AuthErrorCode.ValidationFailed,\n\t401: AuthErrorCode.BadJwt,\n\t403: AuthErrorCode.FeatureNotSupported,\n\t404: AuthErrorCode.UserNotFound,\n\t409: AuthErrorCode.UserAlreadyExists,\n\t422: AuthErrorCode.ValidationFailed,\n\t429: AuthErrorCode.OverRequestRateLimit,\n\t500: AuthErrorCode.UnexpectedFailure,\n\t501: AuthErrorCode.NotImplemented,\n\t503: AuthErrorCode.FeatureNotSupported\n};\n\n//#endregion\n//#region src/core/better-auth-helpers.ts\n/**\n* Normalize Better Auth errors to standard AuthError format\n*\n* Handles three error formats:\n* 1. BetterFetchError: { status, statusText, message?, code? }\n* 2. BetterAuthErrorResponse: { status, statusText, message?, code? }\n* 3. Standard Error: { message, name, stack }\n*\n* Maps Better Auth errors to appropriate AuthError/AuthApiError with:\n* - Correct HTTP status codes\n* - Standard error codes (snake_case)\n* - User-friendly, security-conscious messages\n*/\nfunction normalizeBetterAuthError(error) {\n\tif (error !== null && error !== void 0 && typeof error === \"object\" && \"status\" in error && \"statusText\" in error) {\n\t\tconst betterError = error;\n\t\tconst status = betterError.status;\n\t\tif (\"code\" in betterError && betterError.code && typeof betterError.code === \"string\") {\n\t\t\tconst mappedCode = BETTER_AUTH_ERROR_MAP[betterError.code];\n\t\t\tif (mappedCode) {\n\t\t\t\tconst def$2 = getErrorDefinition(mappedCode);\n\t\t\t\treturn createNormalizedError(def$2.message, def$2.status, def$2.code, status);\n\t\t\t}\n\t\t}\n\t\tconst def$1 = getErrorDefinition(mapStatusCodeToErrorCode(status, betterError.message || betterError.statusText));\n\t\treturn createNormalizedError(betterError.message || def$1.message, status, def$1.code, status);\n\t}\n\tif (error instanceof Error) {\n\t\tconst def$1 = getErrorDefinition(mapMessageToErrorCode(error.message));\n\t\treturn createNormalizedError(error.message || def$1.message, def$1.status, def$1.code, def$1.status);\n\t}\n\tconst def = getErrorDefinition(AuthErrorCode.UnknownError);\n\treturn new AuthError(def.message, def.status, def.code);\n}\n/**\n* Map HTTP status code to AuthErrorCode\n* Uses message content for disambiguation when status code is ambiguous\n*/\nfunction mapStatusCodeToErrorCode(status, message) {\n\tconst lowerMessage = message?.toLowerCase() || \"\";\n\tswitch (status) {\n\t\tcase 401:\n\t\t\tif (lowerMessage.includes(\"token\") || lowerMessage.includes(\"jwt\")) return AuthErrorCode.BadJwt;\n\t\t\tif (lowerMessage.includes(\"session\")) return AuthErrorCode.SessionNotFound;\n\t\t\tif (lowerMessage.includes(\"expired\")) return AuthErrorCode.SessionExpired;\n\t\t\treturn AuthErrorCode.InvalidCredentials;\n\t\tcase 404:\n\t\t\tif (lowerMessage.includes(\"identity\") || lowerMessage.includes(\"account\")) return AuthErrorCode.IdentityNotFound;\n\t\t\tif (lowerMessage.includes(\"session\")) return AuthErrorCode.SessionNotFound;\n\t\t\treturn AuthErrorCode.UserNotFound;\n\t\tcase 409:\n\t\t\tif (lowerMessage.includes(\"email\")) return AuthErrorCode.EmailExists;\n\t\t\tif (lowerMessage.includes(\"phone\")) return AuthErrorCode.PhoneExists;\n\t\t\treturn AuthErrorCode.UserAlreadyExists;\n\t\tcase 422:\n\t\t\tif (lowerMessage.includes(\"email\") && lowerMessage.includes(\"confirm\")) return AuthErrorCode.EmailNotConfirmed;\n\t\t\tif (lowerMessage.includes(\"phone\") && lowerMessage.includes(\"confirm\")) return AuthErrorCode.PhoneNotConfirmed;\n\t\t\treturn AuthErrorCode.ValidationFailed;\n\t\tcase 429:\n\t\t\tif (lowerMessage.includes(\"email\")) return AuthErrorCode.OverEmailSendRateLimit;\n\t\t\tif (lowerMessage.includes(\"sms\") || lowerMessage.includes(\"phone\")) return AuthErrorCode.OverSmsSendRateLimit;\n\t\t\treturn AuthErrorCode.OverRequestRateLimit;\n\t\tcase 400:\n\t\t\tif (lowerMessage.includes(\"password\") && lowerMessage.includes(\"weak\")) return AuthErrorCode.WeakPassword;\n\t\t\tif (lowerMessage.includes(\"email\") && lowerMessage.includes(\"invalid\")) return AuthErrorCode.EmailAddressInvalid;\n\t\t\tif (lowerMessage.includes(\"json\")) return AuthErrorCode.BadJson;\n\t\t\tif (lowerMessage.includes(\"oauth\") || lowerMessage.includes(\"callback\")) return AuthErrorCode.BadOAuthCallback;\n\t\t\treturn AuthErrorCode.ValidationFailed;\n\t\tcase 403:\n\t\t\tif (lowerMessage.includes(\"provider\") || lowerMessage.includes(\"oauth\")) return AuthErrorCode.OAuthProviderNotSupported;\n\t\t\tif (lowerMessage.includes(\"phone\")) return AuthErrorCode.PhoneProviderDisabled;\n\t\t\tif (lowerMessage.includes(\"sso\")) return AuthErrorCode.SsoProviderDisabled;\n\t\t\treturn AuthErrorCode.FeatureNotSupported;\n\t\tcase 501: return AuthErrorCode.NotImplemented;\n\t\tcase 503: return AuthErrorCode.FeatureNotSupported;\n\t\tdefault:\n\t\t\tif (lowerMessage.includes(\"oauth\")) return AuthErrorCode.OAuthCallbackFailed;\n\t\t\treturn AuthErrorCode.UnexpectedFailure;\n\t}\n}\n/**\n* Map error message content to AuthErrorCode\n* Used as fallback when status code is not available\n*/\nfunction mapMessageToErrorCode(message) {\n\tconst lower = message.toLowerCase();\n\tif (lower.includes(\"invalid login\") || lower.includes(\"incorrect\") || lower.includes(\"wrong password\")) return AuthErrorCode.InvalidCredentials;\n\tif (lower.includes(\"token\") && (lower.includes(\"invalid\") || lower.includes(\"expired\"))) return AuthErrorCode.BadJwt;\n\tif (lower.includes(\"session\") && lower.includes(\"expired\")) return AuthErrorCode.SessionExpired;\n\tif (lower.includes(\"session\") && lower.includes(\"not found\")) return AuthErrorCode.SessionNotFound;\n\tif (lower.includes(\"already exists\") || lower.includes(\"already registered\")) return AuthErrorCode.UserAlreadyExists;\n\tif (lower.includes(\"not found\") && lower.includes(\"user\")) return AuthErrorCode.UserNotFound;\n\tif (lower.includes(\"not found\") && lower.includes(\"identity\")) return AuthErrorCode.IdentityNotFound;\n\tif (lower.includes(\"email\") && lower.includes(\"not confirmed\")) return AuthErrorCode.EmailNotConfirmed;\n\tif (lower.includes(\"phone\") && lower.includes(\"not confirmed\")) return AuthErrorCode.PhoneNotConfirmed;\n\tif (lower.includes(\"weak password\") || lower.includes(\"password\") && lower.includes(\"requirements\")) return AuthErrorCode.WeakPassword;\n\tif (lower.includes(\"email\") && lower.includes(\"invalid\")) return AuthErrorCode.EmailAddressInvalid;\n\tif (lower.includes(\"rate limit\") || lower.includes(\"too many requests\")) return AuthErrorCode.OverRequestRateLimit;\n\tif (lower.includes(\"oauth\") && lower.includes(\"failed\")) return AuthErrorCode.OAuthCallbackFailed;\n\tif (lower.includes(\"provider\") && lower.includes(\"not supported\")) return AuthErrorCode.OAuthProviderNotSupported;\n\treturn AuthErrorCode.UnexpectedFailure;\n}\n/**\n* Create normalized error with correct type (AuthError vs AuthApiError)\n* Uses AuthApiError for non-500 status codes (API/client errors)\n* Uses AuthError for 500 status codes (server errors)\n*/\nfunction createNormalizedError(message, targetStatus, code, _originalStatus) {\n\tconst status = targetStatus;\n\tif (status !== 500 && status !== 501 && status !== 503) return new AuthApiError(message, status, code);\n\treturn new AuthError(message, status, code);\n}\n/**\n* Map Better Auth session to Session format\n*/\nfunction mapBetterAuthSession(betterAuthSession, betterAuthUser) {\n\tif (!betterAuthSession || !betterAuthUser) return null;\n\tlet expiresAt;\n\tif (typeof betterAuthSession.expiresAt === \"string\") expiresAt = Math.floor(new Date(betterAuthSession.expiresAt).getTime() / 1e3);\n\telse if (typeof betterAuthSession.expiresAt === \"object\" && betterAuthSession.expiresAt instanceof Date) expiresAt = Math.floor(betterAuthSession.expiresAt.getTime() / 1e3);\n\telse expiresAt = Math.floor(Date.now() / 1e3) + Math.floor(DEFAULT_SESSION_EXPIRY_MS / 1e3);\n\tconst now = Math.floor(Date.now() / 1e3);\n\tconst expiresIn = Math.max(0, expiresAt - now);\n\treturn {\n\t\taccess_token: betterAuthSession.token,\n\t\trefresh_token: \"\",\n\t\texpires_at: expiresAt,\n\t\texpires_in: expiresIn,\n\t\ttoken_type: \"bearer\",\n\t\tuser: mapBetterAuthUser(betterAuthUser)\n\t};\n}\n/**\n* Map Better Auth user to User format\n*/\nfunction mapBetterAuthUser(betterAuthUser) {\n\tconst createdAt = toISOString(betterAuthUser.createdAt);\n\tconst updatedAt = toISOString(betterAuthUser.updatedAt);\n\tconst userMetadata = {};\n\tif (betterAuthUser.name) userMetadata.displayName = betterAuthUser.name;\n\tif (betterAuthUser.image) userMetadata.profileImageUrl = betterAuthUser.image;\n\tconst userRecord = betterAuthUser;\n\tfor (const key of Object.keys(userRecord)) if (![\n\t\t\"id\",\n\t\t\"email\",\n\t\t\"emailVerified\",\n\t\t\"name\",\n\t\t\"image\",\n\t\t\"createdAt\",\n\t\t\"updatedAt\"\n\t].includes(key)) userMetadata[key] = userRecord[key];\n\treturn {\n\t\tid: betterAuthUser.id,\n\t\temail: betterAuthUser.email || \"\",\n\t\temail_confirmed_at: betterAuthUser.emailVerified ? createdAt : void 0,\n\t\tphone: void 0,\n\t\tconfirmed_at: betterAuthUser.emailVerified ? createdAt : void 0,\n\t\tlast_sign_in_at: updatedAt,\n\t\tapp_metadata: {},\n\t\tuser_metadata: userMetadata,\n\t\tidentities: [],\n\t\tcreated_at: createdAt,\n\t\tupdated_at: updatedAt,\n\t\taud: \"authenticated\",\n\t\trole: \"authenticated\"\n\t};\n}\nfunction mapBetterAuthIdentity(betterAuthUserIdentityAccount, accountInfoData) {\n\treturn {\n\t\tid: betterAuthUserIdentityAccount.id,\n\t\tuser_id: betterAuthUserIdentityAccount.id,\n\t\tidentity_id: betterAuthUserIdentityAccount.accountId,\n\t\tprovider: betterAuthUserIdentityAccount.providerId,\n\t\tcreated_at: toISOString(betterAuthUserIdentityAccount.createdAt),\n\t\tupdated_at: toISOString(betterAuthUserIdentityAccount.updatedAt),\n\t\tlast_sign_in_at: toISOString(betterAuthUserIdentityAccount.updatedAt),\n\t\tidentity_data: accountInfoData ? {\n\t\t\tprovider: betterAuthUserIdentityAccount.providerId,\n\t\t\tprovider_id: betterAuthUserIdentityAccount.accountId,\n\t\t\tscopes: betterAuthUserIdentityAccount.scopes,\n\t\t\temail: accountInfoData.data.email,\n\t\t\tname: accountInfoData.data.user.name,\n\t\t\tpicture: accountInfoData.data.user.picture,\n\t\t\temail_verified: accountInfoData.data.user.email_verified,\n\t\t\t...accountInfoData.data\n\t\t} : {\n\t\t\tprovider: betterAuthUserIdentityAccount.providerId,\n\t\t\tprovider_id: betterAuthUserIdentityAccount.accountId,\n\t\t\tscopes: betterAuthUserIdentityAccount.scopes\n\t\t}\n\t};\n}\n\n//#endregion\n//#region src/adapters/supabase/supabase-adapter.ts\n/**\n* Duck-type check for Better Auth API errors.\n* Replaces `instanceof APIError` to avoid importing server-side code.\n*/\nfunction isBetterAuthAPIError(error) {\n\treturn error !== null && typeof error === \"object\" && \"status\" in error && typeof error.status === \"number\";\n}\n/**\n* Internal implementation class - use SupabaseAuthAdapter factory function instead\n*/\nvar SupabaseAuthAdapterImpl = class extends NeonAuthAdapterCore {\n\tadmin = void 0;\n\tmfa = void 0;\n\toauth = void 0;\n\t_betterAuth;\n\t_stateChangeEmitters = /* @__PURE__ */ new Map();\n\tconstructor(betterAuthClientOptions) {\n\t\tsuper(betterAuthClientOptions);\n\t\tthis._betterAuth = createAuthClient(this.betterAuthOptions);\n\t\t/**\n\t\t* useSession() - Automatic Session Management\n\t\t*\n\t\t* Enabled by Default:\n\t\t* -  Refetch on Window Focus: Automatically refetches session when user returns to the tab\n\t\t* -  Cross-Tab Sync: Syncs session state across all browser tabs (sign out in one = sign out in all)\n\t\t* -  Online/Offline Detection: Refetches session when network connection is restored\n\t\t* -  Interval Polling: Disabled (refetchInterval: 0)\n\t\t*\n\t\t* Returns:\n\t\t* - data: Session object (user + session)\n\t\t* - isPending: Loading state\n\t\t* - isRefetching: Refetch in progress\n\t\t* - error: Error object if any\n\t\t* - refetch(): Manual refetch function\n\t\t*\n\t\t* Customize with:\n\t\t* createAuthClient({\n\t\t*   sessionOptions: {\n\t\t*     refetchOnWindowFocus: true,  // default\n\t\t*     refetchInterval: 0,           // default (seconds, 0 = off)\n\t\t*     refetchWhenOffline: false     // default\n\t\t*   }\n\t\t* })\n\t\t*/\n\t\tthis._betterAuth.useSession.subscribe((value) => {\n\t\t\tif (!value.data?.session || !value.data?.user) {\n\t\t\t\tBETTER_AUTH_METHODS_CACHE.clearSessionCache();\n\t\t\t\treturn;\n\t\t\t}\n\t\t});\n\t\tgetGlobalBroadcastChannel().subscribe((message) => {\n\t\t\tif (message.clientId === CURRENT_TAB_CLIENT_ID) return;\n\t\t\tif (message.data && \"sessionData\" in message.data) {\n\t\t\t\tconst sessionData = message.data.sessionData;\n\t\t\t\tconst trigger = message.data.trigger;\n\t\t\t\tif (sessionData) BETTER_AUTH_METHODS_CACHE.setCachedSession(sessionData);\n\t\t\t\telse BETTER_AUTH_METHODS_CACHE.clearSessionCache();\n\t\t\t\tconst supabaseSession = sessionData ? mapBetterAuthSession(sessionData.session, sessionData.user) : null;\n\t\t\t\tconst promises = [...this._stateChangeEmitters.values()].map((subscription) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn Promise.resolve(subscription.callback(trigger, supabaseSession));\n\t\t\t\t\t} catch {\n\t\t\t\t\t\treturn Promise.resolve();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tPromise.allSettled(promises);\n\t\t\t}\n\t\t});\n\t}\n\tgetBetterAuthInstance() {\n\t\treturn this._betterAuth;\n\t}\n\tinitialize = async () => {\n\t\ttry {\n\t\t\tconst session = await this.getSession();\n\t\t\tif (session.error) throw session.error;\n\t\t\treturn {\n\t\t\t\tdata: session.data,\n\t\t\t\terror: null\n\t\t\t};\n\t\t} catch (error) {\n\t\t\tif (isAuthError(error)) return {\n\t\t\t\tdata: { session: null },\n\t\t\t\terror\n\t\t\t};\n\t\t\tif (isBetterAuthAPIError(error)) return {\n\t\t\t\tdata: { session: null },\n\t\t\t\terror: normalizeBetterAuthError(error)\n\t\t\t};\n\t\t\tthrow error;\n\t\t}\n\t};\n\tasync getSession(options) {\n\t\ttry {\n\t\t\tconst currentSession = await this._betterAuth.getSession(options?.forceFetch ? { fetchOptions: { headers: { \"X-Force-Fetch\": \"true\" } } } : void 0);\n\t\t\tif (!currentSession.data?.session) return {\n\t\t\t\tdata: { session: null },\n\t\t\t\terror: null\n\t\t\t};\n\t\t\treturn {\n\t\t\t\tdata: { session: mapBetterAuthSession(currentSession.data.session, currentSession.data.user) },\n\t\t\t\terror: null\n\t\t\t};\n\t\t} catch (error) {\n\t\t\tif (isAuthError(error)) return {\n\t\t\t\tdata: { session: null },\n\t\t\t\terror\n\t\t\t};\n\t\t\tif (isBetterAuthAPIError(error)) return {\n\t\t\t\tdata: { session: null },\n\t\t\t\terror: normalizeBetterAuthError(error)\n\t\t\t};\n\t\t\tthrow error;\n\t\t}\n\t}\n\trefreshSession = async () => {\n\t\ttry {\n\t\t\tconst sessionResult = await this.getSession();\n\t\t\tif (sessionResult.error) throw sessionResult.error;\n\t\t\treturn {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: sessionResult.data.session?.user ?? null,\n\t\t\t\t\tsession: sessionResult.data.session\n\t\t\t\t},\n\t\t\t\terror: null\n\t\t\t};\n\t\t} catch (error) {\n\t\t\tif (isAuthError(error)) return {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null\n\t\t\t\t},\n\t\t\t\terror\n\t\t\t};\n\t\t\tif (isBetterAuthAPIError(error)) return {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null\n\t\t\t\t},\n\t\t\t\terror: normalizeBetterAuthError(error)\n\t\t\t};\n\t\t\tthrow error;\n\t\t}\n\t};\n\tsetSession = async () => {\n\t\treturn {\n\t\t\tdata: {\n\t\t\t\tuser: null,\n\t\t\t\tsession: null\n\t\t\t},\n\t\t\terror: createAuthError(AuthErrorCode.NotImplemented, \"setSession() is not supported by Better Auth. Use signInWithPassword() instead.\")\n\t\t};\n\t};\n\tsignUp = async (credentials) => {\n\t\ttry {\n\t\t\tif (\"email\" in credentials && credentials.email && credentials.password) {\n\t\t\t\tconst displayName = credentials.options?.data && \"displayName\" in credentials.options.data && typeof credentials.options.data.displayName === \"string\" ? credentials.options.data.displayName : \"\";\n\t\t\t\tconst result = await this._betterAuth.signUp.email({\n\t\t\t\t\temail: credentials.email,\n\t\t\t\t\tpassword: credentials.password,\n\t\t\t\t\tname: displayName,\n\t\t\t\t\tcallbackURL: credentials.options?.emailRedirectTo,\n\t\t\t\t\t...credentials.options?.data\n\t\t\t\t});\n\t\t\t\tif (result.error) throw normalizeBetterAuthError(result.error);\n\t\t\t\tconst sessionResult = await this.getSession();\n\t\t\t\tif (!sessionResult.data.session?.user) throw createAuthError(AuthErrorCode.SessionNotFound, \"Failed to retrieve user session\");\n\t\t\t\treturn {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tuser: sessionResult.data.session.user,\n\t\t\t\t\t\tsession: sessionResult.data.session\n\t\t\t\t\t},\n\t\t\t\t\terror: null\n\t\t\t\t};\n\t\t\t} else if (\"phone\" in credentials && credentials.phone) throw createAuthError(AuthErrorCode.PhoneProviderDisabled, \"Phone sign-up not supported\");\n\t\t\telse throw createAuthError(AuthErrorCode.ValidationFailed, \"Invalid credentials format\");\n\t\t} catch (error) {\n\t\t\tif (isAuthError(error)) return {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null\n\t\t\t\t},\n\t\t\t\terror\n\t\t\t};\n\t\t\tif (isBetterAuthAPIError(error)) return {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null\n\t\t\t\t},\n\t\t\t\terror: normalizeBetterAuthError(error)\n\t\t\t};\n\t\t\tthrow error;\n\t\t}\n\t};\n\tsignInAnonymously = async () => {\n\t\treturn {\n\t\t\tdata: {\n\t\t\t\tuser: null,\n\t\t\t\tsession: null\n\t\t\t},\n\t\t\terror: createAuthError(AuthErrorCode.AnonymousProviderDisabled, `Anonymous sign-in is not supported. To allow unauthenticated access with an anonymous JWT, use the allowAnonymous option in your Auth configuration instead.`)\n\t\t};\n\t};\n\tsignInWithPassword = async (credentials) => {\n\t\ttry {\n\t\t\tif (\"email\" in credentials && credentials.email) {\n\t\t\t\tconst result = await this._betterAuth.signIn.email({\n\t\t\t\t\temail: credentials.email,\n\t\t\t\t\tpassword: credentials.password\n\t\t\t\t});\n\t\t\t\tif (result.error) throw normalizeBetterAuthError(result.error);\n\t\t\t\tconst sessionResult = await this.getSession();\n\t\t\t\tif (!sessionResult.data.session?.user) throw createAuthError(AuthErrorCode.SessionNotFound, \"Failed to retrieve user session\");\n\t\t\t\treturn {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tuser: sessionResult.data.session.user,\n\t\t\t\t\t\tsession: sessionResult.data.session\n\t\t\t\t\t},\n\t\t\t\t\terror: null\n\t\t\t\t};\n\t\t\t} else if (\"phone\" in credentials && credentials.phone) throw createAuthError(AuthErrorCode.PhoneProviderDisabled, \"Phone sign-in not supported\");\n\t\t\telse throw createAuthError(AuthErrorCode.ValidationFailed, \"Invalid credentials format\");\n\t\t} catch (error) {\n\t\t\tif (isAuthError(error)) return {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null\n\t\t\t\t},\n\t\t\t\terror\n\t\t\t};\n\t\t\tif (isBetterAuthAPIError(error)) return {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null\n\t\t\t\t},\n\t\t\t\terror: normalizeBetterAuthError(error)\n\t\t\t};\n\t\t\tthrow error;\n\t\t}\n\t};\n\tsignInWithOAuth = async (credentials) => {\n\t\ttry {\n\t\t\tconst { provider, options } = credentials;\n\t\t\tawait this._betterAuth.signIn.social({\n\t\t\t\tprovider,\n\t\t\t\tscopes: options?.scopes?.split(\" \"),\n\t\t\t\tdisableRedirect: options?.skipBrowserRedirect,\n\t\t\t\tcallbackURL: options?.redirectTo || (globalThis.window === void 0 ? \"\" : globalThis.location.origin)\n\t\t\t});\n\t\t\treturn {\n\t\t\t\tdata: {\n\t\t\t\t\tprovider,\n\t\t\t\t\turl: options?.redirectTo || (globalThis.window === void 0 ? \"\" : globalThis.location.origin)\n\t\t\t\t},\n\t\t\t\terror: null\n\t\t\t};\n\t\t} catch (error) {\n\t\t\tif (isAuthError(error)) return {\n\t\t\t\tdata: {\n\t\t\t\t\tprovider: credentials.provider,\n\t\t\t\t\turl: null\n\t\t\t\t},\n\t\t\t\terror\n\t\t\t};\n\t\t\tif (isBetterAuthAPIError(error)) return {\n\t\t\t\tdata: {\n\t\t\t\t\tprovider: credentials.provider,\n\t\t\t\t\turl: null\n\t\t\t\t},\n\t\t\t\terror: normalizeBetterAuthError(error)\n\t\t\t};\n\t\t\tthrow error;\n\t\t}\n\t};\n\tsignInWithOtp = async (credentials) => {\n\t\ttry {\n\t\t\tif (\"phone\" in credentials) return {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null,\n\t\t\t\t\tmessageId: void 0\n\t\t\t\t},\n\t\t\t\terror: createAuthError(AuthErrorCode.PhoneProviderDisabled, \"Phone OTP authentication is not supported. Use email-based authentication instead.\")\n\t\t\t};\n\t\t\tif (\"email\" in credentials) {\n\t\t\t\tawait this._betterAuth.emailOtp.sendVerificationOtp({\n\t\t\t\t\temail: credentials.email,\n\t\t\t\t\ttype: \"sign-in\"\n\t\t\t\t});\n\t\t\t\treturn {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tuser: null,\n\t\t\t\t\t\tsession: null,\n\t\t\t\t\t\tmessageId: void 0\n\t\t\t\t\t},\n\t\t\t\t\terror: null\n\t\t\t\t};\n\t\t\t}\n\t\t\tthrow createAuthError(AuthErrorCode.ValidationFailed, \"Invalid OTP credentials format\");\n\t\t} catch (error) {\n\t\t\tif (isAuthError(error)) return {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null,\n\t\t\t\t\tmessageId: void 0\n\t\t\t\t},\n\t\t\t\terror\n\t\t\t};\n\t\t\tif (isBetterAuthAPIError(error)) return {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null,\n\t\t\t\t\tmessageId: void 0\n\t\t\t\t},\n\t\t\t\terror: normalizeBetterAuthError(error)\n\t\t\t};\n\t\t\tthrow error;\n\t\t}\n\t};\n\tsignInWithIdToken = async (credentials) => {\n\t\ttry {\n\t\t\tconst result = await this._betterAuth.signIn.social({\n\t\t\t\tprovider: credentials.provider,\n\t\t\t\tidToken: {\n\t\t\t\t\ttoken: credentials.token,\n\t\t\t\t\taccessToken: credentials.access_token,\n\t\t\t\t\tnonce: credentials.nonce\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (result.error) throw normalizeBetterAuthError(result.error);\n\t\t\tif (!(\"user\" in result.data) || !result.data.user) throw createAuthError(AuthErrorCode.OAuthCallbackFailed, \"Failed to sign in with ID token\");\n\t\t\tconst session = await this.getSession();\n\t\t\tif (session.error || !session.data.session) throw session.error || createAuthError(AuthErrorCode.SessionNotFound, \"Failed to get session\");\n\t\t\treturn {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: session.data.session.user,\n\t\t\t\t\tsession: session.data.session\n\t\t\t\t},\n\t\t\t\terror: null\n\t\t\t};\n\t\t} catch (error) {\n\t\t\tif (isAuthError(error)) return {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null\n\t\t\t\t},\n\t\t\t\terror\n\t\t\t};\n\t\t\tif (isBetterAuthAPIError(error)) return {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null\n\t\t\t\t},\n\t\t\t\terror: normalizeBetterAuthError(error)\n\t\t\t};\n\t\t\tthrow error;\n\t\t}\n\t};\n\tsignInWithSSO = async (params) => {\n\t\tconst attemptedWith = \"providerId\" in params ? `provider ID: ${params.providerId}` : `domain: ${\"domain\" in params ? params.domain : \"unknown\"}`;\n\t\treturn {\n\t\t\tdata: null,\n\t\t\terror: createAuthError(AuthErrorCode.SsoProviderDisabled, `Better Auth does not support enterprise SAML SSO. Attempted with ${attemptedWith}. Use signInWithOAuth() for OAuth providers instead.`)\n\t\t};\n\t};\n\tsignInWithWeb3 = async (credentials) => {\n\t\tconst attemptedChain = credentials.chain;\n\t\treturn {\n\t\t\tdata: {\n\t\t\t\tuser: null,\n\t\t\t\tsession: null\n\t\t\t},\n\t\t\terror: createAuthError(AuthErrorCode.Web3ProviderDisabled, `Better Auth does not support Web3 authentication. Attempted with chain: ${attemptedChain}. Supported: OAuth, email/password, magic link.`)\n\t\t};\n\t};\n\tsignOut = async () => {\n\t\ttry {\n\t\t\tconst result = await this._betterAuth.signOut();\n\t\t\tif (result.error) throw normalizeBetterAuthError(result.error);\n\t\t\treturn { error: null };\n\t\t} catch (error) {\n\t\t\tif (isAuthError(error)) return { error };\n\t\t\tif (isBetterAuthAPIError(error)) return { error: normalizeBetterAuthError(error) };\n\t\t\tthrow error;\n\t\t}\n\t};\n\tgetUser = async () => {\n\t\ttry {\n\t\t\tconst sessionResult = await this.getSession();\n\t\t\tif (sessionResult.error || !sessionResult.data.session) throw sessionResult.error || createAuthError(AuthErrorCode.SessionNotFound, \"No user session found\");\n\t\t\treturn {\n\t\t\t\tdata: { user: sessionResult.data.session.user },\n\t\t\t\terror: null\n\t\t\t};\n\t\t} catch (error) {\n\t\t\tif (isAuthError(error)) return {\n\t\t\t\tdata: { user: null },\n\t\t\t\terror\n\t\t\t};\n\t\t\tif (isBetterAuthAPIError(error)) return {\n\t\t\t\tdata: { user: null },\n\t\t\t\terror: normalizeBetterAuthError(error)\n\t\t\t};\n\t\t\tthrow error;\n\t\t}\n\t};\n\tgetClaims = async (jwtArg) => {\n\t\ttry {\n\t\t\tlet jwt = jwtArg;\n\t\t\tif (!jwt) {\n\t\t\t\tconst sessionResult = await this.getSession();\n\t\t\t\tif (sessionResult.error || !sessionResult.data?.session) throw sessionResult.error || createAuthError(AuthErrorCode.SessionNotFound, \"No user session found\");\n\t\t\t\tjwt = sessionResult.data.session.access_token;\n\t\t\t}\n\t\t\tif (!jwt) throw createAuthError(AuthErrorCode.SessionNotFound, \"No access token found\");\n\t\t\tif (jwt.split(\".\").length !== 3) throw createAuthError(AuthErrorCode.BadJwt, \"Invalid token format\");\n\t\t\treturn {\n\t\t\t\tdata: {\n\t\t\t\t\theader: decodeProtectedHeader(jwt),\n\t\t\t\t\tclaims: decodeJwt(jwt),\n\t\t\t\t\tsignature: base64url.decode(jwt.split(\".\")[2])\n\t\t\t\t},\n\t\t\t\terror: null\n\t\t\t};\n\t\t} catch (error) {\n\t\t\tif (isAuthError(error)) return {\n\t\t\t\tdata: null,\n\t\t\t\terror\n\t\t\t};\n\t\t\tif (isBetterAuthAPIError(error)) return {\n\t\t\t\tdata: null,\n\t\t\t\terror: normalizeBetterAuthError(error)\n\t\t\t};\n\t\t\tthrow error;\n\t\t}\n\t};\n\tupdateUser = async (attributes) => {\n\t\ttry {\n\t\t\tif (attributes.password) throw createAuthError(AuthErrorCode.FeatureNotSupported, \"The password cannot be updated through the updateUser method, use the changePassword method instead.\");\n\t\t\tif (attributes.email) throw createAuthError(AuthErrorCode.FeatureNotSupported, \"The email cannot be updated through the updateUser method, use the changeEmail method instead.\");\n\t\t\tconst result = await this._betterAuth.updateUser({ ...attributes.data });\n\t\t\tif (result.data?.status) throw createAuthError(AuthErrorCode.InternalError, \"Failed to update user\");\n\t\t\tif (result?.error) throw normalizeBetterAuthError(result.error);\n\t\t\tconst updatedSessionResult = await this.getSession({ forceFetch: true });\n\t\t\tif (!updatedSessionResult.data.session) throw createAuthError(AuthErrorCode.SessionNotFound, \"Failed to retrieve updated user\");\n\t\t\treturn {\n\t\t\t\tdata: { user: updatedSessionResult.data.session.user },\n\t\t\t\terror: null\n\t\t\t};\n\t\t} catch (error) {\n\t\t\tif (isAuthError(error)) return {\n\t\t\t\tdata: { user: null },\n\t\t\t\terror\n\t\t\t};\n\t\t\tif (isBetterAuthAPIError(error)) return {\n\t\t\t\tdata: { user: null },\n\t\t\t\terror: normalizeBetterAuthError(error)\n\t\t\t};\n\t\t\tthrow error;\n\t\t}\n\t};\n\tgetUserIdentities = async () => {\n\t\ttry {\n\t\t\tconst sessionResult = await this.getSession();\n\t\t\tif (sessionResult.error || !sessionResult.data.session) throw sessionResult.error || createAuthError(AuthErrorCode.SessionNotFound, \"No user session found\");\n\t\t\tconst result = await this._betterAuth.listAccounts();\n\t\t\tif (!result) throw createAuthError(AuthErrorCode.InternalError, \"Failed to list accounts\");\n\t\t\tif (result.error) throw normalizeBetterAuthError(result.error);\n\t\t\tconst identitiesPromises = result.data.map(async (account) => {\n\t\t\t\tlet accountInfo = null;\n\t\t\t\ttry {\n\t\t\t\t\taccountInfo = (await this._betterAuth.accountInfo({ query: { accountId: account.accountId } })).data;\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.warn(`Failed to get account info for ${account.providerId}:`, error);\n\t\t\t\t}\n\t\t\t\treturn mapBetterAuthIdentity(account, accountInfo ?? null);\n\t\t\t});\n\t\t\treturn {\n\t\t\t\tdata: { identities: await Promise.all(identitiesPromises) },\n\t\t\t\terror: null\n\t\t\t};\n\t\t} catch (error) {\n\t\t\tif (isAuthError(error)) return {\n\t\t\t\tdata: null,\n\t\t\t\terror\n\t\t\t};\n\t\t\tif (isBetterAuthAPIError(error)) return {\n\t\t\t\tdata: null,\n\t\t\t\terror: normalizeBetterAuthError(error)\n\t\t\t};\n\t\t\tthrow error;\n\t\t}\n\t};\n\tlinkIdentity = async (credentials) => {\n\t\tconst provider = credentials.provider;\n\t\ttry {\n\t\t\tconst sessionResult = await this.getSession();\n\t\t\tif (sessionResult.error || !sessionResult.data.session) throw sessionResult.error || createAuthError(AuthErrorCode.SessionNotFound, \"No user session found\");\n\t\t\tif (\"token\" in credentials) {\n\t\t\t\tconst result$1 = await this._betterAuth.linkSocial({\n\t\t\t\t\tprovider,\n\t\t\t\t\tidToken: {\n\t\t\t\t\t\ttoken: credentials.token,\n\t\t\t\t\t\taccessToken: credentials.access_token,\n\t\t\t\t\t\tnonce: credentials.nonce\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (result$1.error) throw normalizeBetterAuthError(result$1.error);\n\t\t\t\treturn {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tuser: sessionResult.data.session.user,\n\t\t\t\t\t\tsession: sessionResult.data.session,\n\t\t\t\t\t\tprovider,\n\t\t\t\t\t\turl: result$1.data?.url\n\t\t\t\t\t},\n\t\t\t\t\terror: null\n\t\t\t\t};\n\t\t\t}\n\t\t\tconst callbackURL = credentials.options?.redirectTo || (globalThis.window === void 0 ? \"\" : globalThis.location.origin);\n\t\t\tconst scopes = credentials.options?.scopes?.split(\" \").filter((s) => s.length > 0);\n\t\t\tconst result = await this._betterAuth.linkSocial({\n\t\t\t\tprovider,\n\t\t\t\tcallbackURL,\n\t\t\t\terrorCallbackURL: callbackURL ? `${callbackURL}?error=linking-failed` : void 0,\n\t\t\t\tscopes\n\t\t\t});\n\t\t\tif (result.error) throw normalizeBetterAuthError(result.error);\n\t\t\treturn {\n\t\t\t\tdata: {\n\t\t\t\t\tprovider,\n\t\t\t\t\turl: result.data?.url,\n\t\t\t\t\tuser: sessionResult.data.session.user,\n\t\t\t\t\tsession: sessionResult.data.session\n\t\t\t\t},\n\t\t\t\terror: null\n\t\t\t};\n\t\t} catch (error) {\n\t\t\tif (isAuthError(error)) return {\n\t\t\t\tdata: {\n\t\t\t\t\tprovider,\n\t\t\t\t\turl: null,\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null\n\t\t\t\t},\n\t\t\t\terror\n\t\t\t};\n\t\t\tif (isBetterAuthAPIError(error)) return {\n\t\t\t\tdata: {\n\t\t\t\t\tprovider,\n\t\t\t\t\turl: null,\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null\n\t\t\t\t},\n\t\t\t\terror: normalizeBetterAuthError(error)\n\t\t\t};\n\t\t\tthrow error;\n\t\t}\n\t};\n\tunlinkIdentity = async (identity) => {\n\t\ttry {\n\t\t\tconst sessionResult = await this.getSession();\n\t\t\tif (sessionResult.error || !sessionResult.data.session) throw sessionResult.error || createAuthError(AuthErrorCode.SessionNotFound, \"No user session found\");\n\t\t\tconst identities = await this.getUserIdentities();\n\t\t\tif (identities.error || !identities.data) throw identities.error || createAuthError(AuthErrorCode.InternalError, \"Failed to fetch identities\");\n\t\t\tconst targetIdentity = identities.data.identities.find((i) => i.id === identity.identity_id);\n\t\t\tif (!targetIdentity) throw createAuthError(AuthErrorCode.IdentityNotFound, \"Identity not found\");\n\t\t\tconst providerId = targetIdentity.provider;\n\t\t\tconst accountId = targetIdentity.identity_id;\n\t\t\tconst result = await this._betterAuth.unlinkAccount({\n\t\t\t\tproviderId,\n\t\t\t\taccountId\n\t\t\t});\n\t\t\tif (result?.error) throw normalizeBetterAuthError(result.error);\n\t\t\tconst updatedSession = await this.getSession({ forceFetch: true });\n\t\t\tif (updatedSession.data.session) BETTER_AUTH_METHODS_HOOKS[\"updateUser\"].onSuccess(updatedSession.data.session);\n\t\t\treturn {\n\t\t\t\tdata: {},\n\t\t\t\terror: null\n\t\t\t};\n\t\t} catch (error) {\n\t\t\tif (isAuthError(error)) return {\n\t\t\t\tdata: null,\n\t\t\t\terror\n\t\t\t};\n\t\t\tif (isBetterAuthAPIError(error)) return {\n\t\t\t\tdata: null,\n\t\t\t\terror: normalizeBetterAuthError(error)\n\t\t\t};\n\t\t\tthrow error;\n\t\t}\n\t};\n\tverifyOtp = async (params) => {\n\t\ttry {\n\t\t\tif (\"phone\" in params && params.phone) return {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null\n\t\t\t\t},\n\t\t\t\terror: createAuthError(AuthErrorCode.PhoneProviderDisabled, \"Phone OTP verification is not supported. Use email-based authentication instead.\")\n\t\t\t};\n\t\t\tif (\"email\" in params && params.type === \"magiclink\") return {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null\n\t\t\t\t},\n\t\t\t\terror: createAuthError(AuthErrorCode.MagicLinkNotSupported, \"Magic link verification is not supported. Use email OTP authentication instead.\")\n\t\t\t};\n\t\t\tif (\"email\" in params && params.email) return await this.verifyEmailOtp(params);\n\t\t\tif (\"token_hash\" in params && params.token_hash) throw createAuthError(AuthErrorCode.FeatureNotSupported, \"Token hash verification not supported\");\n\t\t\tthrow createAuthError(AuthErrorCode.ValidationFailed, \"Invalid OTP verification parameters\");\n\t\t} catch (error) {\n\t\t\tif (isAuthError(error)) return {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null\n\t\t\t\t},\n\t\t\t\terror\n\t\t\t};\n\t\t\tif (isBetterAuthAPIError(error)) return {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null\n\t\t\t\t},\n\t\t\t\terror: normalizeBetterAuthError(error)\n\t\t\t};\n\t\t\tthrow error;\n\t\t}\n\t};\n\tresetPasswordForEmail = async (email, options) => {\n\t\ttry {\n\t\t\tconst result = await this._betterAuth.requestPasswordReset({\n\t\t\t\temail,\n\t\t\t\tredirectTo: options?.redirectTo || (globalThis.window === void 0 ? \"\" : globalThis.location.origin)\n\t\t\t});\n\t\t\tif (result?.error) throw normalizeBetterAuthError(result.error);\n\t\t\treturn {\n\t\t\t\tdata: {},\n\t\t\t\terror: null\n\t\t\t};\n\t\t} catch (error) {\n\t\t\tif (isAuthError(error)) return {\n\t\t\t\tdata: null,\n\t\t\t\terror\n\t\t\t};\n\t\t\tif (isBetterAuthAPIError(error)) return {\n\t\t\t\tdata: null,\n\t\t\t\terror: normalizeBetterAuthError(error)\n\t\t\t};\n\t\t\tthrow error;\n\t\t}\n\t};\n\treauthenticate = async () => {\n\t\ttry {\n\t\t\tconst newSession = await this.getSession();\n\t\t\tif (newSession.error || !newSession.data.session) throw newSession.error || createAuthError(AuthErrorCode.SessionNotFound, \"No session found\");\n\t\t\treturn {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: newSession.data.session?.user || null,\n\t\t\t\t\tsession: newSession.data.session\n\t\t\t\t},\n\t\t\t\terror: null\n\t\t\t};\n\t\t} catch (error) {\n\t\t\tif (isAuthError(error)) return {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null\n\t\t\t\t},\n\t\t\t\terror\n\t\t\t};\n\t\t\tif (isBetterAuthAPIError(error)) return {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null\n\t\t\t\t},\n\t\t\t\terror: normalizeBetterAuthError(error)\n\t\t\t};\n\t\t\tthrow error;\n\t\t}\n\t};\n\tresend = async (credentials) => {\n\t\ttry {\n\t\t\tif (\"email\" in credentials) {\n\t\t\t\tconst { email, type, options } = credentials;\n\t\t\t\tif (type === \"signup\" || type === \"email_change\") {\n\t\t\t\t\tconst result = await this._betterAuth.sendVerificationEmail({\n\t\t\t\t\t\temail,\n\t\t\t\t\t\tcallbackURL: options?.emailRedirectTo || (globalThis.window === void 0 ? \"\" : globalThis.location.origin)\n\t\t\t\t\t});\n\t\t\t\t\tif (result?.error) throw normalizeBetterAuthError(result.error);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tuser: null,\n\t\t\t\t\t\t\tsession: null\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: null\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tthrow createAuthError(AuthErrorCode.ValidationFailed, `Unsupported resend type: ${type}`);\n\t\t\t}\n\t\t\tif (\"phone\" in credentials) return {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null\n\t\t\t\t},\n\t\t\t\terror: createAuthError(AuthErrorCode.PhoneProviderDisabled, \"SMS resend is not supported. Use email-based authentication instead.\")\n\t\t\t};\n\t\t\tthrow createAuthError(AuthErrorCode.ValidationFailed, \"Invalid credentials format\");\n\t\t} catch (error) {\n\t\t\tif (isAuthError(error)) return {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null\n\t\t\t\t},\n\t\t\t\terror\n\t\t\t};\n\t\t\tif (isBetterAuthAPIError(error)) return {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null\n\t\t\t\t},\n\t\t\t\terror: normalizeBetterAuthError(error)\n\t\t\t};\n\t\t\tthrow error;\n\t\t}\n\t};\n\texchangeCodeForSession = async (_authCode) => {\n\t\ttry {\n\t\t\tconst sessionResult = await this.getSession();\n\t\t\tif (sessionResult.data.session) return {\n\t\t\t\tdata: {\n\t\t\t\t\tsession: sessionResult.data.session,\n\t\t\t\t\tuser: sessionResult.data.session.user\n\t\t\t\t},\n\t\t\t\terror: null\n\t\t\t};\n\t\t\tthrow createAuthError(AuthErrorCode.OAuthCallbackFailed, \"OAuth callback completed but no session was created. Make sure the OAuth callback has been processed.\");\n\t\t} catch (error) {\n\t\t\tif (isAuthError(error)) return {\n\t\t\t\tdata: {\n\t\t\t\t\tsession: null,\n\t\t\t\t\tuser: null\n\t\t\t\t},\n\t\t\t\terror\n\t\t\t};\n\t\t\tif (isBetterAuthAPIError(error)) return {\n\t\t\t\tdata: {\n\t\t\t\t\tsession: null,\n\t\t\t\t\tuser: null\n\t\t\t\t},\n\t\t\t\terror: normalizeBetterAuthError(error)\n\t\t\t};\n\t\t\tthrow error;\n\t\t}\n\t};\n\tonAuthStateChange = (callback) => {\n\t\tconst id = crypto.randomUUID();\n\t\tconst subscription = {\n\t\t\tid,\n\t\t\tcallback,\n\t\t\tunsubscribe: () => {\n\t\t\t\tthis._stateChangeEmitters.delete(id);\n\t\t\t}\n\t\t};\n\t\tthis._stateChangeEmitters.set(id, subscription);\n\t\tthis.emitInitialSession(callback);\n\t\treturn { data: { subscription: {\n\t\t\tid,\n\t\t\tcallback,\n\t\t\tunsubscribe: subscription.unsubscribe\n\t\t} } };\n\t};\n\tisThrowOnErrorEnabled = () => false;\n\tstartAutoRefresh = async () => {};\n\tstopAutoRefresh = async () => {};\n\tasync verifyEmailOtp(params) {\n\t\tconst { type } = params;\n\t\tif (type === \"email\") {\n\t\t\tconst result = await this._betterAuth.signIn.emailOtp({\n\t\t\t\temail: params.email,\n\t\t\t\totp: params.token\n\t\t\t});\n\t\t\tif (result.error) return {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null\n\t\t\t\t},\n\t\t\t\terror: normalizeBetterAuthError(result.error)\n\t\t\t};\n\t\t\tconst sessionResult = await this.getSession({ forceFetch: true });\n\t\t\tif (!sessionResult.data.session) return {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null\n\t\t\t\t},\n\t\t\t\terror: createAuthError(AuthErrorCode.SessionNotFound, \"Failed to retrieve session after OTP verification. Make sure the magic link callback has been processed.\")\n\t\t\t};\n\t\t\treturn {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: sessionResult.data.session.user,\n\t\t\t\t\tsession: sessionResult.data.session\n\t\t\t\t},\n\t\t\t\terror: null\n\t\t\t};\n\t\t}\n\t\tif (type === \"magiclink\") return {\n\t\t\tdata: {\n\t\t\t\tuser: null,\n\t\t\t\tsession: null\n\t\t\t},\n\t\t\terror: createAuthError(AuthErrorCode.MagicLinkNotSupported, \"Magic link verification is not supported. Use email OTP authentication instead.\")\n\t\t};\n\t\tif (type === \"signup\" || type === \"invite\") {\n\t\t\tconst result = await this._betterAuth.emailOtp.verifyEmail({\n\t\t\t\temail: params.email,\n\t\t\t\totp: params.token\n\t\t\t});\n\t\t\tif (result?.error) return {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null\n\t\t\t\t},\n\t\t\t\terror: normalizeBetterAuthError(result.error)\n\t\t\t};\n\t\t\tconst sessionResult = await this.getSession({ forceFetch: true });\n\t\t\treturn {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: sessionResult.data.session?.user ?? null,\n\t\t\t\t\tsession: sessionResult.data.session\n\t\t\t\t},\n\t\t\t\terror: null\n\t\t\t};\n\t\t}\n\t\tif (type === \"recovery\") {\n\t\t\tconst checkResult = await this._betterAuth.emailOtp.checkVerificationOtp({\n\t\t\t\temail: params.email,\n\t\t\t\totp: params.token,\n\t\t\t\ttype: \"forget-password\"\n\t\t\t});\n\t\t\tif (checkResult.error || !checkResult.data?.success) return {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null\n\t\t\t\t},\n\t\t\t\terror: normalizeBetterAuthError(checkResult.error)\n\t\t\t};\n\t\t\treturn {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null\n\t\t\t\t},\n\t\t\t\terror: null\n\t\t\t};\n\t\t}\n\t\tif (type === \"email_change\") {\n\t\t\tconst result = await this._betterAuth.verifyEmail({ query: {\n\t\t\t\ttoken: params.token,\n\t\t\t\tcallbackURL: params.options?.redirectTo\n\t\t\t} });\n\t\t\tif (result?.error) return {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null\n\t\t\t\t},\n\t\t\t\terror: normalizeBetterAuthError(result.error)\n\t\t\t};\n\t\t\tconst sessionResult = await this.getSession({ forceFetch: true });\n\t\t\tif (sessionResult.error || !sessionResult.data) return {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null\n\t\t\t\t},\n\t\t\t\terror: sessionResult.error || createAuthError(AuthErrorCode.InternalError, \"Failed to get session\")\n\t\t\t};\n\t\t\tif (sessionResult.data.session) BETTER_AUTH_METHODS_HOOKS[\"updateUser\"].onSuccess(sessionResult.data.session);\n\t\t\treturn {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: sessionResult.data?.session?.user || null,\n\t\t\t\t\tsession: sessionResult.data?.session || null\n\t\t\t\t},\n\t\t\t\terror: null\n\t\t\t};\n\t\t}\n\t\tif (type === \"invite\") {\n\t\t\tconst result = await this._betterAuth.organization.acceptInvitation({ invitationId: params.token });\n\t\t\tif (result.error) return {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null\n\t\t\t\t},\n\t\t\t\terror: normalizeBetterAuthError(result.error)\n\t\t\t};\n\t\t\tconst sessionResult = await this.getSession({ forceFetch: true });\n\t\t\tif (sessionResult.error || !sessionResult.data) return {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: null,\n\t\t\t\t\tsession: null\n\t\t\t\t},\n\t\t\t\terror: sessionResult.error || createAuthError(AuthErrorCode.InternalError, \"Failed to get session\")\n\t\t\t};\n\t\t\treturn {\n\t\t\t\tdata: {\n\t\t\t\t\tuser: sessionResult.data?.session?.user || null,\n\t\t\t\t\tsession: sessionResult.data?.session\n\t\t\t\t},\n\t\t\t\terror: null\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\tdata: {\n\t\t\t\tuser: null,\n\t\t\t\tsession: null\n\t\t\t},\n\t\t\terror: createAuthError(AuthErrorCode.ValidationFailed, `Unsupported email OTP type: ${type}`)\n\t\t};\n\t}\n\tasync emitInitialSession(callback) {\n\t\ttry {\n\t\t\tconst { data, error } = await this.getSession();\n\t\t\tif (error) {\n\t\t\t\tawait callback(\"INITIAL_SESSION\", null);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tawait callback(\"INITIAL_SESSION\", data.session);\n\t\t} catch {\n\t\t\tawait callback(\"INITIAL_SESSION\", null);\n\t\t}\n\t}\n};\n/**\n* Factory function that returns an adapter builder.\n* The builder is called by createClient/createAuthClient with the URL.\n*\n* @param options - Optional adapter configuration (baseURL is injected separately)\n* @returns A builder function that creates the adapter instance\n*\n* @example\n* ```typescript\n* const client = createClient({\n*   auth: {\n*     url: 'https://auth.example.com',\n*     adapter: SupabaseAuthAdapter(),\n*   },\n*   dataApi: { url: 'https://data-api.example.com' },\n* });\n* ```\n*/\nfunction SupabaseAuthAdapter(options) {\n\treturn (url, fetchOptions) => new SupabaseAuthAdapterImpl({\n\t\tbaseURL: url,\n\t\t...options,\n\t\tfetchOptions: {\n\t\t\t...options?.fetchOptions,\n\t\t\theaders: {\n\t\t\t\t...options?.fetchOptions?.headers,\n\t\t\t\t...fetchOptions?.headers\n\t\t\t}\n\t\t}\n\t});\n}\n\n//#endregion\nexport { BetterAuthVanillaAdapter as n, SupabaseAuthAdapter as t };"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 3789, "column": 0}, "map": {"version":3,"sources":["file:///Users/collinsnnaji/VSCodeDevelopments/convivia24/node_modules/%40neondatabase/auth/dist/neon-auth-Cs2cWh1B.mjs"],"sourcesContent":["import { n as BetterAuthVanillaAdapter } from \"./supabase-adapter-BlcGPyOf.mjs\";\n\n//#region src/neon-auth.ts\n/**\n* Create a NeonAuth instance that exposes the appropriate API based on the adapter.\n*\n* @param url - The auth service URL (e.g., 'https://auth.example.com')\n* @param config - Configuration with adapter builder\n* @returns NeonAuth instance with the adapter's API exposed directly\n*\n* @example SupabaseAuthAdapter - Supabase-compatible API\n* ```typescript\n* import { createAuthClient, SupabaseAuthAdapter } from '@neondatabase/auth';\n*\n* const auth = createAuthClient('https://auth.example.com', {\n*   adapter: SupabaseAuthAdapter(),\n* });\n*\n* // Supabase-compatible methods\n* await auth.signInWithPassword({ email, password });\n* await auth.getSession();\n* ```\n*\n* @example BetterAuthVanillaAdapter - Direct Better Auth API\n* ```typescript\n* import { createAuthClient, BetterAuthVanillaAdapter } from '@neondatabase/auth';\n*\n* const auth = createAuthClient('https://auth.example.com', {\n*   adapter: BetterAuthVanillaAdapter(),\n* });\n*\n* // Direct Better Auth API access\n* await auth.signIn.email({ email, password });\n* await auth.signUp.email({ email, password, name: 'John' });\n* await auth.getSession();\n* ```\n*\n* @example BetterAuthReactAdapter - Better Auth with React hooks\n* ```typescript\n* import { createAuthClient, BetterAuthReactAdapter } from '@neondatabase/auth';\n*\n* const auth = createAuthClient('https://auth.example.com', {\n*   adapter: BetterAuthReactAdapter(),\n* });\n*\n* // Direct Better Auth API with React hooks\n* await auth.signIn.email({ email, password });\n* const session = auth.useSession(); // React hook\n* ```\n*/\nfunction createInternalNeonAuth(url, config) {\n\tconst adapterBuilder = config?.adapter ?? BetterAuthVanillaAdapter();\n\tconst { fetchOptions } = config ?? {};\n\tconst adapter = adapterBuilder(url, fetchOptions);\n\tconst allowAnonymous = config?.allowAnonymous ?? false;\n\tif (!(typeof adapter.initialize === \"function\")) return {\n\t\tgetJWTToken: () => adapter.getJWTToken(allowAnonymous),\n\t\tadapter: adapter.getBetterAuthInstance()\n\t};\n\treturn {\n\t\tgetJWTToken: () => adapter.getJWTToken(allowAnonymous),\n\t\tadapter\n\t};\n}\nfunction createAuthClient(url, config) {\n\treturn createInternalNeonAuth(url, config).adapter;\n}\n\n//#endregion\nexport { createInternalNeonAuth as n, createAuthClient as t };"],"names":[],"mappings":";;;;;;AAAA;;AAEA,0BAA0B;AAC1B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA,GACA,SAAS,uBAAuB,GAAG,EAAE,MAAM;QACnB;IAAvB,IAAM,iBAAiB,CAAA,kBAAA,mBAAA,6BAAA,OAAQ,OAAO,cAAf,6BAAA,kBAAmB,IAAA,0LAAwB;IAClE,IAAM,AAAE,eAAiB,CAAA,mBAAA,oBAAA,SAAU,CAAC,CAAA,EAA5B;IACR,IAAM,UAAU,eAAe,KAAK;QACb;IAAvB,IAAM,iBAAiB,CAAA,yBAAA,mBAAA,6BAAA,OAAQ,cAAc,cAAtB,oCAAA,yBAA0B;IACjD,IAAI,CAAC,CAAC,OAAO,QAAQ,UAAU,KAAK,UAAU,GAAG,OAAO;QACvD,aAAa;mBAAM,QAAQ,WAAW,CAAC;;QACvC,SAAS,QAAQ,qBAAqB;IACvC;IACA,OAAO;QACN,aAAa;mBAAM,QAAQ,WAAW,CAAC;;QACvC,SAAA;IACD;AACD;AACA,SAAS,iBAAiB,GAAG,EAAE,MAAM;IACpC,OAAO,uBAAuB,KAAK,QAAQ,OAAO;AACnD","ignoreList":[0]}},
    {"offset": {"line": 3872, "column": 0}, "map": {"version":3,"sources":["file:///Users/collinsnnaji/VSCodeDevelopments/convivia24/node_modules/%40neondatabase/auth/dist/next/index.mjs"],"sourcesContent":["import \"../adapter-core-CtmnMMJ7.mjs\";\nimport { t as BetterAuthReactAdapter } from \"../better-auth-react-adapter-Dv-o6A6O.mjs\";\nimport { t as createAuthClient$1 } from \"../neon-auth-Cs2cWh1B.mjs\";\n\n//#region src/next/index.ts\nfunction createAuthClient() {\n\treturn createAuthClient$1(void 0, { adapter: BetterAuthReactAdapter() });\n}\n\n//#endregion\nexport { createAuthClient };"],"names":[],"mappings":";;;;AACA;AACA;;;;AAEA,2BAA2B;AAC3B,SAAS;IACR,OAAO,IAAA,mLAAkB,EAAC,KAAK,GAAG;QAAE,SAAS,IAAA,4MAAsB;IAAG;AACvE","ignoreList":[0]}}]
}